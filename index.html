<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Did We Win?</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link href="https://fonts.googleapis.com/css2?family=Anton&family=DM+Sans:ital,wght@0,300;0,400;0,500;1,400&display=swap" rel="stylesheet" />
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    :root {
      --yes:  #4ade80;
      --no:   #f87171;
      --live: #fbbf24;
      --bg:   #111318;
      --surface: #1a1d24;
      --surface2: #22262f;
      --border: rgba(255,255,255,0.07);
      --text-dim: rgba(255,255,255,0.35);
    }

    body {
      min-height: 100vh;
      background: var(--bg);
      font-family: 'DM Sans', sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 2.5rem 1rem 2rem;
    }

    /* â”€â”€ HEADER â”€â”€ */
    header { text-align: center; margin-bottom: 2.4rem; }

    h1 {
      font-family: 'Anton', sans-serif;
      font-size: clamp(2.8rem, 8vw, 5.5rem);
      color: #fff;
      letter-spacing: 0.03em;
      line-height: 1;
      text-transform: uppercase;
    }
    h1 em { color: var(--live); font-style: normal; }

    .subtitle {
      margin-top: 0.55rem;
      font-size: 0.7rem;
      color: #444;
      letter-spacing: 0.2em;
      text-transform: uppercase;
    }

    .refresh-info {
      margin-top: 0.3rem;
      font-size: 0.67rem;
      color: #353535;
      letter-spacing: 0.07em;
    }
    #last-updated { color: #4a4a4a; }

    #refresh-btn {
      background: none;
      border: 1px solid #2a2a2a;
      color: #4a4a4a;
      font-family: 'DM Sans', sans-serif;
      font-size: 0.67rem;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      padding: 0.2rem 0.6rem;
      border-radius: 20px;
      cursor: pointer;
      margin-left: 0.5rem;
      transition: border-color 0.2s, color 0.2s;
      vertical-align: middle;
    }
    #refresh-btn:hover { border-color: #555; color: #888; }
    #refresh-btn.spinning { animation: spin 0.6s linear; }
    @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }

    /* â”€â”€ GRID â”€â”€ */
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 1.4rem;
      width: 100%;
      max-width: 1080px;
    }

    /* â”€â”€ EMPTY STATE â”€â”€ */
    .empty-state {
      grid-column: 1 / -1;
      text-align: center;
      padding: 4rem 2rem;
      color: var(--text-dim);
    }
    .empty-state .empty-icon { font-size: 3rem; margin-bottom: 1rem; opacity: 0.4; }
    .empty-state p { font-size: 0.9rem; letter-spacing: 0.08em; }

    /* â”€â”€ CARD SHELL â”€â”€ */
    .card {
      border-radius: 18px;
      position: relative;
      overflow: hidden;
      box-shadow: 0 8px 40px rgba(0,0,0,0.5), 0 0 0 1px rgba(255,255,255,0.05);
      cursor: pointer;
      min-height: 360px;
      transition: box-shadow 0.25s, transform 0.25s;
    }
    .card:hover { transform: translateY(-2px); }

    .card-front,
    .card-back {
      position: absolute;
      inset: 0;
      padding: 1.5rem 1.6rem 1.4rem;
      display: flex;
      flex-direction: column;
      gap: 0.65rem;
      transition: opacity 0.28s ease, transform 0.28s ease;
      border-radius: 18px;
      overflow: hidden;
    }

    .card-back {
      opacity: 0;
      transform: translateY(10px);
      pointer-events: none;
    }

    @media (hover: hover) {
      .card:not(.flipped):hover .card-front {
        opacity: 0;
        transform: translateY(-10px);
        pointer-events: none;
      }
      .card:not(.flipped):hover .card-back {
        opacity: 1;
        transform: translateY(0);
        pointer-events: all;
      }
    }

    .card.flipped .card-front {
      opacity: 0;
      transform: translateY(-10px);
      pointer-events: none;
    }
    .card.flipped .card-back {
      opacity: 1;
      transform: translateY(0);
      pointer-events: all;
    }

    /* subtle texture */
    .card-front::before, .card-back::before {
      content: '';
      position: absolute;
      inset: 0;
      background: repeating-linear-gradient(
        -55deg,
        rgba(255,255,255,0.02) 0px, rgba(255,255,255,0.02) 1px,
        transparent 1px, transparent 22px
      );
      pointer-events: none;
      border-radius: inherit;
    }

    /* shimmer */
    .card.loading .card-front::after {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.05), transparent);
      background-size: 200% 100%;
      animation: shimmer 1.4s infinite;
      border-radius: inherit;
    }
    @keyframes shimmer {
      0%   { background-position: -200% 0; }
      100% { background-position:  200% 0; }
    }

    /* â”€â”€â”€ TEAM CARD THEMES â”€â”€â”€ */
    /* Love teams â€” refined gradients, softer glows */
    .card.team-love .card-front,
    .card.team-love .card-back {
      /* Applied dynamically via JS */
    }

    /* Hate team â€” desaturated, ugly on purpose */
    .card.hate-card .card-front,
    .card.hate-card .card-back {
      background: linear-gradient(160deg, #1c1800 0%, #2a2100 45%, #141100 100%);
      filter: saturate(0.4) brightness(0.8);
    }
    .card.hate-card {
      box-shadow: 0 8px 40px rgba(0,0,0,0.9), 0 0 0 1px rgba(80,60,0,0.15);
      transform: rotate(-0.5deg);
    }
    .card.hate-card:hover { transform: rotate(-0.5deg) translateY(-2px); }
    .card.hate-card .team-name {
      color: #6a6040;
      text-decoration: line-through;
      text-decoration-color: rgba(255,80,80,0.4);
    }
    .card.hate-card .card-front::after {
      content: 'ğŸ¤® ğŸ¤¢ ğŸ¤®';
      position: absolute;
      bottom: 0.5rem;
      right: 0.6rem;
      font-size: 2rem;
      opacity: 0.18;
      pointer-events: none;
    }
    .card.hate-card .answer.yes { color: #7a9966; text-shadow: none; }
    .card.hate-card .answer.yes::after { content: ' ğŸ¤¢ ugh'; font-size: 0.35em; color: rgba(255,255,255,0.25); vertical-align: middle; }
    .card.hate-card .answer.no::after  { content: ' ğŸ˜‚ğŸ‰'; font-size: 0.5em; vertical-align: middle; }
    .card.hate-card .hint { color: rgba(255,255,255,0.08); }

    /* â”€â”€ TEAM HEADER â”€â”€ */
    .team-header {
      display: flex;
      flex-direction: column;
      gap: 0;
    }

    .team-emoji {
      font-size: 1.3rem;
      line-height: 1;
      display: block;
      margin-bottom: 0.22rem;
    }

    .team-name-row {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      flex-wrap: nowrap;
      line-height: 1;
    }
    .team-tag-row {
      display: flex;
      align-items: center;
      margin-top: 0.28rem;
    }

    .team-name {
      font-family: 'Anton', sans-serif;
      font-size: clamp(1rem, 3.2vw, 1.4rem);
      letter-spacing: 0.06em;
      text-transform: uppercase;
      line-height: 1;
      white-space: nowrap;
      color: #fff;
    }

    .team-sub {
      font-size: 0.64rem;
      letter-spacing: 0.13em;
      text-transform: uppercase;
      color: rgba(255,255,255,0.35);
      margin-top: 0.25rem;
    }

    .love-tag, .hate-tag {
      font-size: 0.58rem;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      padding: 0.16rem 0.5rem;
      border-radius: 20px;
      font-weight: 500;
      white-space: nowrap;
    }
    .love-tag { background: rgba(255,255,255,0.12); color: rgba(255,255,255,0.6); }
    .hate-tag { background: rgba(255,50,50,0.12); color: rgba(255,120,120,0.6); }

    /* â”€â”€ FRONT GAME DETAILS â”€â”€ */
    .front-game {
      display: flex;
      flex-direction: column;
      gap: 0.1rem;
    }
    .front-game-label {
      font-size: 0.58rem;
      letter-spacing: 0.18em;
      text-transform: uppercase;
      color: rgba(255,255,255,0.25);
      font-weight: 500;
    }
    .front-game-line {
      font-size: 0.8rem;
      color: rgba(255,255,255,0.65);
      line-height: 1.4;
    }
    .front-game-line strong { color: rgba(255,255,255,0.9); }

    .front-badge {
      display: inline-block;
      font-family: 'Anton', sans-serif;
      font-size: 0.68rem;
      letter-spacing: 0.04em;
      padding: 0.08rem 0.35rem;
      border-radius: 4px;
      margin-left: 0.3rem;
      vertical-align: middle;
      position: relative; top: -1px;
    }
    .front-badge.w    { background: rgba(74,222,128,0.15); color: var(--yes); }
    .front-badge.l    { background: rgba(248,113,113,0.15); color: var(--no); }
    .front-badge.live { background: rgba(251,191,36,0.15); color: var(--live); }
    .front-badge.up   { background: rgba(255,255,255,0.07); color: rgba(255,255,255,0.38); font-family: 'DM Sans', sans-serif; font-size: 0.68rem; }

    .answer {
      font-family: 'Anton', sans-serif;
      font-size: clamp(3.2rem, 9vw, 5rem);
      line-height: 1;
      letter-spacing: -0.01em;
    }
    .answer.yes  { color: var(--yes);  text-shadow: 0 0 30px rgba(74,222,128,0.35); }
    .answer.no   { color: var(--no);   text-shadow: 0 0 30px rgba(248,113,113,0.35); }
    .answer.live { color: var(--live); text-shadow: 0 0 30px rgba(251,191,36,0.4); animation: blink 1.2s ease-in-out infinite; }
    .answer.tbd  { color: #333; font-size: clamp(2rem, 5vw, 3rem); }

    @keyframes blink {
      0%, 100% { opacity: 1; }
      50%       { opacity: 0.35; }
    }

    .live-details {
      font-family: 'Anton', sans-serif;
      font-size: 0.95rem;
      letter-spacing: 0.06em;
      color: rgba(251,191,36,0.75);
      margin-top: -0.5rem;
      display: flex;
      align-items: center;
      gap: 0.4rem;
      flex-wrap: wrap;
    }

    .live-opponent {
      font-size: 0.78rem;
      color: rgba(255,255,255,0.5);
      letter-spacing: 0.05em;
      margin-top: -0.25rem;
    }
    .live-opponent strong { color: rgba(255,255,255,0.8); }

    .winning-tag {
      font-family: 'DM Sans', sans-serif;
      font-size: 0.62rem;
      font-weight: 600;
      letter-spacing: 0.07em;
      text-transform: uppercase;
      padding: 0.09rem 0.38rem;
      border-radius: 4px;
    }
    .winning-tag         { background: rgba(74,222,128,0.14); color: var(--yes); }
    .winning-tag.losing  { background: rgba(248,113,113,0.14); color: var(--no); }
    .winning-tag.tied    { background: rgba(255,255,255,0.08); color: rgba(255,255,255,0.45); }

    /* hint */
    .hint {
      font-size: 0.6rem;
      color: rgba(255,255,255,0.15);
      letter-spacing: 0.12em;
      text-transform: uppercase;
      margin-top: auto;
      text-align: right;
    }
    .hint-hover { display: inline; }
    .hint-tap   { display: none; }
    @media (hover: none) {
      .hint-hover { display: none; }
      .hint-tap   { display: inline; }
    }

    /* â”€â”€ STATS ROW â”€â”€ */
    .stats-row {
      display: flex;
      align-items: center;
      flex-wrap: wrap;
      gap: 0.3rem;
      margin-top: -0.15rem;
    }

    .rank-badge {
      font-family: 'Anton', sans-serif;
      font-size: 0.75rem;
      letter-spacing: 0.06em;
      background: rgba(251,191,36,0.16);
      color: var(--live);
      padding: 0.15rem 0.5rem;
      border-radius: 5px;
      border: 1px solid rgba(251,191,36,0.22);
    }

    .rec-item {
      font-size: 0.67rem;
      color: rgba(255,255,255,0.5);
      letter-spacing: 0.05em;
      background: rgba(255,255,255,0.07);
      padding: 0.15rem 0.45rem;
      border-radius: 5px;
    }
    .rec-item.conf { color: rgba(255,255,255,0.35); background: rgba(255,255,255,0.04); }

    .opp-rank {
      font-family: 'Anton', sans-serif;
      font-size: 0.7rem;
      color: rgba(251,191,36,0.7);
      letter-spacing: 0.04em;
    }

    /* â”€â”€ BACK â”€â”€ */
    .back-header {
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      gap: 0.5rem;
      flex-wrap: wrap;
      margin-bottom: 0.1rem;
    }

    .back-title {
      font-family: 'Anton', sans-serif;
      font-size: 0.95rem;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      color: rgba(255,255,255,0.45);
    }

    .back-meta {
      display: flex;
      align-items: center;
      gap: 0.3rem;
      flex-wrap: wrap;
    }

    .back-rank {
      font-family: 'Anton', sans-serif;
      font-size: 0.72rem;
      letter-spacing: 0.06em;
      background: rgba(251,191,36,0.16);
      color: var(--live);
      padding: 0.1rem 0.38rem;
      border-radius: 4px;
      border: 1px solid rgba(251,191,36,0.22);
    }

    .back-rec {
      font-size: 0.65rem;
      color: rgba(255,255,255,0.4);
      background: rgba(255,255,255,0.06);
      padding: 0.1rem 0.38rem;
      border-radius: 4px;
    }
    .back-rec.conf { color: rgba(255,255,255,0.28); }

    .schedule-list {
      display: flex;
      flex-direction: column;
      gap: 0.42rem;
      overflow-y: auto;
      flex: 1;
    }

    .sched-row {
      display: flex;
      align-items: center;
      gap: 0.55rem;
      padding: 0.45rem 0.55rem;
      border-radius: 8px;
      background: rgba(0,0,0,0.18);
      font-size: 0.8rem;
      color: rgba(255,255,255,0.85);
    }
    .sched-row.current {
      background: rgba(255,255,255,0.09);
      outline: 1px solid rgba(255,255,255,0.13);
    }

    .sched-date {
      font-size: 0.65rem;
      color: rgba(255,255,255,0.3);
      min-width: 52px;
      letter-spacing: 0.04em;
    }

    .sched-opp {
      flex: 1;
      font-weight: 500;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .sched-result {
      font-family: 'Anton', sans-serif;
      font-size: 0.72rem;
      letter-spacing: 0.05em;
      padding: 0.08rem 0.38rem;
      border-radius: 4px;
      white-space: nowrap;
    }
    .sched-result.w    { background: rgba(74,222,128,0.14); color: var(--yes); }
    .sched-result.l    { background: rgba(248,113,113,0.14); color: var(--no); }
    .sched-result.live { background: rgba(251,191,36,0.14); color: var(--live); animation: blink 1.2s ease-in-out infinite; }
    .sched-result.upcoming { background: rgba(255,255,255,0.06); color: rgba(255,255,255,0.35); font-family: 'DM Sans', sans-serif; font-size: 0.67rem; }

    .sched-opp-rank {
      font-family: 'Anton', sans-serif;
      font-size: 0.68rem;
      color: rgba(251,191,36,0.65);
    }

    .divider { height: 1px; background: rgba(255,255,255,0.08); margin: 0.2rem 0; }

    .schedule-list::-webkit-scrollbar { width: 3px; }
    .schedule-list::-webkit-scrollbar-track { background: transparent; }
    .schedule-list::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.12); border-radius: 2px; }

    footer {
      margin-top: 2rem;
      font-size: 0.62rem;
      color: #252525;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      text-align: center;
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       TEAM SELECTOR PANEL
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .selector-wrapper {
      width: 100%;
      max-width: 1080px;
      margin-top: 2.5rem;
    }

    .selector-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 1rem;
      flex-wrap: wrap;
      gap: 0.5rem;
    }

    .selector-title {
      font-family: 'Anton', sans-serif;
      font-size: 0.95rem;
      letter-spacing: 0.15em;
      text-transform: uppercase;
      color: rgba(255,255,255,0.3);
    }

    .selector-count {
      font-size: 0.65rem;
      color: rgba(255,255,255,0.2);
      letter-spacing: 0.1em;
    }

    .clear-all-btn {
      font-size: 0.65rem;
      font-family: inherit;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: rgba(255,255,255,0.35);
      background: rgba(255,255,255,0.06);
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 6px;
      padding: 0.2rem 0.55rem;
      cursor: pointer;
      transition: all 0.15s;
    }
    .clear-all-btn:hover {
      color: rgba(255,80,80,0.9);
      background: rgba(255,60,60,0.12);
      border-color: rgba(255,60,60,0.25);
    }

    /* Search */
    .selector-search-wrap {
      position: relative;
      margin-bottom: 0.75rem;
    }
    .selector-search {
      width: 100%;
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 10px;
      color: rgba(255,255,255,0.75);
      font-family: 'DM Sans', sans-serif;
      font-size: 0.85rem;
      padding: 0.6rem 1rem 0.6rem 2.4rem;
      outline: none;
      transition: border-color 0.2s;
    }
    .selector-search::placeholder { color: rgba(255,255,255,0.2); }
    .selector-search:focus { border-color: rgba(255,255,255,0.18); }
    .search-icon {
      position: absolute;
      left: 0.8rem;
      top: 50%;
      transform: translateY(-50%);
      color: rgba(255,255,255,0.2);
      font-size: 0.85rem;
      pointer-events: none;
    }

    /* Team list */
    .team-browser {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(210px, 1fr));
      gap: 0.5rem;
      max-height: 260px;
      overflow-y: auto;
      padding: 0.1rem;
    }
    .team-browser::-webkit-scrollbar { width: 4px; }
    .team-browser::-webkit-scrollbar-track { background: transparent; }
    .team-browser::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.1); border-radius: 2px; }

    .team-option {
      display: flex;
      align-items: center;
      gap: 0.55rem;
      padding: 0.55rem 0.75rem;
      border-radius: 9px;
      background: var(--surface);
      border: 1px solid transparent;
      cursor: pointer;
      transition: background 0.15s, border-color 0.15s, opacity 0.15s;
      user-select: none;
    }
    .team-option:hover { background: var(--surface2); border-color: rgba(255,255,255,0.08); }
    .team-option.selected {
      background: rgba(255,255,255,0.06);
      border-color: rgba(255,255,255,0.15);
    }
    .team-option.disabled { opacity: 0.28; pointer-events: none; }
    .team-option.hate-option {
      background: rgba(40,20,20,0.7);
      border-color: rgba(255,50,50,0.08);
    }
    .team-option.hate-option.selected { border-color: rgba(255,50,50,0.2); }

    .option-check {
      width: 16px;
      height: 16px;
      border-radius: 4px;
      border: 1.5px solid rgba(255,255,255,0.18);
      flex-shrink: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.65rem;
      transition: background 0.15s, border-color 0.15s;
    }
    .team-option.selected .option-check {
      background: rgba(255,255,255,0.15);
      border-color: rgba(255,255,255,0.3);
    }
    .option-emoji { font-size: 1rem; flex-shrink: 0; }
    .option-info { min-width: 0; }
    .option-name {
      font-size: 0.8rem;
      font-weight: 500;
      color: rgba(255,255,255,0.8);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    .option-conf {
      font-size: 0.62rem;
      color: rgba(255,255,255,0.28);
      letter-spacing: 0.04em;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    /* Celebrity Packs */
    .celeb-section {
      margin-bottom: 1rem;
    }
    .celeb-row {
      display: flex;
      gap: 0.5rem;
      flex-wrap: wrap;
    }
    .celeb-chip {
      display: flex;
      align-items: center;
      gap: 0.45rem;
      padding: 0.35rem 0.75rem 0.35rem 0.5rem;
      border-radius: 20px;
      background: rgba(255,255,255,0.05);
      border: 1px solid rgba(255,255,255,0.1);
      cursor: pointer;
      font-size: 0.78rem;
      color: rgba(255,255,255,0.6);
      transition: all 0.15s;
      user-select: none;
    }
    .celeb-chip:hover {
      background: rgba(255,255,255,0.1);
      border-color: rgba(255,255,255,0.25);
      color: rgba(255,255,255,0.9);
      transform: translateY(-1px);
    }
    .celeb-chip:active { transform: translateY(0); }
    .celeb-avatar { font-size: 1.1rem; line-height: 1; }
    .celeb-name { font-weight: 500; letter-spacing: 0.02em; }

    /* Selected team chips (drag to reorder) */
    .selected-section {
      margin-bottom: 1rem;
    }
    .selected-label {
      font-size: 0.62rem;
      color: rgba(255,255,255,0.2);
      letter-spacing: 0.15em;
      text-transform: uppercase;
      margin-bottom: 0.5rem;
    }
    .selected-chips {
      display: flex;
      gap: 0.5rem;
      flex-wrap: wrap;
      min-height: 44px;
      align-items: flex-start;
    }
    .chip {
      display: flex;
      align-items: center;
      gap: 0.4rem;
      padding: 0.38rem 0.6rem 0.38rem 0.5rem;
      border-radius: 8px;
      background: var(--surface2);
      border: 1px solid rgba(255,255,255,0.1);
      cursor: grab;
      user-select: none;
      transition: background 0.15s, border-color 0.15s, box-shadow 0.15s;
      font-size: 0.78rem;
      color: rgba(255,255,255,0.75);
    }
    .chip:hover { background: #2c3040; border-color: rgba(255,255,255,0.18); }
    .chip.dragging {
      opacity: 0.4;
      cursor: grabbing;
    }
    .chip.drag-over {
      box-shadow: 2px 0 0 0 rgba(255,255,255,0.3);
    }
    .chip-emoji { font-size: 0.95rem; }
    .chip-name { font-size: 0.75rem; font-weight: 500; white-space: nowrap; }
    .chip-remove {
      margin-left: 0.1rem;
      width: 16px;
      height: 16px;
      border-radius: 4px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 0.7rem;
      color: rgba(255,255,255,0.3);
      transition: color 0.15s, background 0.15s;
    }
    .chip-remove:hover { color: var(--no); background: rgba(248,113,113,0.12); }
    .chip-drag-handle {
      color: rgba(255,255,255,0.18);
      font-size: 0.7rem;
      cursor: grab;
    }

    .no-results {
      grid-column: 1 / -1;
      text-align: center;
      padding: 2rem 1rem;
      color: rgba(255,255,255,0.2);
      font-size: 0.8rem;
    }

    /* Separator */
    .panel-sep {
      border: none;
      border-top: 1px solid rgba(255,255,255,0.05);
      margin: 2rem 0;
      width: 100%;
      max-width: 1080px;
    }
    /* Category pills */
    .category-row {
      display: flex;
      flex-wrap: wrap;
      gap: 0.4rem;
      margin-bottom: 0.75rem;
    }
    .cat-pill {
      display: inline-flex;
      align-items: center;
      gap: 0.3rem;
      padding: 0.3rem 0.75rem;
      border-radius: 20px;
      background: var(--surface);
      border: 1px solid rgba(255,255,255,0.08);
      color: rgba(255,255,255,0.5);
      font-size: 0.72rem;
      font-weight: 500;
      letter-spacing: 0.04em;
      cursor: pointer;
      transition: background 0.15s, border-color 0.15s, color 0.15s;
      user-select: none;
    }
    .cat-pill:hover { background: var(--surface2); color: rgba(255,255,255,0.8); border-color: rgba(255,255,255,0.15); }
    .cat-pill.active {
      background: rgba(255,255,255,0.12);
      border-color: rgba(255,255,255,0.28);
      color: #fff;
    }
    .cat-clear {
      display: inline-flex;
      align-items: center;
      padding: 0.3rem 0.65rem;
      border-radius: 20px;
      background: rgba(248,113,113,0.1);
      border: 1px solid rgba(248,113,113,0.2);
      color: rgba(248,113,113,0.7);
      font-size: 0.68rem;
      cursor: pointer;
      transition: background 0.15s, color 0.15s;
      letter-spacing: 0.04em;
    }
    .cat-clear:hover { background: rgba(248,113,113,0.18); color: var(--no); }
    .cat-active-label {
      font-size: 0.67rem;
      color: rgba(255,255,255,0.3);
      letter-spacing: 0.1em;
      margin-bottom: 0.4rem;
      display: none;
    }
    .cat-active-label.visible { display: block; }

  </style>
</head>
<body>

<header>
  <h1>Did We <em>Win?</em></h1>
  <p class="subtitle">Men's Basketball Â· Live Scores</p>
  <p class="refresh-info">Auto-refreshes every 60s Â· updated: <span id="last-updated">â€”</span><button id="refresh-btn" onclick="manualRefresh()">â†» now</button></p>
</header>

<div class="grid" id="grid">
  <div class="empty-state">
    <div class="empty-icon">ğŸ€</div>
    <p>Select your favorite teams below to get started</p>
  </div>
</div>

<hr class="panel-sep">

<div class="selector-wrapper">
  <div class="selector-header">
    <span class="selector-title">Your Teams</span>
    <span class="selector-count" id="sel-count">0 / 6 selected Â· drag chips to reorder</span>
    <button class="clear-all-btn" id="clear-all-btn" onclick="clearAllTeams()" style="display:none">Clear all</button>
  </div>

  <!-- Selected chips -->
  <div class="selected-section">
    <div class="selected-label">Selected (drag to reorder)</div>
    <div class="selected-chips" id="selected-chips"></div>
  </div>

  <!-- Celebrity Packs -->
  <div class="celeb-section">
    <div class="selected-label">Load a celebrity's picks</div>
    <div class="celeb-row" id="celeb-row"></div>
  </div>

  <!-- Category pills -->
  <div class="category-row" id="category-row"></div>
  <div class="cat-active-label" id="cat-active-label"></div>

  <!-- Search + browser -->
  <div class="selector-search-wrap">
    <span class="search-icon">ğŸ”</span>
    <input class="selector-search" id="team-search" type="text" placeholder="Search teamsâ€¦" autocomplete="off" />
  </div>
  <div class="team-browser" id="team-browser"></div>
</div>

<footer>Data via ESPN Â· hover or tap a card to see the full schedule</footer>

<script>
// â”€â”€â”€ TEAM METADATA OVERLAY â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// IDs come entirely from ESPN's API at boot â€” we NEVER hardcode them.
// This map provides display overrides, emojis, vibes, and search aliases,
// keyed by ESPN's canonical "location" string (what ESPN uses as the school name).
//
// 'Duke' â†’ display:'Dook' means: ESPN tells us the team is "Duke" (id=150),
// and we override the display name in our UI to "Dook".

const TEAM_META = {
  // â”€â”€ ACC â”€â”€
  'Boston College':   { emoji: 'ğŸ¦…' },
  'California':       { display: 'Cal',          short: 'Cal',        emoji: 'ğŸ»' },
  'Clemson':          { emoji: 'ğŸ…' },
  'Duke':             { display: 'Dook',          short: 'Dook',       emoji: 'ğŸ¤®', vibe: 'hate', aliases: ['duke','d00k','dook'] },
  'Florida State':    { emoji: 'ğŸ¹' },
  'Georgia Tech':     { emoji: 'ğŸ' },
  'Louisville':       { emoji: 'ğŸƒ' },
  'Miami':            { emoji: 'ğŸŒŠ' },
  'North Carolina':   { emoji: 'ğŸ’™' },
  'NC State':         { emoji: 'ğŸº' },
  'Notre Dame':       { emoji: 'â˜˜ï¸' },
  'Pittsburgh':       { short: 'Pitt',            emoji: 'ğŸ¾' },
  'SMU':              { emoji: 'ğŸ´' },
  'Stanford':         { emoji: 'ğŸŒ²' },
  'Syracuse':         { emoji: 'ğŸŠ' },
  'Virginia':         { emoji: 'ğŸŸ ' },
  'Virginia Tech':    { emoji: 'ğŸ¦ƒ' },
  'Wake Forest':      { emoji: 'ğŸ˜ˆ' },

  // â”€â”€ Big Ten â”€â”€
  'Illinois':         { emoji: 'ğŸ¦£' },
  'Indiana':          { emoji: 'â›°ï¸' },
  'Iowa':             { emoji: 'ğŸ»' },
  'Maryland':         { emoji: 'ğŸ¢' },
  'Michigan':         { emoji: 'ã€½ï¸' },
  'Michigan State':   { emoji: 'ğŸ’š' },
  'Minnesota':        { emoji: 'ğŸ¿ï¸' },
  'Nebraska':         { emoji: 'ğŸŒ½' },
  'Northwestern':     { emoji: 'ğŸ±' },
  'Ohio State':       { emoji: 'ğŸŒ°' },
  'Oregon':           { emoji: 'ğŸ¦†' },
  'Penn State':       { emoji: 'ğŸ¦' },
  'Purdue':           { emoji: 'ğŸš‚' },
  'Rutgers':          { emoji: 'ğŸ¦•' },
  'UCLA':             { emoji: 'ğŸ»' },
  'USC':              { emoji: 'âœŒï¸' },
  'Washington':       { emoji: 'ğŸ•' },
  'Wisconsin':        { emoji: 'ğŸ¦¡' },

  // â”€â”€ Big 12 â”€â”€
  'Arizona':          { emoji: 'ğŸ»' },
  'Arizona State':    { emoji: 'ğŸ˜ˆ' },
  'Baylor':           { emoji: 'ğŸ»' },
  'BYU':              { emoji: 'ğŸ¦' },
  'Cincinnati':       { emoji: 'ğŸ»' },
  'Colorado':         { emoji: 'ğŸ¦¬' },
  'Houston':          { emoji: 'ğŸ¾' },
  'Iowa State':       { emoji: 'ğŸŒªï¸' },
  'Kansas':           { emoji: 'ğŸ¦' },
  'Kansas State':     { short: 'K-State',         emoji: 'ğŸ¾' },
  'Oklahoma State':   { short: 'Okla State',       emoji: 'ğŸ¤ ' },
  'TCU':              { emoji: 'ğŸ¸' },
  'Texas':            { emoji: 'ğŸ¤˜' },
  'Texas Tech':       { emoji: 'ğŸ”´' },
  'UCF':              { emoji: 'âš”ï¸' },
  'Utah':             { emoji: 'ğŸ¦…' },
  'West Virginia':    { emoji: 'â›°ï¸' },

  // â”€â”€ SEC â”€â”€
  'Alabama':          { emoji: 'ğŸ˜' },
  'Arkansas':         { emoji: 'ğŸ—' },
  'Auburn':           { emoji: 'ğŸ¯' },
  'Florida':          { emoji: 'ğŸŠ' },
  'Georgia':          { emoji: 'ğŸ¾' },
  'Kentucky':         { emoji: 'ğŸ±' },
  'LSU':              { emoji: 'ğŸ¯' },
  'Mississippi':      { display: 'Ole Miss',       short: 'Ole Miss',   emoji: 'ğŸ»' },
  'Mississippi State':{ short: 'Miss State',       emoji: 'ğŸ¶' },
  'Missouri':         { emoji: 'ğŸ¯' },
  'Oklahoma':         { emoji: 'ğŸ¹' },
  'South Carolina':   { short: 'South Car',        emoji: 'ğŸ“' },
  'Tennessee':        { emoji: 'ğŸŠ' },
  'Texas A&M':        { emoji: 'ğŸ¶' },
  'Vanderbilt':       { emoji: 'â­' },

  // â”€â”€ Big East â”€â”€
  'Butler':           { emoji: 'ğŸ¶' },
  'Connecticut':      { display: 'UConn',          short: 'UConn',      emoji: 'ğŸ•' },
  'Creighton':        { emoji: 'ğŸ”µ' },
  'DePaul':           { emoji: 'ğŸ’™' },
  'Georgetown':       { emoji: 'ğŸº' },
  'Marquette':        { emoji: 'ğŸ¦…' },
  'Providence':       { emoji: 'ğŸ”¥' },
  'Seton Hall':       { emoji: 'ğŸ”µ' },
  "St. John's":       { emoji: 'ğŸ”´' },
  'Villanova':        { emoji: 'ğŸ±' },
  'Xavier':           { emoji: 'ğŸ‰' },

  // â”€â”€ Atlantic 10 â”€â”€
  'Dayton':           { emoji: 'ğŸ”´' },
  'Davidson':         { emoji: 'ğŸ¾' },
  'Duquesne':         { emoji: 'ğŸ¦…' },
  'Fordham':          { emoji: 'ğŸ' },
  'George Mason':     { short: 'G. Mason',         emoji: 'ğŸŸ¢' },
  'George Washington':{ short: 'GW',               emoji: 'ğŸ’' },
  'La Salle':         { emoji: 'ğŸ’™' },
  'Loyola Chicago':   { short: 'Loyola Chi',       emoji: 'âš“' },
  'Massachusetts':    { display: 'UMass',           short: 'UMass',      emoji: 'ğŸ”µ' },
  'Rhode Island':     { emoji: 'ğŸ' },
  'Richmond':         { emoji: 'ğŸ•·ï¸' },
  'Saint Louis':      { emoji: 'âšœï¸' },
  "Saint Joseph's":   { short: "St. Joe's",        emoji: 'ğŸ¦…' },
  'St. Bonaventure':  { short: 'St Bonav',         emoji: 'ğŸŸ¤' },
  'VCU':              { emoji: 'ğŸ' },

  // â”€â”€ WCC â”€â”€
  'Gonzaga':          { emoji: 'ğŸ¶' },
  'Loyola Marymount': { short: 'LMU',              emoji: 'ğŸ¦' },
  'Pacific':          { emoji: 'ğŸ¯' },
  'Pepperdine':       { emoji: 'ğŸŒŠ' },
  'Portland':         { emoji: 'ğŸŒ¹' },
  "Saint Mary's":     { short: "St Mary's",        emoji: 'âš“' },
  'San Diego':        { emoji: 'âš“' },
  'San Francisco':    { short: 'USF',              emoji: 'ğŸŒ‰' },
  'Santa Clara':      { emoji: 'ğŸŒ¹' },

  // â”€â”€ Mountain West â”€â”€
  'Air Force':        { emoji: 'âœˆï¸' },
  'Boise State':      { emoji: 'ğŸ”µ' },
  'Colorado State':   { short: 'Colorado St',      emoji: 'ğŸ' },
  'Fresno State':     { emoji: 'ğŸ•' },
  'Nevada':           { emoji: 'âš¡' },
  'New Mexico':       { emoji: 'ğŸˆ' },
  'San Diego State':  { short: 'SDSU',             emoji: 'ğŸ¦…' },
  'UNLV':             { emoji: 'ğŸ²' },
  'Utah State':       { emoji: 'ğŸ´' },
  'Wyoming':          { emoji: 'ğŸ¤ ' },

  // â”€â”€ American Athletic â”€â”€
  'Charlotte':        { emoji: 'ğŸ‰' },
  'East Carolina':    { short: 'ECU',              emoji: 'ğŸ´â€â˜ ï¸' },
  'Florida Atlantic': { short: 'FAU',              emoji: 'ğŸ¦‰' },
  'Louisiana Tech':   { short: 'LA Tech',          emoji: 'ğŸ”µ' },
  'Memphis':          { emoji: 'ğŸ¸' },
  'Middle Tennessee': { short: 'MTSU',             emoji: 'ğŸ”µ' },
  'North Texas':      { emoji: 'ğŸ¦…' },
  'Rice':             { emoji: 'ğŸ¦‰' },
  'South Florida':    { short: 'USF',              emoji: 'ğŸ‚' },
  'Temple':           { emoji: 'ğŸ¦‰' },
  'Tulane':           { emoji: 'ğŸŒŠ' },
  'Tulsa':            { emoji: 'ğŸŒªï¸' },
  'UAB':              { emoji: 'ğŸ‰' },
  'UTEP':             { emoji: 'ğŸŒµ' },
  'UTSA':             { emoji: 'ğŸ¦' },
  'Western Kentucky': { short: 'WKU',              emoji: 'ğŸ”´' },
  'Wichita State':    { emoji: 'ğŸŒ¾' },
  'FIU':              { emoji: 'ğŸ¾' },

  // â”€â”€ Missouri Valley â”€â”€
  'Bradley':          { emoji: 'ğŸ¹' },
  'Drake':            { emoji: 'ğŸ¶' },
  'Evansville':       { emoji: 'ğŸŸ£' },
  'Illinois State':   { short: 'Illinois St',      emoji: 'ğŸ”´' },
  'Indiana State':    { emoji: 'ğŸŒ²' },
  'Missouri State':   { short: 'Missouri St',      emoji: 'ğŸ»' },
  'Murray State':     { emoji: 'ğŸ‡' },
  'Northern Iowa':    { emoji: 'ğŸ¾' },
  'Southern Illinois':{ short: 'SIU',              emoji: 'ğŸ¾' },
  'Valparaiso':       { short: 'Valpo',            emoji: 'ğŸ°' },
  'Belmont':          { emoji: 'ğŸ”µ' },

  // â”€â”€ Mid-American â”€â”€
  'Akron':            { emoji: 'ğŸ¦˜' },
  'Ball State':       { emoji: 'ğŸ”´' },
  'Bowling Green':    { short: 'BGSU',             emoji: 'ğŸŸ ' },
  'Buffalo':          { emoji: 'ğŸ¦¬' },
  'Central Michigan': { short: 'Central Mich',     emoji: 'ğŸ”¥' },
  'Eastern Michigan': { short: 'Eastern Mich',     emoji: 'ğŸ¦…' },
  'Kent State':       { emoji: 'ğŸ¦…' },
  'Miami (OH)':       { short: 'Miami OH',         emoji: 'ğŸ”´' },
  'Northern Illinois':{ short: 'N Illinois',       emoji: 'ğŸ”´' },
  'Ohio':             { emoji: 'ğŸŸ¢' },
  'Toledo':           { emoji: 'ğŸŸ¡' },
  'Western Michigan': { short: 'Western Mich',     emoji: 'ğŸ¤™' },

  // â”€â”€ Sun Belt â”€â”€
  'Appalachian State':{ short: 'App State',        emoji: 'â›°ï¸' },
  'Arkansas State':   { short: 'Ark State',        emoji: 'ğŸº' },
  'Coastal Carolina': { short: 'Coastal Car',      emoji: 'âš“' },
  'Georgia State':    { emoji: 'ğŸ”µ' },
  'James Madison':    { short: 'JMU',              emoji: 'ğŸŸ£' },
  'Louisiana':        { emoji: 'âšœï¸' },
  'Louisiana Monroe': { short: 'ULM',              emoji: 'ğŸ”´' },
  'Marshall':         { emoji: 'ğŸ”¢' },
  'Old Dominion':     { emoji: 'ğŸ¦' },
  'South Alabama':    { emoji: 'ğŸ¦¬' },
  'Texas State':      { emoji: 'ğŸ±' },
  'Troy':             { emoji: 'ğŸ´' },
  'Arkansas-Little Rock':{ short: 'UALR',          emoji: 'ğŸ”´' },
  'Southern Miss':    { emoji: 'ğŸ¦…' },

  // â”€â”€ ASUN â”€â”€
  'Bellarmine':       { emoji: 'ğŸ”µ' },
  'Eastern Kentucky': { short: 'Eastern KY',       emoji: 'ğŸ¦…' },
  'Florida Gulf Coast':{ short: 'FGCU',            emoji: 'ğŸ¦…' },
  'Jacksonville':     { emoji: 'ğŸ¬' },
  'Kennesaw State':   { short: 'KSU',              emoji: 'ğŸ¦‰' },
  'Liberty':          { emoji: 'ğŸ”¥' },
  'Lipscomb':         { emoji: 'ğŸ¦¬' },
  'North Alabama':    { emoji: 'ğŸ¦' },
  'North Florida':    { emoji: 'ğŸŠ' },
  'Queens':           { emoji: 'ğŸ‘‘' },
  'Jacksonville State':{ short: 'Jax State',       emoji: 'ğŸ“' },

  // â”€â”€ CAA â”€â”€
  'Campbell':         { emoji: 'ğŸª' },
  'Charleston':       { emoji: 'âš“' },
  'Delaware':         { emoji: 'ğŸ’™' },
  'Drexel':           { emoji: 'ğŸ‰' },
  'Elon':             { emoji: 'ğŸ•Šï¸' },
  'Hampton':          { emoji: 'ğŸ¾' },
  'Hofstra':          { emoji: 'ğŸ¦' },
  'Monmouth':         { emoji: 'ğŸ¦…' },
  'NC A&T':           { emoji: 'ğŸŠ' },
  'Northeastern':     { emoji: 'ğŸ¾' },
  'Stony Brook':      { emoji: 'ğŸº' },
  'Towson':           { emoji: 'ğŸ¯' },
  'UNC Wilmington':   { short: 'UNCW',             emoji: 'ğŸŒŠ' },
  'William & Mary':   { short: 'W&M',              emoji: 'ğŸ‘‘' },

  // â”€â”€ Patriot â”€â”€
  'American':         { emoji: 'ğŸ¦…' },
  'Army':             { emoji: 'ğŸ–ï¸' },
  'Boston University':{ short: 'BU',               emoji: 'ğŸ¾' },
  'Bucknell':         { emoji: 'ğŸ¦¬' },
  'Colgate':          { emoji: 'ğŸŸ¥' },
  'Holy Cross':       { emoji: 'âœï¸' },
  'Lafayette':        { emoji: 'ğŸ¦' },
  'Lehigh':           { emoji: 'ğŸŸ¤' },
  'Loyola Maryland':  { short: 'Loyola MD',        emoji: 'ğŸ•' },
  'Navy':             { emoji: 'âš“' },

  // â”€â”€ Ivy League â”€â”€
  'Columbia':         { emoji: 'ğŸ¦' },
  'Cornell':          { emoji: 'ğŸ»' },
  'Dartmouth':        { emoji: 'ğŸ’š' },
  'Harvard':          { emoji: 'ğŸ“š' },
  'Penn':             { emoji: 'ğŸ”´' },
  'Princeton':        { emoji: 'ğŸ¯' },
  'Yale':             { emoji: 'ğŸ¶' },

  // â”€â”€ Southern â”€â”€
  'East Tennessee State':{ short: 'ETSU',          emoji: 'ğŸ¦¬' },
  'Furman':           { emoji: 'ğŸŸ£' },
  'Mercer':           { emoji: 'ğŸ»' },
  'Samford':          { emoji: 'ğŸ¶' },
  'The Citadel':      { emoji: 'âš”ï¸' },
  'VMI':              { emoji: 'âš”ï¸' },
  'Western Carolina': { short: 'Western Car',      emoji: 'ğŸ±' },
  'Wofford':          { emoji: 'ğŸ•' },
  'UNC Greensboro':   { emoji: 'ğŸŒ€' },

  // â”€â”€ Horizon â”€â”€
  'Cleveland State':  { short: 'Cleveland St',     emoji: 'âš”ï¸' },
  'Detroit Mercy':    { short: 'Detroit',          emoji: 'âš™ï¸' },
  'IUPUI':            { emoji: 'ğŸ”µ' },
  'Milwaukee':        { emoji: 'ğŸ¦…' },
  'Northern Kentucky':{ short: 'NKU',              emoji: 'ğŸ¹' },
  'Oakland':          { emoji: 'ğŸ¦Œ' },
  'Purdue Fort Wayne':{ short: 'Purdue FW',        emoji: 'ğŸ”µ' },
  'Robert Morris':    { emoji: 'ğŸ¦…' },
  'Wright State':     { emoji: 'ğŸ¦…' },
  'Youngstown State': { short: 'Youngstown',       emoji: 'ğŸ§' },
  'UIC':              { emoji: 'ğŸ”µ' },

  // â”€â”€ MAAC â”€â”€
  'Canisius':         { emoji: 'ğŸ¦…' },
  'Fairfield':        { emoji: 'ğŸ¦Œ' },
  'Iona':             { emoji: 'ğŸ°' },
  'Manhattan':        { emoji: 'ğŸ—½' },
  'Marist':           { emoji: 'ğŸ¦Š' },
  'Niagara':          { emoji: 'ğŸ’§' },
  'Quinnipiac':       { emoji: 'ğŸ»' },
  'Rider':            { emoji: 'ğŸ¦…' },
  "Saint Peter's":    { short: "St Peter's",       emoji: 'ğŸ¦š' },
  'Siena':            { emoji: 'ğŸŸ¢' },

  // â”€â”€ Big Sky â”€â”€
  'Eastern Washington':{ short: 'E Washington',    emoji: 'ğŸ¦…' },
  'Gardner-Webb':     { emoji: 'ğŸ”µ' },
  'High Point':       { emoji: 'ğŸ”µ' },
  'Idaho':            { emoji: 'ğŸ¥”' },
  'Idaho State':      { emoji: 'ğŸ»' },
  'Longwood':         { emoji: 'ğŸŒ²' },
  'Montana':          { emoji: 'â›°ï¸' },
  'Montana State':    { short: 'Montana St',       emoji: 'ğŸ±' },
  'Northern Arizona': { short: 'N Arizona',        emoji: 'ğŸº' },
  'Northern Colorado':{ short: 'N Colorado',       emoji: 'ğŸ»' },
  'Portland State':   { short: 'Portland St',      emoji: 'ğŸŒ²' },
  'Radford':          { emoji: 'ğŸ”µ' },
  'Sacramento State': { short: 'Sac State',        emoji: 'ğŸ' },
  'Southern Utah':    { emoji: 'ğŸ¦¦' },
  'UNC Asheville':    { emoji: 'ğŸ”µ' },
  'Weber State':      { emoji: 'ğŸ' },
  'Winthrop':         { emoji: 'ğŸ¦…' },

  // â”€â”€ Big West â”€â”€
  'Cal Poly':         { emoji: 'ğŸ´' },
  'Cal State Bakersfield':{ short: 'CSUB',         emoji: 'ğŸ•' },
  'Cal State Fullerton':{ short: 'CS Fullerton',   emoji: 'ğŸ˜' },
  'Cal State Northridge':{ short: 'CSUN',          emoji: 'ğŸ”ï¸' },
  'Hawaii':           { short: 'HawaiÊ»i',          emoji: 'ğŸŒº' },
  'Long Beach State': { short: 'Long Beach',       emoji: 'ğŸŒŠ' },
  'UC Davis':         { emoji: 'ğŸ„' },
  'UC Irvine':        { emoji: 'ğŸœ' },
  'UC Riverside':     { emoji: 'ğŸ»' },
  'UC San Diego':     { emoji: 'ğŸŒŠ' },
  'UC Santa Barbara': { short: 'UCSB',             emoji: 'ğŸ„' },

  // â”€â”€ WAC â”€â”€
  'Grand Canyon':     { short: 'GCU',              emoji: 'ğŸœï¸' },
  'Incarnate Word':   { short: 'UIW',              emoji: 'âšœï¸' },
  'Lamar':            { emoji: 'ğŸ”´' },
  'New Mexico State': { short: 'NMSU',             emoji: 'ğŸŒµ' },
  'Sam Houston':      { emoji: 'ğŸ¤ ' },
  'Seattle':          { emoji: 'â˜•' },
  'Stephen F. Austin':{ short: 'SFA',              emoji: 'ğŸŒ²' },
  'Tarleton State':   { short: 'Tarleton',         emoji: 'ğŸ¤ ' },
  'Texas A&M-Corpus Christi':{ short: 'TAMUCC',   emoji: 'ğŸŒŠ' },
  'UT Arlington':     { emoji: 'ğŸ¤ ' },
  'Utah Tech':        { emoji: 'ğŸŒµ' },
  'Utah Valley':      { emoji: 'ğŸ¦…' },

  // â”€â”€ Ohio Valley â”€â”€
  'Eastern Illinois': { short: 'E Illinois',       emoji: 'ğŸ¾' },
  'Morehead State':   { short: 'Morehead St',      emoji: 'ğŸ¦…' },
  'SIU Edwardsville': { short: 'SIUe',             emoji: 'ğŸŸ ' },
  'Southeast Missouri State':{ short: 'SEMO',      emoji: 'ğŸŸ¡' },
  'Southern Indiana': { emoji: 'ğŸ¦…' },
  'Tennessee Martin': { short: 'UT Martin',        emoji: 'ğŸŒ€' },
  'Tennessee State':  { short: 'Tenn State',       emoji: 'ğŸ¯' },
  'Tennessee Tech':   { short: 'Tenn Tech',        emoji: 'ğŸ¦…' },

  // â”€â”€ Summit â”€â”€
  'Denver':           { emoji: 'â›·ï¸' },
  'North Dakota State':{ short: 'NDSU',            emoji: 'ğŸ¦¬' },
  'Omaha':            { emoji: 'ğŸŒ¾' },
  'Oral Roberts':     { emoji: 'ğŸ¦…' },
  'South Dakota State':{ short: 'S Dak St',        emoji: 'ğŸ°' },
  'St. Thomas':       { short: 'St Thomas',        emoji: 'ğŸ¦…' },
  'Western Illinois': { emoji: 'ğŸ¹' },

  // â”€â”€ America East â”€â”€
  'Albany':           { emoji: 'ğŸº' },
  'Bryant':           { emoji: 'ğŸ¶' },
  'Maine':            { emoji: 'ğŸ¦' },
  'New Hampshire':    { emoji: 'ğŸŒ²' },
  'NJIT':             { emoji: 'ğŸ”µ' },
  'UMass Lowell':     { emoji: 'ğŸ”µ' },
  'UMBC':             { emoji: 'ğŸ•' },
  'Vermont':          { emoji: 'ğŸ' },

  // â”€â”€ NEC â”€â”€
  'Central Connecticut':{ short: 'Cent Conn',      emoji: 'ğŸ”µ' },
  'LIU':              { emoji: 'ğŸ¦' },
  'Merrimack':        { emoji: 'ğŸŸ¡' },
  'Sacred Heart':     { emoji: 'ğŸ¤' },
  'Saint Francis':    { short: 'St Francis',       emoji: 'ğŸŸ¦' },
  'Wagner':           { emoji: 'ğŸ¦…' },

  // â”€â”€ SWAC â”€â”€
  'Alcorn State':     { short: 'Alcorn St',        emoji: 'ğŸ' },
  'Arkansas-Pine Bluff':{ short: 'UAPB',           emoji: 'ğŸ¦' },
  'Bethune-Cookman':  { short: 'B-Cookman',        emoji: 'ğŸ¾' },
  'Florida A&M':      { short: 'FAMU',             emoji: 'ğŸ' },
  'Grambling':        { emoji: 'ğŸ¯' },
  'Grambling State':  { short: 'Grambling',        emoji: 'ğŸ¯' },
  'Houston Christian':{ short: 'HCU',              emoji: 'ğŸ' },
  'Jackson State':    { short: 'Jackson St',       emoji: 'ğŸ¯' },
  'Mississippi Valley State':{ short: 'Miss Valley',emoji: 'ğŸ¶' },
  'Prairie View A&M': { short: 'PV A&M',           emoji: 'ğŸ¾' },
  'Southern':         { emoji: 'ğŸ¾' },
  'Texas Southern':   { emoji: 'ğŸ¯' },

  // â”€â”€ MEAC â”€â”€
  'Coppin State':     { short: 'Coppin St',        emoji: 'ğŸ¦…' },
  'Delaware State':   { short: 'Delaware St',      emoji: 'ğŸ‰' },
  'Howard':           { emoji: 'ğŸ¦¬' },
  'Maryland Eastern Shore':{ short: 'UMES',        emoji: 'ğŸ¦…' },
  'Morgan State':     { emoji: 'ğŸ»' },
  'Norfolk State':    { short: 'Norfolk St',       emoji: 'ğŸ¯' },
  'North Carolina Central':{ short: 'NCCU',        emoji: 'ğŸ¦…' },
  'South Carolina State':{ short: 'SC State',      emoji: 'ğŸ' },

  // â”€â”€ Misc â”€â”€
  'McNeese':          { emoji: 'ğŸ¤ ' },
  'Nicholls':         { emoji: 'ğŸŠ' },
  'Southeastern Louisiana':{ short: 'SE La',       emoji: 'ğŸ¦…' },
  'North Carolina A&T':{ short: 'NC A&T',          emoji: 'ğŸŠ' },
};

const DEFAULT_EMOJI = 'ğŸ€';

// â”€â”€â”€ TEAM LIST â€” built entirely from ESPN's API at boot â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// Use var (not let/const) so it's accessible from Chrome devtools console
var TEAM_LIST = [];
var selectedTeams = [];

// Build TEAM_LIST from ESPN's canonical teams endpoint.
// IDs are NEVER hardcoded â€” they come directly from ESPN.
// ESPN conference group IDs for men's college basketball (2025-26 season)
// Fetching by conference gives us accurate conf membership + team IDs in one shot.
// â”€â”€â”€ VERIFIED TEAM DATABASE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// ESPN IDs verified directly from ESPN's API. Conf assignments are authoritative.
// To add a team: find its ESPN ID from espn.com/mens-college-basketball/team/_/id/XXX
const TEAMS_DB = [
  // ACC
  { id:'103', loc:'Boston College',   conf:'ACC' },
  { id:'234', loc:'California',       conf:'ACC' },
  { id:'228', loc:'Clemson',          conf:'ACC' },
  { id:'150', loc:'Duke',             conf:'ACC' },
  { id:'65',  loc:'Florida State',    conf:'ACC' },
  { id:'61',  loc:'Georgia Tech',     conf:'ACC' },
  { id:'97',  loc:'Louisville',       conf:'ACC' },
  { id:'87',  loc:'Miami',            conf:'ACC' },
  { id:'153', loc:'North Carolina',   conf:'ACC' },
  { id:'152', loc:'NC State',         conf:'ACC' },
  { id:'59',  loc:'Notre Dame',       conf:'ACC' },
  { id:'221', loc:'Pittsburgh',       conf:'ACC' },
  { id:'21',  loc:'SMU',             conf:'ACC' },
  { id:'2641',loc:'Stanford',         conf:'ACC' },
  { id:'183', loc:'Syracuse',         conf:'ACC' },
  { id:'2765',loc:'Virginia',         conf:'ACC' },
  { id:'2766',loc:'Virginia Tech',    conf:'ACC' },
  { id:'276', loc:'Wake Forest',      conf:'ACC' },
  // Big Ten
  { id:'356', loc:'Illinois',         conf:'B10' },
  { id:'360', loc:'Indiana',          conf:'B10' },
  { id:'2439',loc:'Iowa',             conf:'B10' },  // ESPN uses 2439 not 366
  { id:'269', loc:'Maryland',         conf:'B10' },
  { id:'130', loc:'Michigan',         conf:'B10' },
  { id:'127', loc:'Michigan State',   conf:'B10' },
  { id:'135', loc:'Minnesota',        conf:'B10' },
  { id:'158', loc:'Nebraska',         conf:'B10' },
  { id:'147', loc:'Northwestern',     conf:'B10' },
  { id:'194', loc:'Ohio State',       conf:'B10' },
  { id:'2483',loc:'Oregon',           conf:'B10' },  // joined B10 2024
  { id:'213', loc:'Penn State',       conf:'B10' },
  { id:'2509',loc:'Purdue',           conf:'B10' },
  { id:'164', loc:'Rutgers',          conf:'B10' },
  { id:'26',  loc:'UCLA',             conf:'B10' },
  { id:'30',  loc:'USC',              conf:'B10' },
  { id:'264', loc:'Washington',       conf:'B10' },
  { id:'275', loc:'Wisconsin',        conf:'B10' },
  // Big 12
  { id:'12',  loc:'Arizona',          conf:'B12' },
  { id:'9',   loc:'Arizona State',    conf:'B12' },
  { id:'239', loc:'Baylor',           conf:'B12' },
  { id:'252', loc:'BYU',              conf:'B12' },
  { id:'2132',loc:'Cincinnati',       conf:'B12' },
  { id:'38',  loc:'Colorado',         conf:'B12' },
  { id:'248', loc:'Houston',          conf:'B12' },
  { id:'66',  loc:'Iowa State',       conf:'B12' },
  { id:'2305',loc:'Kansas',           conf:'B12' },
  { id:'2411',loc:'Kansas State',     conf:'B12' },
  { id:'201', loc:'Oklahoma State',   conf:'B12' },
  { id:'2628',loc:'TCU',              conf:'B12' },
  { id:'251', loc:'Texas',            conf:'B12' },
  { id:'2649',loc:'Texas Tech',       conf:'B12' },
  { id:'2116',loc:'UCF',              conf:'B12' },
  { id:'254', loc:'Utah',             conf:'B12' },
  { id:'277', loc:'West Virginia',    conf:'B12' },
  // SEC
  { id:'333', loc:'Alabama',          conf:'SEC' },
  { id:'8',   loc:'Arkansas',         conf:'SEC' },
  { id:'2',   loc:'Auburn',           conf:'SEC' },
  { id:'57',  loc:'Florida',          conf:'SEC' },
  { id:'61',  loc:'Georgia',          conf:'SEC' },
  { id:'96',  loc:'Kentucky',         conf:'SEC' },
  { id:'99',  loc:'LSU',              conf:'SEC' },
  { id:'145', loc:'Mississippi',      conf:'SEC' },
  { id:'344', loc:'Mississippi State',conf:'SEC' },
  { id:'142', loc:'Missouri',         conf:'SEC' },
  { id:'201', loc:'Oklahoma',         conf:'SEC' },
  { id:'2579',loc:'South Carolina',   conf:'SEC' },
  { id:'2633',loc:'Tennessee',        conf:'SEC' },
  { id:'245', loc:'Texas A&M',        conf:'SEC' },
  { id:'238', loc:'Vanderbilt',       conf:'SEC' },
  // Big East
  { id:'2350',loc:'Butler',           conf:'BE' },
  { id:'41',  loc:'Connecticut',      conf:'BE' },
  { id:'156', loc:'Creighton',        conf:'BE' },
  { id:'305', loc:'DePaul',           conf:'BE' },
  { id:'43',  loc:'Georgetown',       conf:'BE' },
  { id:'269', loc:'Marquette',        conf:'BE' },
  { id:'2507',loc:'Providence',       conf:'BE' },
  { id:'2550',loc:'Seton Hall',       conf:'BE' },
  { id:'2599',loc:"St. John's",       conf:'BE' },
  { id:'222', loc:'Villanova',        conf:'BE' },
  { id:'2752',loc:'Xavier',           conf:'BE' },
  // Atlantic 10
  { id:'2305',loc:'Dayton',           conf:'A10' },
  { id:'2166',loc:'Davidson',         conf:'A10' },
  { id:'2210',loc:'Duquesne',         conf:'A10' },
  { id:'2581',loc:'Fordham',          conf:'A10' },
  { id:'2193',loc:'George Mason',     conf:'A10' },
  { id:'2567',loc:'George Washington',conf:'A10' },
  { id:'2350',loc:'La Salle',         conf:'A10' },
  { id:'2430',loc:'Loyola Chicago',   conf:'A10' },
  { id:'113', loc:'Massachusetts',    conf:'A10' },
  { id:'227', loc:'Rhode Island',     conf:'A10' },
  { id:'257', loc:'Richmond',         conf:'A10' },
  { id:'139', loc:'Saint Louis',      conf:'A10' },
  { id:'2510',loc:"Saint Joseph's",   conf:'A10' },
  { id:'179', loc:'St. Bonaventure',  conf:'A10' },
  { id:'2670',loc:'VCU',              conf:'A10' },
  // WCC
  { id:'2309',loc:'Gonzaga',          conf:'WCC' },
  { id:'2436',loc:'Loyola Marymount', conf:'WCC' },
  { id:'2511',loc:'Pacific',          conf:'WCC' },
  { id:'2535',loc:'Pepperdine',       conf:'WCC' },
  { id:'2530',loc:'Portland',         conf:'WCC' },
  { id:'2562',loc:"Saint Mary's",     conf:'WCC' },
  { id:'301', loc:'San Diego',        conf:'WCC' },
  { id:'239', loc:'San Francisco',    conf:'WCC' },
  { id:'2580',loc:'Santa Clara',      conf:'WCC' },
  // Mountain West
  { id:'2',   loc:'Air Force',        conf:'MW' },
  { id:'68',  loc:'Boise State',      conf:'MW' },
  { id:'36',  loc:'Colorado State',   conf:'MW' },
  { id:'278', loc:'Fresno State',     conf:'MW' },
  { id:'2450',loc:'Nevada',           conf:'MW' },
  { id:'167', loc:'New Mexico',       conf:'MW' },
  { id:'21',  loc:'San Diego State',  conf:'MW' },
  { id:'2439',loc:'UNLV',             conf:'MW' },
  { id:'2724',loc:'Utah State',       conf:'MW' },
  { id:'2751',loc:'Wyoming',          conf:'MW' },
  // American Athletic
  { id:'2429',loc:'Charlotte',        conf:'AAC' },
  { id:'151', loc:'East Carolina',    conf:'AAC' },
  { id:'2754',loc:'Florida Atlantic', conf:'AAC' },
  { id:'2335',loc:'Louisiana Tech',   conf:'AAC' },
  { id:'235', loc:'Memphis',          conf:'AAC' },
  { id:'2471',loc:'Middle Tennessee', conf:'AAC' },
  { id:'2459',loc:'North Texas',      conf:'AAC' },
  { id:'242', loc:'Rice',             conf:'AAC' },
  { id:'58',  loc:'South Florida',    conf:'AAC' },
  { id:'218', loc:'Temple',           conf:'AAC' },
  { id:'2534',loc:'Tulane',           conf:'AAC' },
  { id:'202', loc:'Tulsa',            conf:'AAC' },
  { id:'2242',loc:'UAB',              conf:'AAC' },
  { id:'2638',loc:'UTEP',             conf:'AAC' },
  { id:'2640',loc:'UTSA',             conf:'AAC' },
  { id:'98',  loc:'Western Kentucky', conf:'AAC' },
  { id:'2724',loc:'Wichita State',    conf:'AAC' },
  { id:'2296',loc:'FIU',              conf:'AAC' },
  // Missouri Valley
  { id:'71',  loc:'Bradley',          conf:'MVC' },
  { id:'2181',loc:'Drake',            conf:'MVC' },
  { id:'339', loc:'Evansville',       conf:'MVC' },
  { id:'2575',loc:'Illinois State',   conf:'MVC' },
  { id:'2363',loc:'Indiana State',    conf:'MVC' },
  { id:'2583',loc:'Missouri State',   conf:'MVC' },
  { id:'2382',loc:'Murray State',     conf:'MVC' },
  { id:'2459',loc:'Northern Iowa',    conf:'MVC' },
  { id:'79',  loc:'Southern Illinois',conf:'MVC' },
  { id:'2724',loc:'Valparaiso',       conf:'MVC' },
  { id:'2057',loc:'Belmont',          conf:'MVC' },
  // Mid-American
  { id:'2006',loc:'Akron',            conf:'MAC' },
  { id:'2050',loc:'Ball State',       conf:'MAC' },
  { id:'189', loc:'Bowling Green',    conf:'MAC' },
  { id:'2', loc:'Buffalo',            conf:'MAC' },
  { id:'2115',loc:'Central Michigan', conf:'MAC' },
  { id:'2199',loc:'Eastern Michigan', conf:'MAC' },
  { id:'2390',loc:'Kent State',       conf:'MAC' },
  { id:'193', loc:'Miami (OH)',        conf:'MAC' },
  { id:'2468',loc:'Northern Illinois',conf:'MAC' },
  { id:'307', loc:'Ohio',             conf:'MAC' },
  { id:'2710',loc:'Toledo',           conf:'MAC' },
  { id:'2724',loc:'Western Michigan', conf:'MAC' },
  // Sun Belt
  { id:'2026',loc:'Appalachian State',conf:'SBC' },
  { id:'2032',loc:'Arkansas State',   conf:'SBC' },
  { id:'324', loc:'Coastal Carolina', conf:'SBC' },
  { id:'290', loc:'Georgia State',    conf:'SBC' },
  { id:'338', loc:'James Madison',    conf:'SBC' },
  { id:'2429',loc:'Louisiana',        conf:'SBC' },
  { id:'2433',loc:'Louisiana Monroe', conf:'SBC' },
  { id:'2655',loc:'Marshall',         conf:'SBC' },
  { id:'295', loc:'Old Dominion',     conf:'SBC' },
  { id:'6',   loc:'South Alabama',    conf:'SBC' },
  { id:'326', loc:'Texas State',      conf:'SBC' },
  { id:'314', loc:'Troy',             conf:'SBC' },
  { id:'2429',loc:'Arkansas-Little Rock',conf:'SBC' },
  { id:'2572',loc:'Southern Miss',    conf:'SBC' },
  // ASUN
  { id:'2057',loc:'Bellarmine',       conf:'ASUN' },
  { id:'2253',loc:'Eastern Kentucky', conf:'ASUN' },
  { id:'277', loc:'Florida Gulf Coast',conf:'ASUN' },
  { id:'368', loc:'Jacksonville',     conf:'ASUN' },
  { id:'2414',loc:'Kennesaw State',   conf:'ASUN' },
  { id:'2335',loc:'Liberty',          conf:'ASUN' },
  { id:'2421',loc:'Lipscomb',         conf:'ASUN' },
  { id:'2650',loc:'North Alabama',    conf:'ASUN' },
  { id:'2459',loc:'North Florida',    conf:'ASUN' },
  { id:'2543',loc:'Queens',           conf:'ASUN' },
  { id:'55',  loc:'Jacksonville State',conf:'ASUN' },
  // CAA
  { id:'2429',loc:'Campbell',         conf:'CAA' },
  { id:'2168',loc:'Charleston',       conf:'CAA' },
  { id:'48',  loc:'Delaware',         conf:'CAA' },
  { id:'2211',loc:'Drexel',           conf:'CAA' },
  { id:'2233',loc:'Elon',             conf:'CAA' },
  { id:'2335',loc:'Hampton',          conf:'CAA' },
  { id:'2357',loc:'Hofstra',          conf:'CAA' },
  { id:'2579',loc:'Monmouth',         conf:'CAA' },
  { id:'2450',loc:'NC A&T',           conf:'CAA' },
  { id:'2633',loc:'Northeastern',     conf:'CAA' },
  { id:'2636',loc:'Stony Brook',      conf:'CAA' },
  { id:'2116',loc:'Towson',           conf:'CAA' },
  { id:'2743',loc:'UNC Wilmington',   conf:'CAA' },
  { id:'2750',loc:'William & Mary',   conf:'CAA' },
  // Patriot
  { id:'90',  loc:'American',         conf:'Pat' },
  { id:'349', loc:'Army',             conf:'Pat' },
  { id:'104', loc:'Boston University',conf:'Pat' },
  { id:'2083',loc:'Bucknell',         conf:'Pat' },
  { id:'2116',loc:'Colgate',          conf:'Pat' },
  { id:'107', loc:'Holy Cross',       conf:'Pat' },
  { id:'2389',loc:'Lafayette',        conf:'Pat' },
  { id:'2394',loc:'Lehigh',           conf:'Pat' },
  { id:'2401',loc:'Loyola Maryland',  conf:'Pat' },
  { id:'2649',loc:'Navy',             conf:'Pat' },
  // Ivy League
  { id:'171', loc:'Columbia',         conf:'Ivy' },
  { id:'172', loc:'Cornell',          conf:'Ivy' },
  { id:'159', loc:'Dartmouth',        conf:'Ivy' },
  { id:'108', loc:'Harvard',          conf:'Ivy' },
  { id:'219', loc:'Penn',             conf:'Ivy' },
  { id:'163', loc:'Princeton',        conf:'Ivy' },
  { id:'41',  loc:'Yale',             conf:'Ivy' },
  // Southern
  { id:'2213',loc:'East Tennessee State',conf:'SoCon' },
  { id:'290', loc:'Furman',           conf:'SoCon' },
  { id:'2406',loc:'Mercer',           conf:'SoCon' },
  { id:'2560',loc:'Samford',          conf:'SoCon' },
  { id:'2875',loc:'The Citadel',      conf:'SoCon' },
  { id:'2757',loc:'VMI',              conf:'SoCon' },
  { id:'2764',loc:'Western Carolina', conf:'SoCon' },
  { id:'2755',loc:'Wofford',          conf:'SoCon' },
  { id:'2742',loc:'UNC Greensboro',   conf:'SoCon' },
  // Horizon
  { id:'325', loc:'Cleveland State',  conf:'HL' },
  { id:'2197',loc:'Detroit Mercy',    conf:'HL' },
  { id:'70',  loc:'IUPUI',            conf:'HL' },
  { id:'2571',loc:'Milwaukee',        conf:'HL' },
  { id:'2467',loc:'Northern Kentucky',conf:'HL' },
  { id:'2473',loc:'Oakland',          conf:'HL' },
  { id:'2543',loc:'Purdue Fort Wayne',conf:'HL' },
  { id:'2547',loc:'Robert Morris',    conf:'HL' },
  { id:'2771',loc:'Wright State',     conf:'HL' },
  { id:'2773',loc:'Youngstown State', conf:'HL' },
  { id:'292', loc:'UIC',              conf:'HL' },
  // MAAC
  { id:'2117',loc:'Canisius',         conf:'MAAC' },
  { id:'278', loc:'Fairfield',        conf:'MAAC' },
  { id:'2373',loc:'Iona',             conf:'MAAC' },
  { id:'2394',loc:'Manhattan',        conf:'MAAC' },
  { id:'2396',loc:'Marist',           conf:'MAAC' },
  { id:'2648',loc:'Niagara',          conf:'MAAC' },
  { id:'2545',loc:'Quinnipiac',       conf:'MAAC' },
  { id:'2549',loc:'Rider',            conf:'MAAC' },
  { id:'2561',loc:"Saint Peter's",    conf:'MAAC' },
  { id:'2596',loc:'Siena',            conf:'MAAC' },
  // Big Sky
  { id:'2254',loc:'Eastern Washington',conf:'BSky' },
  { id:'304', loc:'Gardner-Webb',     conf:'BSky' },
  { id:'2350',loc:'High Point',       conf:'BSky' },
  { id:'70',  loc:'Idaho',            conf:'BSky' },
  { id:'2430',loc:'Idaho State',      conf:'BSky' },
  { id:'2403',loc:'Longwood',         conf:'BSky' },
  { id:'2400',loc:'Montana',          conf:'BSky' },
  { id:'2585',loc:'Montana State',    conf:'BSky' },
  { id:'2464',loc:'Northern Arizona', conf:'BSky' },
  { id:'2466',loc:'Northern Colorado',conf:'BSky' },
  { id:'2533',loc:'Portland State',   conf:'BSky' },
  { id:'2544',loc:'Radford',          conf:'BSky' },
  { id:'2556',loc:'Sacramento State', conf:'BSky' },
  { id:'2628',loc:'Southern Utah',    conf:'BSky' },
  { id:'2740',loc:'UNC Asheville',    conf:'BSky' },
  { id:'2724',loc:'Weber State',      conf:'BSky' },
  { id:'2769',loc:'Winthrop',         conf:'BSky' },
  // Big West
  { id:'2117',loc:'Cal Poly',         conf:'BW' },
  { id:'2066',loc:'Cal State Bakersfield',conf:'BW' },
  { id:'2118',loc:'Cal State Fullerton',conf:'BW' },
  { id:'2119',loc:'Cal State Northridge',conf:'BW' },
  { id:'84',  loc:'Hawaii',           conf:'BW' },
  { id:'2413',loc:'Long Beach State', conf:'BW' },
  { id:'302', loc:'UC Davis',         conf:'BW' },
  { id:'2724',loc:'UC Irvine',        conf:'BW' },
  { id:'2725',loc:'UC Riverside',     conf:'BW' },
  { id:'2727',loc:'UC San Diego',     conf:'BW' },
  { id:'2728',loc:'UC Santa Barbara', conf:'BW' },
  // WAC
  { id:'2317',loc:'Grand Canyon',     conf:'WAC' },
  { id:'2372',loc:'Incarnate Word',   conf:'WAC' },
  { id:'2433',loc:'Lamar',            conf:'WAC' },
  { id:'2377',loc:'New Mexico State', conf:'WAC' },
  { id:'2564',loc:'Sam Houston',      conf:'WAC' },
  { id:'2575',loc:'Seattle',          conf:'WAC' },
  { id:'2614',loc:'Stephen F. Austin',conf:'WAC' },
  { id:'2657',loc:'Tarleton State',   conf:'WAC' },
  { id:'2664',loc:'Texas A&M-Corpus Christi',conf:'WAC' },
  { id:'2737',loc:'UT Arlington',     conf:'WAC' },
  { id:'2756',loc:'Utah Tech',        conf:'WAC' },
  { id:'2752',loc:'Utah Valley',      conf:'WAC' },
  // Ohio Valley
  { id:'2006',loc:'Eastern Illinois', conf:'OVC' },
  { id:'2590',loc:'Morehead State',   conf:'OVC' },
  { id:'2615',loc:'SIU Edwardsville', conf:'OVC' },
  { id:'2621',loc:'Southeast Missouri State',conf:'OVC' },
  { id:'2613',loc:'Southern Indiana', conf:'OVC' },
  { id:'2662',loc:'Tennessee Martin', conf:'OVC' },
  { id:'2659',loc:'Tennessee State',  conf:'OVC' },
  { id:'2661',loc:'Tennessee Tech',   conf:'OVC' },
  // Summit
  { id:'2185',loc:'Denver',           conf:'Sum' },
  { id:'2459',loc:'North Dakota State',conf:'Sum' },
  { id:'2490',loc:'Omaha',            conf:'Sum' },
  { id:'2427',loc:'Oral Roberts',     conf:'Sum' },
  { id:'2618',loc:'South Dakota State',conf:'Sum' },
  { id:'2617',loc:'St. Thomas',       conf:'Sum' },
  { id:'2767',loc:'Western Illinois', conf:'Sum' },
  // America East
  { id:'399', loc:'Albany',           conf:'AE' },
  { id:'2', loc:'Bryant',             conf:'AE' },
  { id:'2390',loc:'Maine',            conf:'AE' },
  { id:'2635',loc:'New Hampshire',    conf:'AE' },
  { id:'2634',loc:'NJIT',             conf:'AE' },
  { id:'2655',loc:'UMass Lowell',     conf:'AE' },
  { id:'2395',loc:'UMBC',             conf:'AE' },
  { id:'261', loc:'Vermont',          conf:'AE' },
  // NEC
  { id:'2132',loc:'Central Connecticut',conf:'NEC' },
  { id:'2401',loc:'LIU',              conf:'NEC' },
  { id:'2407',loc:'Merrimack',        conf:'NEC' },
  { id:'2557',loc:'Sacred Heart',     conf:'NEC' },
  { id:'2558',loc:'Saint Francis',    conf:'NEC' },
  { id:'2763',loc:'Wagner',           conf:'NEC' },
  // SWAC
  { id:'2332',loc:'Alcorn State',     conf:'SWAC' },
  { id:'2006',loc:'Arkansas-Pine Bluff',conf:'SWAC' },
  { id:'2066',loc:'Bethune-Cookman',  conf:'SWAC' },
  { id:'275', loc:'Florida A&M',      conf:'SWAC' },
  { id:'2315',loc:'Grambling State',  conf:'SWAC' },
  { id:'2361',loc:'Houston Christian',conf:'SWAC' },
  { id:'2378',loc:'Jackson State',    conf:'SWAC' },
  { id:'2578',loc:'Mississippi Valley State',conf:'SWAC' },
  { id:'2534',loc:'Prairie View A&M', conf:'SWAC' },
  { id:'2610',loc:'Southern',         conf:'SWAC' },
  { id:'2667',loc:'Texas Southern',   conf:'SWAC' },
  // MEAC
  { id:'2132',loc:'Coppin State',     conf:'MEAC' },
  { id:'2180',loc:'Delaware State',   conf:'MEAC' },
  { id:'47',  loc:'Howard',           conf:'MEAC' },
  { id:'2394',loc:'Maryland Eastern Shore',conf:'MEAC' },
  { id:'2582',loc:'Morgan State',     conf:'MEAC' },
  { id:'2653',loc:'Norfolk State',    conf:'MEAC' },
  { id:'2452',loc:'North Carolina Central',conf:'MEAC' },
  { id:'2609',loc:'South Carolina State',conf:'MEAC' },
  // Big South
  { id:'2429',loc:'Campbell',         conf:'BSouth' },
  { id:'2350',loc:'High Point',       conf:'BSouth' },
  { id:'2403',loc:'Longwood',         conf:'BSouth' },
  { id:'2335',loc:'Presbyterian',     conf:'BSouth' },
  { id:'2544',loc:'Radford',          conf:'BSouth' },
  { id:'2769',loc:'Winthrop',         conf:'BSouth' },
  { id:'2740',loc:'UNC Asheville',    conf:'BSouth' },
  // Southland
  { id:'115', loc:'McNeese',          conf:'SLC' },
  { id:'2644',loc:'Nicholls',         conf:'SLC' },
  { id:'2608',loc:'Southeastern Louisiana',conf:'SLC' },
  { id:'2450',loc:'North Carolina A&T',conf:'SLC' },
  { id:'2006',loc:'Lamar',            conf:'SLC' },
  { id:'2564',loc:'Houston Christian',conf:'SLC' },
];

// Conf display info
const CONF_INFO = {
  'ACC':    { full: 'Atlantic Coast',        id: '2'    },
  'B10':    { full: 'Big Ten',               id: '4'    },
  'B12':    { full: 'Big 12',               id: '12'   },
  'SEC':    { full: 'Southeastern',          id: '8'    },
  'BE':     { full: 'Big East',             id: '22'   },
  'A10':    { full: 'Atlantic 10',          id: '3'    },
  'WCC':    { full: 'West Coast',           id: '26'   },
  'MW':     { full: 'Mountain West',        id: '18'   },
  'MVC':    { full: 'Missouri Valley',      id: '24'   },
  'MAC':    { full: 'Mid-American',         id: '14'   },
  'AAC':    { full: 'American Athletic',    id: '151'  },
  'SBC':    { full: 'Sun Belt',             id: '37'   },
  'ASUN':   { full: 'Atlantic Sun',         id: '46'   },
  'CAA':    { full: 'Colonial Athletic',    id: '47'   },
  'Pat':    { full: 'Patriot',             id: '48'   },
  'Ivy':    { full: 'Ivy League',           id: '49'   },
  'SoCon':  { full: 'Southern',            id: '29'   },
  'HL':     { full: 'Horizon',             id: '45'   },
  'MAAC':   { full: 'Metro Atlantic',       id: '73'   },
  'BSky':   { full: 'Big Sky',             id: '40'   },
  'BW':     { full: 'Big West',            id: '172'  },
  'WAC':    { full: 'Western Athletic',    id: '32'   },
  'OVC':    { full: 'Ohio Valley',         id: '19'   },
  'Sum':    { full: 'Summit',              id: '23'   },
  'AE':     { full: 'America East',        id: '173'  },
  'NEC':    { full: 'Northeast',           id: '2590' },
  'SWAC':   { full: 'Southwestern Athletic',id: '79'  },
  'MEAC':   { full: 'Mid-Eastern Athletic', id: '55'  },
  'BSouth': { full: 'Big South',           id: '60'   },
  'SLC':    { full: 'Southland',           id: '62'   },
};

async function buildTeamListFromESPN() {
  // Build TEAM_LIST from hardcoded TEAMS_DB (verified IDs + confs),
  // then verify/supplement IDs against ESPN's API in the background.
  const seen = new Set();
  const list = [];

  for (const entry of TEAMS_DB) {
    if (seen.has(entry.loc)) continue;
    seen.add(entry.loc);

    const meta = TEAM_META[entry.loc] || {};
    const conf = CONF_INFO[entry.conf] || { full: entry.conf, id: '' };
    const display = meta.display || entry.loc;

    list.push({
      id:       entry.id,
      display,
      short:    meta.short || display,
      emoji:    meta.emoji || DEFAULT_EMOJI,
      conf:     entry.conf,
      confFull: conf.full,
      confId:   conf.id,
      vibe:     meta.vibe || 'love',
      aliases:  meta.aliases || [],
      _espnLocation: entry.loc,
    });
  }

  list.sort((a, b) => a.display.localeCompare(b.display));
  TEAM_LIST = list;
  window.TEAM_LIST = TEAM_LIST;

  const confCounts = {};
  list.forEach(t => confCounts[t.conf] = (confCounts[t.conf]||0)+1);
  console.log(`âœ… TEAM_LIST: ${list.length} teams`, confCounts);

  // Background: verify IDs from ESPN and fix any that are wrong
  verifyIdsFromESPN();
}

// Verify our hardcoded IDs against ESPN's live data and fix mismatches silently
async function verifyIdsFromESPN() {
  try {
    const r = await fetch(
      'https://site.api.espn.com/apis/site/v2/sports/basketball/mens-college-basketball/teams?limit=700',
      { cache: 'no-store' }
    );
    if (!r.ok) return;
    const data = await r.json();
    const espnTeams = data.sports?.[0]?.leagues?.[0]?.teams?.map(t => t.team) || [];
    const byLocation = new Map(espnTeams.map(t => [t.location?.toLowerCase(), t.id]));

    let fixes = 0;
    for (const team of TEAM_LIST) {
      const espnId = byLocation.get(team._espnLocation?.toLowerCase());
      if (espnId && String(espnId) !== String(team.id)) {
        console.log(`ID fix: ${team.display} ${team.id} â†’ ${espnId}`);
        team.id = String(espnId);
        fixes++;
      }
    }
    if (fixes > 0) console.log(`Fixed ${fixes} team IDs from ESPN`);
  } catch(e) {}
}


// Build conference filter categories from live TEAM_LIST
function buildConferenceCategories() {
  const seen = new Map();
  for (const t of TEAM_LIST) {
    if (t.conf && t.conf !== 'â€”' && !seen.has(t.conf)) seen.set(t.conf, t.conf);
  }
  return Array.from(seen.keys())
    .sort((a, b) => a.localeCompare(b))
    .map(c => ({ id: c, label: c }));
}

// â”€â”€â”€ CELEBRITY PACKS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const CELEB_PACKS = [
  {
    name: 'MJ', fullName: 'Michael Jordan', avatar: 'ğŸ',
    teams: ['North Carolina', 'Illinois', 'NC State', 'Marquette', 'Georgetown', 'Kansas'],
  },
  {
    name: 'LeBron', fullName: 'LeBron James', avatar: 'ğŸ‘‘',
    // 'UConn' resolves via display override; 'Dook' via alias on Duke's entry
    teams: ['Ohio State', 'Kentucky', 'Akron', 'UCLA', 'Michigan', 'Dook'],
  },
  {
    name: 'Brady', fullName: 'Tom Brady', avatar: 'ğŸˆ',
    teams: ['Michigan', 'Michigan State', 'UCLA', 'Notre Dame', 'Stanford', 'UConn'],
  },
  {
    name: 'Obama', fullName: 'Barack Obama', avatar: 'ğŸ‡ºğŸ‡¸',
    teams: ['Illinois', 'Kansas', 'North Carolina', 'Oregon', 'Harvard', 'Michigan State'],
  },
  {
    name: 'Barkley', fullName: 'Charles Barkley', avatar: 'ğŸ‘',
    teams: ['Auburn', 'Alabama', 'LSU', 'Gonzaga', 'Kansas', 'Kentucky'],
  },
];

function findTeamByName(name) {
  const lower = name.toLowerCase();
  return TEAM_LIST.find(t =>
    t.display === name ||
    t.display.toLowerCase() === lower ||
    t._espnLocation?.toLowerCase() === lower ||
    t.aliases.includes(lower)
  );
}

function loadCelebPack(pack) {
  const resolved = pack.teams.map(findTeamByName).filter(Boolean).slice(0, 6);
  selectedTeams = resolved;
  saveSaved(selectedTeams);
  renderSelector();
  loadAll();
}

function renderCelebRow() {
  const row = document.getElementById('celeb-row');
  row.innerHTML = CELEB_PACKS.map(pack => `
    <div class="celeb-chip" onclick="loadCelebPack(CELEB_PACKS.find(p=>p.name==='${pack.name}'))"
         title="${pack.fullName}'s picks">
      <span class="celeb-avatar">${pack.avatar}</span>
      <span class="celeb-name">${pack.name}</span>
    </div>`).join('');
}

// â”€â”€â”€ AP RANKINGS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
let cachedTop25Ids = null;

async function fetchTop25Ids() {
  if (cachedTop25Ids) return cachedTop25Ids;
  try {
    const r = await fetch(
      'https://site.api.espn.com/apis/site/v2/sports/basketball/mens-college-basketball/rankings',
      { cache: 'no-store' }
    );
    if (!r.ok) throw new Error(`HTTP ${r.status}`);
    const data = await r.json();
    const ap = (data.rankings || []).find(p =>
      p.type === 'ap' || (p.name || '').includes('AP')
    ) || data.rankings?.[0];
    if (!ap?.ranks?.length) throw new Error('No ranks found');
    cachedTop25Ids = ap.ranks
      .sort((a, b) => a.current - b.current)
      .map(rk => String(rk.team?.id))
      .filter(Boolean);
    return cachedTop25Ids;
  } catch(e) {
    console.warn('Rankings fetch failed:', e);
    return null;
  }
}

// â”€â”€â”€ STATE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// v3 key â€” avoids loading corrupt old hardcoded-ID data
const STORAGE_KEY = 'dww_selected_teams_v3';

function loadSavedNames() {
  try {
    const raw = localStorage.getItem(STORAGE_KEY);
    return raw ? JSON.parse(raw) : [];
  } catch { return []; }
}

function resolveFromSaved(names) {
  return names.map(name => TEAM_LIST.find(t => t.display === name)).filter(Boolean);
}

function saveSaved(teams) {
  try { localStorage.setItem(STORAGE_KEY, JSON.stringify(teams.map(t => t.display))); } catch {}
}

// selectedTeams declared above as var

// â”€â”€â”€ UTILS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const fmtTime = d => new Date(d).toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit', timeZone: 'America/New_York' }) + ' ET';
const fmtDateShort = d => new Date(d).toLocaleDateString('en-US', { month: 'short', day: 'numeric', timeZone: 'America/New_York' });

function smartDate(dateStr) {
  const now   = new Date();
  const game  = new Date(dateStr);
  const etNow  = new Date(now.toLocaleString('en-US',  { timeZone: 'America/New_York' }));
  const etGame = new Date(game.toLocaleString('en-US', { timeZone: 'America/New_York' }));
  const diffDays = Math.round((new Date(etGame).setHours(0,0,0,0) - new Date(etNow).setHours(0,0,0,0)) / 86400000);
  const gameHour = new Date(game.toLocaleString('en-US', { timeZone: 'America/New_York' })).getHours();
  const eve = gameHour >= 19;
  if (diffDays === 0)  return eve ? 'Tonight' : 'Today';
  if (diffDays === 1)  return eve ? 'Tomorrow night' : 'Tomorrow';
  if (diffDays === -1) return eve ? 'Last night' : 'Yesterday';
  if (diffDays === 2)  return 'In 2 days';
  return fmtDateShort(dateStr);
}

function teamMatches(c, teamId) {
  return c.team?.id === teamId || c.team?.id === String(teamId) ||
         c.id === teamId || c.id === String(teamId);
}
function getMe(comp, teamId)  { return comp.competitors?.find(c => teamMatches(c, teamId)); }
function getOpp(comp, teamId) { return comp.competitors?.find(c => !teamMatches(c, teamId)); }

function extractScore(c) {
  if (!c) return '?';
  const s = c.score;
  if (s == null) return '?';
  if (typeof s === 'object') return s.displayValue ?? s.value ?? '?';
  return s;
}

function periodLabel(comp) {
  const s = comp.status;
  if (!s) return '';
  const p = s.period || 0;
  const half = p === 1 ? '1st Half' : p === 2 ? '2nd Half' : 'OT';
  const clock = s.displayClock;
  return (clock && clock !== '0:00') ? `${half} Â· ${clock}` : half;
}

// â”€â”€â”€ FETCH â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
async function fetchTeam(team) {
  const [schedRes, summaryRes] = await Promise.all([
    fetch(`https://site.api.espn.com/apis/site/v2/sports/basketball/mens-college-basketball/teams/${team.id}/schedule`, { cache: 'no-store' }),
    fetch(`https://site.api.espn.com/apis/site/v2/sports/basketball/mens-college-basketball/teams/${team.id}`, { cache: 'no-store' }),
  ]);
  if (!schedRes.ok) throw new Error(`HTTP ${schedRes.status}`);
  const data        = await schedRes.json();
  const summaryData = summaryRes.ok ? await summaryRes.json() : null;

  const events = (data.events || []).sort((a, b) => new Date(a.date) - new Date(b.date));

  let lastCompleted = null, liveGame = null, nextGame = null;
  const allGames = [];

  for (const ev of events) {
    const comp = ev.competitions?.[0];
    if (!comp) continue;
    const state = comp.status?.type?.state;
    allGames.push({ ev, comp, state });
    if      (state === 'post')               lastCompleted = { ev, comp };
    else if (state === 'in')                 liveGame      = { ev, comp };
    else if (state === 'pre' && !nextGame)   nextGame      = { ev, comp };
  }

  const teamInfo  = summaryData?.team || data.team || {};
  const recItems  = teamInfo?.record?.items || data.team?.record?.items || [];
  const totalRec  = recItems.find(r => r.type === 'total') || recItems[0];
  const recordStr = totalRec?.summary || '';

  let confRecordStr = '';
  try {
    if (team.confId) {
      const confRes = await fetch(
        `https://sports.core.api.espn.com/v2/sports/basketball/leagues/mens-college-basketball/seasons/2026/types/2/groups/${team.confId}/teams/${team.id}/records/9`,
        { cache: 'no-store' }
      );
      if (confRes.ok) {
        const confData = await confRes.json();
        confRecordStr = confData.summary || confData.displayValue || '';
      }
    }
  } catch(e) {
    confRecordStr = data.team?.standingSummary || '';
  }

  let apRank = null;
  const top25 = cachedTop25Ids || [];
  const rankIdx = top25.indexOf(String(team.id));
  if (rankIdx !== -1) apRank = rankIdx + 1;

  if (liveGame) {
    try {
      const liveRes = await fetch(
        `https://site.api.espn.com/apis/site/v2/sports/basketball/mens-college-basketball/summary?event=${liveGame.ev.id}`,
        { cache: 'no-store' }
      );
      if (liveRes.ok) {
        const liveData = await liveRes.json();
        const liveComp = liveData.header?.competitions?.[0];
        if (liveComp) liveGame.comp = liveComp;
      }
    } catch(e) {}
  }

  return { team, lastCompleted, liveGame, nextGame, allGames, recordStr, confRecordStr, apRank };
}

function getOppRank(comp, teamId) {
  const opp = getOpp(comp, teamId);
  if (!opp) return null;
  const oppId = String(opp.team?.id || opp.id || '');
  if (!oppId || !cachedTop25Ids) return null;
  const idx = cachedTop25Ids.indexOf(oppId);
  return idx !== -1 ? idx + 1 : null;
}

// â”€â”€â”€ CARD THEMES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const LOVE_THEMES = [
  { bg: 'linear-gradient(145deg, #1a3a6b 0%, #2355a0 55%, #3470c8 100%)', shadow: 'rgba(35,85,160,0.4)' },
  { bg: 'linear-gradient(145deg, #1a5c2e 0%, #237a3d 55%, #2e9e50 100%)', shadow: 'rgba(35,122,61,0.4)' },
  { bg: 'linear-gradient(145deg, #6b1a1a 0%, #a02323 55%, #c83434 100%)', shadow: 'rgba(160,35,35,0.4)' },
  { bg: 'linear-gradient(145deg, #4a1a6b 0%, #6c23a0 55%, #8a34c8 100%)', shadow: 'rgba(108,35,160,0.4)' },
  { bg: 'linear-gradient(145deg, #1a4a5c 0%, #237a8e 55%, #2e9eb8 100%)', shadow: 'rgba(35,122,142,0.4)' },
  { bg: 'linear-gradient(145deg, #5c3d1a 0%, #8e6123 55%, #b87c2e 100%)', shadow: 'rgba(142,97,35,0.4)' },
];

function getCardTheme(team, idx) {
  if (team.vibe === 'hate') return { cls: 'hate-card', style: '' };
  const theme = LOVE_THEMES[idx % LOVE_THEMES.length];
  return { cls: 'love-card', style: `--card-bg:${theme.bg};--card-shadow:${theme.shadow};` };
}

// â”€â”€â”€ RENDER FRONT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderFront({ team, lastCompleted, liveGame, nextGame, recordStr, confRecordStr, apRank }) {
  const tid = team.id;
  const isDook = team.display === 'Dook';
  const isHate = team.vibe === 'hate';

  let answerHTML = '', liveDetailsHTML = '';

  if (liveGame) {
    const me  = getMe(liveGame.comp, tid);
    const opp = getOpp(liveGame.comp, tid);
    const myS  = extractScore(me), oppS = extractScore(opp);
    const oppName = opp?.team?.shortDisplayName || opp?.team?.displayName || 'Opp';
    const oppRank = getOppRank(liveGame.comp, tid);
    const atStr  = me?.homeAway === 'home' ? 'vs' : '@';
    const rankBit = oppRank ? ` <span class="opp-rank">#${oppRank}</span>` : '';
    const myScoreN = parseInt(myS) || 0, oppScoreN = parseInt(oppS) || 0;
    const winBit = (myScoreN > 0 || oppScoreN > 0)
      ? (myScoreN > oppScoreN ? ' <span class="winning-tag">â–² Winning</span>'
       : myScoreN < oppScoreN ? ' <span class="winning-tag losing">â–¼ Losing</span>'
       : ' <span class="winning-tag tied">Tied</span>') : '';
    answerHTML      = `<div class="answer live">LIVE</div>`;
    liveDetailsHTML = `
      <div class="live-details">${myS} â€“ ${oppS} Â· ${periodLabel(liveGame.comp)}${winBit}</div>
      <div class="live-opponent">${atStr}${rankBit} <strong>${oppName}</strong></div>`;
  } else if (lastCompleted) {
    const me  = getMe(lastCompleted.comp, tid);
    const won = me?.winner === true;
    const yesEmoji = isDook ? 'ğŸ¤¢' : isHate ? 'ğŸ˜’' : 'ğŸ‰';
    const noEmoji  = isDook ? 'ğŸ‰ğŸŠğŸ™Œ' : isHate ? 'ğŸ˜‚' : 'ğŸ˜¬';
    answerHTML = `<div class="answer ${won ? 'yes' : 'no'}">${won ? 'YES ' + yesEmoji : 'NO ' + noEmoji}</div>`;
  } else {
    answerHTML = `<div class="answer tbd">â€”</div>`;
  }

  const rankHTML = apRank ? `<span class="rank-badge">#${apRank} AP</span>` : '';
  const recParts = [];
  if (recordStr)     recParts.push(`<span class="rec-item">${recordStr} overall</span>`);
  if (confRecordStr) recParts.push(`<span class="rec-item conf">${confRecordStr}</span>`);
  const statsHTML = (rankHTML || recParts.length) ? `<div class="stats-row">${rankHTML}${recParts.join('')}</div>` : '';

  let lastGameHTML = '';
  if (lastCompleted) {
    const { ev, comp } = lastCompleted;
    const me  = getMe(comp, tid), opp = getOpp(comp, tid);
    const won = me?.winner === true;
    const myS = extractScore(me), oppS = extractScore(opp);
    const oppName = opp?.team?.shortDisplayName || opp?.team?.displayName || 'Opp';
    const oppRank = getOppRank(comp, tid);
    const atStr = me?.homeAway === 'home' ? 'vs' : '@';
    const when  = smartDate(ev.date);
    lastGameHTML = `
      <div class="front-game">
        <div class="front-game-label">Last game</div>
        <div class="front-game-line">
          ${when} Â· ${atStr}${oppRank ? ` <span class="opp-rank">#${oppRank}</span>` : ''} <strong>${oppName}</strong>
          <span class="front-badge ${won ? 'w' : 'l'}">${won ? 'W' : 'L'} ${myS}â€“${oppS}</span>
        </div>
      </div>`;
  }

  let nextGameHTML = '';
  if (nextGame) {
    const { ev, comp } = nextGame;
    const me  = getMe(comp, tid), opp = getOpp(comp, tid);
    const oppName = opp?.team?.shortDisplayName || opp?.team?.displayName || 'Opp';
    const oppRank = getOppRank(comp, tid);
    const atStr = me?.homeAway === 'home' ? 'vs' : '@';
    const when  = smartDate(ev.date);
    const time  = fmtTime(ev.date);
    nextGameHTML = `
      <div class="front-game">
        <div class="front-game-label">Next game</div>
        <div class="front-game-line">
          ${when} Â· ${atStr}${oppRank ? ` <span class="opp-rank">#${oppRank}</span>` : ''} <strong>${oppName}</strong>
          <span class="front-badge up">${time}</span>
        </div>
      </div>`;
  }

  const tagText = isDook ? 'ğŸ¤® absolute garbage' : isHate ? 'ğŸ—‘ï¸ boo' : null;
  const tagClass = isHate ? 'hate-tag' : 'love-tag';

  return `
    <div class="team-header">
      <span class="team-emoji">${team.emoji}</span>
      <div class="team-name-row"><span class="team-name">${team.display}</span></div>
      ${tagText ? `<div class="team-tag-row"><span class="${tagClass}">${tagText}</span></div>` : ''}
      <div class="team-sub">${team.conf} Â· ${team.short}</div>
    </div>
    ${answerHTML}
    ${liveDetailsHTML}
    ${statsHTML}
    ${lastGameHTML}
    ${nextGameHTML}
    <div class="hint"><span class="hint-hover">hover</span><span class="hint-tap">tap</span> for schedule â†—</div>
  `;
}

// â”€â”€â”€ RENDER BACK â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderBack({ team, allGames, liveGame, apRank, recordStr, confRecordStr }) {
  const tid = team.id;
  const completed = allGames.filter(g => g.state === 'post').slice(-5);
  const live      = allGames.filter(g => g.state === 'in');
  const upcoming  = allGames.filter(g => g.state === 'pre').slice(0, 5);

  const completedRows = completed.map(({ ev, comp }) => {
    const me  = getMe(comp, tid), opp = getOpp(comp, tid);
    const oppName = opp?.team?.shortDisplayName || opp?.team?.displayName || 'Opp';
    const oppRank = getOppRank(comp, tid);
    const atStr = me?.homeAway === 'home' ? 'vs' : '@';
    const won   = me?.winner === true;
    const myS = extractScore(me), oppS = extractScore(opp);
    const when  = smartDate(ev.date);
    const rStr  = oppRank ? `<span class="sched-opp-rank">#${oppRank}</span> ` : '';
    return `<div class="sched-row">
      <span class="sched-date">${when}</span>
      <span class="sched-opp">${atStr} ${rStr}${oppName}</span>
      <span class="sched-result ${won ? 'w' : 'l'}">${won ? 'W' : 'L'} ${myS}â€“${oppS}</span>
    </div>`;
  }).join('');

  const liveRows = live.map(({ ev, comp: rawComp }) => {
    const comp = (liveGame && liveGame.ev.id === ev.id) ? liveGame.comp : rawComp;
    const me  = getMe(comp, tid), opp = getOpp(comp, tid);
    const oppName = opp?.team?.shortDisplayName || opp?.team?.displayName || 'Opp';
    const oppRank = getOppRank(comp, tid);
    const atStr = me?.homeAway === 'home' ? 'vs' : '@';
    const myS = extractScore(me), oppS = extractScore(opp);
    const rStr  = oppRank ? `<span class="sched-opp-rank">#${oppRank}</span> ` : '';
    return `<div class="sched-row current">
      <span class="sched-date">Now</span>
      <span class="sched-opp">${atStr} ${rStr}${oppName}</span>
      <span class="sched-result live">LIVE ${myS}â€“${oppS} Â· ${periodLabel(comp)}</span>
    </div>`;
  }).join('');

  const upcomingRows = upcoming.map(({ ev, comp }, i) => {
    const me  = getMe(comp, tid), opp = getOpp(comp, tid);
    const oppName = opp?.team?.shortDisplayName || opp?.team?.displayName || 'Opp';
    const oppRank = getOppRank(comp, tid);
    const atStr  = me?.homeAway === 'home' ? 'vs' : '@';
    const isNext = i === 0 && !live.length;
    const when   = smartDate(ev.date);
    const time   = fmtTime(ev.date);
    const rStr   = oppRank ? `<span class="sched-opp-rank">#${oppRank}</span> ` : '';
    return `<div class="sched-row ${isNext ? 'current' : ''}">
      <span class="sched-date">${when}</span>
      <span class="sched-opp">${atStr} ${rStr}${oppName}</span>
      <span class="sched-result upcoming">${time}</span>
    </div>`;
  }).join('');

  const rankStr = apRank ? `<span class="back-rank">#${apRank} AP</span>` : '';
  const recStr  = recordStr ? `<span class="back-rec">${recordStr}</span>` : '';
  const confStr = confRecordStr ? `<span class="back-rec conf">${confRecordStr}</span>` : '';

  return `
    <div class="back-header">
      <span class="back-title">${team.emoji} Schedule</span>
      <span class="back-meta">${rankStr}${recStr}${confStr}</span>
    </div>
    <div class="schedule-list">
      ${completedRows}
      ${(liveRows || upcomingRows) ? '<div class="divider"></div>' : ''}
      ${liveRows}
      ${upcomingRows}
    </div>
  `;
}

// â”€â”€â”€ CARD SHELL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderCard(result, idx) {
  const { cls, style } = getCardTheme(result.team, idx);
  return `
    <div class="card ${cls}" style="${style}${cls==='love-card'?`background:var(--card-bg);box-shadow:0 8px 40px var(--card-shadow),0 0 0 1px rgba(255,255,255,0.06);`:''}" onclick="this.classList.toggle('flipped')">
      <div class="card-front">${renderFront(result)}</div>
      <div class="card-back">${renderBack(result)}</div>
    </div>`;
}

function renderError(team, idx) {
  const { cls, style } = getCardTheme(team, idx);
  return `
    <div class="card ${cls}" style="${style}${cls==='love-card'?`background:var(--card-bg);`:'' }">
      <div class="card-front">
        <div><span class="team-emoji">${team.emoji}</span><span class="team-name">${team.display}</span></div>
        <div class="answer tbd">â€”</div>
        <div style="color:rgba(255,255,255,0.2);font-size:0.72rem;font-style:italic">Couldn't load Â· will retry</div>
      </div>
      <div class="card-back"><div class="back-title">No data</div></div>
    </div>`;
}

// â”€â”€â”€ MAIN LOAD â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
async function loadAll() {
  const grid = document.getElementById('grid');
  if (!selectedTeams.length) {
    grid.innerHTML = `<div class="empty-state"><div class="empty-icon">ğŸ€</div><p>Select your favorite teams below to get started</p></div>`;
    return;
  }

  if (!grid.children.length || grid.querySelector('.empty-state')) {
    grid.innerHTML = selectedTeams.map((t, i) => {
      const { cls, style } = getCardTheme(t, i);
      return `<div class="card loading ${cls}" style="${style}${cls==='love-card'?`background:var(--card-bg);`:''}" >
        <div class="card-front">
          <div><span class="team-emoji">${t.emoji}</span><span class="team-name">${t.display}</span></div>
          <div class="answer tbd" style="margin-top:auto">â€¦</div>
        </div>
        <div class="card-back"></div>
      </div>`;
    }).join('');
  }

  const results = await Promise.allSettled(selectedTeams.map(fetchTeam));

  grid.innerHTML = results.map((r, i) =>
    r.status === 'fulfilled' ? renderCard(r.value, i) : renderError(selectedTeams[i], i)
  ).join('');

  document.getElementById('last-updated').textContent =
    new Date().toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit', second: '2-digit' });
}

function manualRefresh() {
  const btn = document.getElementById('refresh-btn');
  btn.classList.add('spinning'); btn.disabled = true;
  loadAll().finally(() => { btn.classList.remove('spinning'); btn.disabled = false; });
}

// â”€â”€â”€ CATEGORY / TOP 25 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
async function getCategoryTeams(catId) {
  if (catId === 'top25') {
    const ids = await fetchTop25Ids();
    if (!ids || !ids.length) return null;
    return ids.map(id => TEAM_LIST.find(t => t.id === id)).filter(Boolean);
  }
  return TEAM_LIST.filter(t => t.conf === catId);
}

let activeCategory = null;

// â”€â”€â”€ SELECTOR UI â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
let searchQuery = '';
let dragSrcIdx  = null;

function isSelected(team) { return selectedTeams.some(t => t.display === team.display); }

function toggleTeam(team) {
  if (isSelected(team)) {
    selectedTeams = selectedTeams.filter(t => t.display !== team.display);
  } else if (selectedTeams.length < 6) {
    selectedTeams = [...selectedTeams, team];
  }
  window.selectedTeams = selectedTeams;
  saveSaved(selectedTeams);
  renderSelector();
  loadAll();
}

function removeTeam(display) {
  selectedTeams = selectedTeams.filter(t => t.display !== display);
  saveSaved(selectedTeams);
  renderSelector();
  loadAll();
}

function clearAllTeams() {
  selectedTeams = [];
  saveSaved(selectedTeams);
  renderSelector();
  loadAll();
}

function renderChips() {
  const container = document.getElementById('selected-chips');
  const clearBtn  = document.getElementById('clear-all-btn');
  if (!selectedTeams.length) {
    container.innerHTML = '<span style="color:rgba(255,255,255,0.15);font-size:0.75rem;">No teams selected yet</span>';
    clearBtn.style.display = 'none';
    return;
  }
  clearBtn.style.display = 'inline-block';
  container.innerHTML = selectedTeams.map((t, i) => `
    <div class="chip" draggable="true" data-idx="${i}"
         ondragstart="dragStart(event,${i})"
         ondragover="dragOver(event,${i})"
         ondrop="dropOn(event,${i})"
         ondragend="dragEnd(event)">
      <span class="chip-drag-handle">â ¿</span>
      <span class="chip-emoji">${t.emoji}</span>
      <span class="chip-name">${t.short || t.display}</span>
      <span class="chip-remove" onclick="removeTeam('${t.display.replace(/'/g,"\\'")}')">âœ•</span>
    </div>`).join('');
}

async function renderBrowser() {
  const container = document.getElementById('team-browser');
  const q = searchQuery.toLowerCase().trim();

  let filtered;
  if (q) {
    filtered = TEAM_LIST.filter(t =>
      t.display.toLowerCase().includes(q) ||
      t.conf.toLowerCase().includes(q) ||
      t._espnLocation?.toLowerCase().includes(q) ||
      t.aliases.some(a => a.includes(q))
    );
  } else if (activeCategory) {
    container.innerHTML = '<div class="no-results" style="color:rgba(255,255,255,0.15)">Loadingâ€¦</div>';
    filtered = await getCategoryTeams(activeCategory);
    if (filtered === null) {
      container.innerHTML = '<div class="no-results">Couldn\'t load rankings â€” try again in a moment</div>';
      return;
    }
  } else {
    filtered = TEAM_LIST;
  }

  const maxReached = selectedTeams.length >= 6;

  if (!filtered || !filtered.length) {
    container.innerHTML = '<div class="no-results">No teams found</div>';
    return;
  }

  container.innerHTML = filtered.map(t => {
    const sel = isSelected(t);
    const dis = maxReached && !sel;
    const hateClass = t.vibe === 'hate' ? 'hate-option' : '';
    return `<div class="team-option ${sel ? 'selected' : ''} ${dis ? 'disabled' : ''} ${hateClass}"
                 onclick="toggleTeam(TEAM_LIST.find(x=>x.display==='${t.display.replace(/'/g,"\\'")}'))">
      <div class="option-check">${sel ? 'âœ“' : ''}</div>
      <span class="option-emoji">${t.emoji}</span>
      <div class="option-info">
        <div class="option-name">${t.display}</div>
        <div class="option-conf">${t.conf}</div>
      </div>
    </div>`;
  }).join('');
}

function renderCategories() {
  const row   = document.getElementById('category-row');
  const label = document.getElementById('cat-active-label');
  const confCats = buildConferenceCategories();
  const allCats  = [{ id: 'top25', label: 'ğŸ† Top 25' }, ...confCats];

  row.innerHTML = allCats.map(c => {
    const isActive = activeCategory === c.id;
    return `<span class="cat-pill ${isActive ? 'active' : ''}" onclick="selectCategory('${c.id}')">${c.label}</span>`;
  }).join('') + (activeCategory ? `<span class="cat-clear" onclick="clearCategory()">âœ• Clear</span>` : '');

  if (activeCategory) {
    const cat = allCats.find(c => c.id === activeCategory);
    label.textContent = `Filtering by: ${cat?.label || activeCategory}`;
    label.classList.add('visible');
  } else {
    label.classList.remove('visible');
  }
}

async function selectCategory(id) {
  activeCategory = activeCategory === id ? null : id;
  searchQuery = '';
  document.getElementById('team-search').value = '';
  renderCategories();
  await renderBrowser();
}

function clearCategory() {
  activeCategory = null;
  renderCategories();
  renderBrowser();
}

async function renderSelector() {
  renderChips();
  renderCelebRow();
  renderCategories();
  await renderBrowser();
  document.getElementById('sel-count').textContent =
    `${selectedTeams.length} / 6 selected Â· drag chips to reorder`;
}

document.getElementById('team-search').addEventListener('input', async e => {
  searchQuery = e.target.value;
  if (searchQuery) activeCategory = null;
  await renderBrowser();
  renderCategories();
});

// Drag to reorder
function dragStart(e, idx) {
  dragSrcIdx = idx;
  e.currentTarget.classList.add('dragging');
  e.dataTransfer.effectAllowed = 'move';
}
function dragOver(e, idx) {
  e.preventDefault();
  e.dataTransfer.dropEffect = 'move';
  document.querySelectorAll('.chip').forEach(c => c.classList.remove('drag-over'));
  if (idx !== dragSrcIdx) e.currentTarget.classList.add('drag-over');
}
function dropOn(e, toIdx) {
  e.preventDefault();
  if (dragSrcIdx === null || dragSrcIdx === toIdx) return;
  const moved = selectedTeams.splice(dragSrcIdx, 1)[0];
  selectedTeams.splice(toIdx, 0, moved);
  dragSrcIdx = null;
  saveSaved(selectedTeams);
  renderSelector();
  loadAll();
}
function dragEnd(e) {
  dragSrcIdx = null;
  document.querySelectorAll('.chip').forEach(c => {
    c.classList.remove('dragging');
    c.classList.remove('drag-over');
  });
}

// â”€â”€â”€ DEBUG HELPER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// Run debugDWW() in the browser console to inspect state
window.debugDWW = function() {
  const saved = JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]');
  console.group('ğŸ€ Did We Win â€” Debug');
  console.log('TEAM_LIST length:', TEAM_LIST.length);
  console.log('TEAM_LIST sample:', TEAM_LIST.slice(0, 3).map(t => ({display: t.display, id: t.id, conf: t.conf, confId: t.confId})));
  console.log('Saved names:', saved);
  console.log('Selected teams:', selectedTeams.map(t => ({display: t.display, id: t.id, conf: t.conf, confId: t.confId})));
  console.log('Top 25 IDs:', cachedTop25Ids);
  console.groupEnd();

  // Test conf record fetch for first selected team
  const t = selectedTeams[0];
  if (t) {
    const url = `https://sports.core.api.espn.com/v2/sports/basketball/leagues/mens-college-basketball/seasons/2026/types/2/groups/${t.confId}/teams/${t.id}/records/9`;
    console.log(`\nConf record URL for ${t.display}:\n${url}`);
    fetch(url)
      .then(r => { console.log('Status:', r.status); return r.json(); })
      .then(d => console.log('Conf record response:', d))
      .catch(e => console.error('Conf record error:', e));
  }
};

// â”€â”€â”€ BOOT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
(async () => {
  const savedNames = loadSavedNames();

  // Build team list immediately from hardcoded DB â€” no API needed, instant
  await buildTeamListFromESPN();

  // Fetch Top 25 (single API call, fast)
  await fetchTop25Ids();

  // Resolve saved teams and render immediately
  selectedTeams = resolveFromSaved(savedNames);
  window.selectedTeams = selectedTeams;
  await renderSelector();
  await loadAll();
  setInterval(loadAll, 60_000);
})();
</script>
</body>
</html>
