<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Hebrew Reading Adventure ğŸŒŸ</title>
<link href="https://fonts.googleapis.com/css2?family=Fredoka+One&family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">
<style>
:root{--blue:#1a3a6b;--gold:#f0c040;--lb:#4a7ec7;--sky:#e8f0ff;--green:#2ecc71;--red:#e74c3c;--sh:0 4px 18px rgba(26,58,107,0.13);}
*{box-sizing:border-box;margin:0;padding:0;}
body{font-family:'Nunito',sans-serif;background:linear-gradient(135deg,#1a3a6b 0%,#2563c7 60%,#4a7ec7 100%);min-height:100vh;color:#1a3a6b;}
header{text-align:center;padding:26px 20px 8px;color:white;}
header h1{font-family:'Fredoka One',cursive;font-size:2.4em;letter-spacing:1px;text-shadow:0 3px 12px rgba(0,0,0,0.25);margin-bottom:4px;}
header .sub{font-size:1em;opacity:0.85;font-weight:600;}
.stars{font-size:1.4em;letter-spacing:4px;margin:4px 0;}
.tabs{display:flex;justify-content:center;gap:8px;padding:14px 20px 0;flex-wrap:wrap;}
.tab-btn{background:rgba(255,255,255,0.18);color:white;border:2px solid rgba(255,255,255,0.4);border-radius:30px;padding:8px 18px;font-family:'Nunito',sans-serif;font-weight:700;font-size:.95em;cursor:pointer;transition:all .2s;}
.tab-btn:hover,.tab-btn.active{background:var(--gold);color:var(--blue);border-color:var(--gold);transform:translateY(-2px);box-shadow:0 4px 14px rgba(240,192,64,0.4);}
.container{max-width:900px;margin:18px auto 40px;padding:0 14px;}
.card{background:white;border-radius:22px;padding:26px;box-shadow:var(--sh);margin-bottom:18px;}
.sec-title{font-family:'Fredoka One',cursive;font-size:1.4em;color:var(--blue);margin-bottom:14px;}
.hidden{display:none!important;}
footer{text-align:center;padding:16px;color:rgba(255,255,255,0.6);font-size:.88em;font-weight:600;}
/* LETTERS */
.ab-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(76px,1fr));gap:10px;}
.lc{background:var(--sky);border:2px solid #c5d8ff;border-radius:14px;padding:12px 6px;text-align:center;cursor:pointer;transition:all .2s;}
.lc:hover,.lc.sel{background:var(--blue);border-color:var(--blue);transform:translateY(-3px);box-shadow:var(--sh);}
.lc:hover .lch,.lc.sel .lch{color:var(--gold);}
.lc:hover .lcn,.lc:hover .lcs,.lc.sel .lcn,.lc.sel .lcs{color:white;}
.lch{font-size:1.9em;font-weight:800;color:var(--blue);display:block;}
.lcn{font-size:.68em;font-weight:700;color:var(--blue);display:block;margin-top:2px;}
.lcs{font-size:.66em;color:var(--lb);display:block;font-weight:600;}
.vg{display:grid;grid-template-columns:repeat(auto-fill,minmax(118px,1fr));gap:12px;}
.vc{background:var(--sky);border:2px solid #c5d8ff;border-radius:14px;padding:14px 8px;text-align:center;cursor:pointer;transition:all .2s;}
.vc:hover{background:linear-gradient(135deg,#1a3a6b,#4a7ec7);transform:translateY(-3px);box-shadow:var(--sh);border-color:var(--blue);}
.vc:hover .vch{color:var(--gold);}
.vc:hover .vcn,.vc:hover .vcs{color:white;}
.vch{font-size:2.2em;font-weight:800;color:var(--blue);display:block;direction:rtl;}
.vcn{font-size:.75em;font-weight:700;color:var(--blue);display:block;margin-top:4px;}
.vcs{font-size:.75em;color:var(--lb);font-weight:700;background:white;border-radius:10px;padding:2px 8px;margin-top:3px;display:inline-block;}
.vc:hover .vcs{background:rgba(255,255,255,0.2);color:white;}
.tip{background:linear-gradient(135deg,#fffbe6,#fff8cc);border:2px solid var(--gold);border-radius:14px;padding:12px 16px;margin-top:14px;font-size:.92em;color:#7a5700;font-weight:600;}
.subsec{margin-top:26px;padding-top:22px;border-top:2px dashed #c5d8ff;}
.trope-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(110px,1fr));gap:10px;margin-bottom:14px;}
.tc{background:var(--sky);border:2px solid #c5d8ff;border-radius:14px;padding:12px 8px;text-align:center;cursor:pointer;transition:all .2s;}
.tc:hover,.tc.sel{background:var(--blue);border-color:var(--blue);transform:translateY(-3px);box-shadow:var(--sh);}
.tc:hover .tch,.tc.sel .tch{color:var(--gold);}
.tc:hover .tcn,.tc:hover .tct,.tc.sel .tcn,.tc.sel .tct{color:white;}
.tch{font-size:1.9em;font-weight:800;color:var(--blue);display:block;direction:rtl;line-height:1.4;}
.tcn{font-size:.72em;font-weight:800;color:var(--blue);display:block;margin-top:3px;}
.tct{font-size:.65em;color:var(--lb);display:block;font-weight:600;}
.tdot{width:14px;height:14px;border-radius:50%;display:inline-block;transition:transform .15s,opacity .15s;opacity:.25;}
.tdot.active{transform:scale(1.5);opacity:1;}
/* PRAYER FILTERS */
.pfilters{display:flex;flex-wrap:wrap;gap:8px;margin-bottom:16px;}
.fpill{background:var(--sky);border:2px solid #c5d8ff;border-radius:30px;padding:6px 15px;font-family:'Nunito',sans-serif;font-weight:700;font-size:.84em;color:var(--blue);cursor:pointer;transition:all .2s;}
.fpill:hover,.fpill.active{background:var(--blue);color:white;border-color:var(--blue);transform:translateY(-1px);}
.plist{display:flex;flex-direction:column;gap:10px;}
.pcard{background:var(--sky);border:2px solid #c5d8ff;border-radius:16px;overflow:hidden;transition:border-color .2s;}
.pcard:hover{border-color:var(--lb);}
.pcard.open{border-color:var(--gold);background:#fffdf0;}
.phdr{padding:13px 18px;cursor:pointer;display:flex;justify-content:space-between;align-items:center;gap:12px;}
.phdr-left{display:flex;align-items:center;gap:9px;flex-wrap:wrap;}
.pbadge{font-size:.66em;font-weight:700;padding:2px 9px;border-radius:10px;color:white;font-family:'Nunito',sans-serif;white-space:nowrap;}
.pname{font-family:'Fredoka One',cursive;font-size:1.05em;color:var(--blue);}
.phname{font-size:1.4em;font-weight:800;color:var(--lb);direction:rtl;flex-shrink:0;}
.pbody{padding:0 18px 18px;}
/* UNIFIED PLAYER */
.hplayer{margin-top:14px;}
.hstage{background:linear-gradient(135deg,#f0f6ff,#e8f0ff);border:2px solid #c5d8ff;border-radius:18px;padding:22px 16px 14px;text-align:center;margin-bottom:12px;min-height:80px;display:flex;flex-direction:column;align-items:center;justify-content:center;}
.hstage-text{font-size:2.6em;direction:rtl;font-weight:800;line-height:1.6;letter-spacing:3px;display:flex;flex-wrap:wrap;justify-content:center;gap:2px 12px;}
.hstage-text.sw{font-size:4.5em;letter-spacing:4px;}
.hsp{display:inline-block;transition:all .18s;cursor:pointer;border-radius:6px;padding:0 2px;}
.hsp:hover{opacity:.75;}
.hsp.sa{transform:scale(1.28);filter:drop-shadow(0 0 12px currentColor);z-index:2;}
.hsp.wa{transform:scale(1.18);filter:drop-shadow(0 0 8px currentColor);}
.hsp.dim{opacity:.16;}
.hsp.done{opacity:.38;}
.engline{font-size:.88em;color:#666;font-weight:600;margin-top:10px;font-style:italic;max-width:600px;text-align:center;}
.pron-strip{display:flex;flex-wrap:wrap;justify-content:center;gap:5px;margin-bottom:12px;direction:ltr;}
.pchip{background:white;border:2px solid #c5d8ff;border-radius:10px;padding:4px 10px;font-size:.8em;font-weight:800;color:#aaa;cursor:pointer;transition:all .18s;}
.pchip.sa{color:white;transform:translateY(-4px) scale(1.12);box-shadow:0 5px 14px rgba(0,0,0,0.22);}
.pchip.wa{transform:translateY(-2px) scale(1.06);box-shadow:0 3px 10px rgba(0,0,0,0.14);}
.pchip.done{opacity:.35;}
.mtoggle{display:flex;gap:5px;background:#eef2ff;border-radius:30px;padding:4px;max-width:340px;margin:0 auto 12px;}
.mtbtn{flex:1;border:none;border-radius:24px;padding:7px 10px;font-family:'Nunito',sans-serif;font-weight:700;font-size:.82em;cursor:pointer;background:transparent;color:var(--lb);transition:all .2s;}
.mtbtn.active{background:var(--blue);color:white;box-shadow:0 2px 8px rgba(26,58,107,0.25);}
.pcontrols{display:flex;flex-wrap:wrap;gap:8px;justify-content:center;align-items:center;margin-bottom:8px;}
.cb{border:none;border-radius:24px;padding:9px 18px;font-family:'Fredoka One',cursive;font-size:.92em;cursor:pointer;transition:all .18s;}
.cb:hover:not(:disabled){transform:translateY(-2px);}
.cb.bl{background:var(--blue);color:white;box-shadow:0 3px 12px rgba(26,58,107,0.28);}
.cb.bl:hover:not(:disabled){background:var(--lb);}
.cb.pu{background:#9b59b6;color:white;box-shadow:0 3px 12px rgba(155,89,182,0.28);}
.cb.pu:hover:not(:disabled){background:#7d3c98;}
.cb.te{background:#00b894;color:white;box-shadow:0 3px 12px rgba(0,184,148,0.28);}
.cb.te:hover:not(:disabled){background:#00997a;}
.cb.rd{background:var(--red);color:white;}
.cb.go{background:var(--gold);color:var(--blue);}
.cb:disabled{opacity:.4;cursor:default;transform:none!important;}
.pctr{text-align:center;font-size:.86em;font-weight:700;color:var(--lb);min-height:20px;}
/* WORD PRACTICE */
.wgrid{display:flex;flex-wrap:wrap;gap:8px;margin-bottom:18px;}
.wbtn{background:var(--sky);border:2px solid var(--lb);border-radius:12px;padding:6px 14px;font-family:'Nunito',sans-serif;font-weight:700;font-size:.9em;color:var(--blue);cursor:pointer;transition:all .2s;}
.wbtn:hover,.wbtn.active{background:var(--blue);color:white;border-color:var(--blue);transform:translateY(-2px);}
.ttsnote{text-align:center;font-size:.76em;color:#999;margin-top:6px;}
/* QUIZ */
.qmpicker{display:flex;flex-wrap:wrap;gap:12px;margin-bottom:20px;justify-content:center;}
.qmbtn{background:var(--sky);border:2px solid #c5d8ff;border-radius:18px;padding:14px 18px;font-family:'Nunito',sans-serif;font-weight:700;font-size:.9em;color:var(--blue);cursor:pointer;transition:all .2s;text-align:center;min-width:130px;}
.qmbtn:hover{background:var(--blue);color:white;border-color:var(--blue);transform:translateY(-3px);box-shadow:var(--sh);}
.qmi{font-size:1.6em;display:block;margin-bottom:4px;}
.qcard{background:linear-gradient(135deg,#f0f6ff,#e8f0ff);border:2px solid #c5d8ff;border-radius:18px;padding:24px;text-align:center;}
.qprog{display:flex;align-items:center;gap:10px;margin-bottom:16px;}
.qpbar{flex:1;height:9px;background:#c5d8ff;border-radius:9px;overflow:hidden;}
.qpfill{height:100%;background:linear-gradient(90deg,var(--blue),var(--lb));border-radius:9px;transition:width .4s;}
.qscore{background:var(--gold);color:var(--blue);font-family:'Fredoka One',cursive;font-size:.88em;padding:3px 12px;border-radius:18px;white-space:nowrap;}
.qq{font-size:3.6em;direction:rtl;font-weight:800;color:var(--blue);margin:8px 0 6px;line-height:1.2;}
.qsub{font-size:.88em;color:#777;font-weight:600;margin-bottom:18px;}
.qchoices{display:grid;grid-template-columns:1fr 1fr;gap:10px;max-width:500px;margin:0 auto;}
.qch{background:white;border:2px solid #c5d8ff;border-radius:14px;padding:12px 14px;font-family:'Nunito',sans-serif;font-weight:700;font-size:.92em;color:var(--blue);cursor:pointer;transition:all .2s;}
.qch:hover{border-color:var(--blue);background:var(--sky);transform:translateY(-2px);}
.qch.correct{background:#e8f8ee;border-color:#2ecc71;color:#1a6b3a;animation:cpop .4s ease;}
.qch.wrong{background:#fee;border-color:var(--red);color:#8b0000;animation:cshake .4s ease;}
@keyframes cpop{0%{transform:scale(1)}50%{transform:scale(1.07)}100%{transform:scale(1)}}
@keyframes cshake{0%,100%{transform:translateX(0)}25%{transform:translateX(-7px)}75%{transform:translateX(7px)}}
.qfb{margin-top:14px;font-size:1em;font-weight:700;min-height:24px;}
.qfb.correct{color:#2ecc71;}.qfb.wrong{color:var(--red);}
.qnext{display:inline-block;margin-top:12px;background:var(--blue);color:white;border:none;border-radius:26px;padding:9px 26px;font-family:'Fredoka One',cursive;font-size:1em;cursor:pointer;transition:all .2s;}
.qnext:hover{background:var(--lb);transform:translateY(-2px);}
.qtag{display:inline-block;background:rgba(26,58,107,0.1);color:var(--blue);font-size:.76em;font-weight:700;padding:2px 10px;border-radius:18px;margin-bottom:10px;}
.bigscore{font-family:'Fredoka One',cursive;font-size:3.5em;color:var(--blue);}
.scoremsg{font-size:1.1em;font-weight:700;color:#555;margin:6px 0 16px;}
</style>
</head>
<body>
<header>
  <div class="stars">âœ¡ï¸ â­ âœ¡ï¸</div>
  <h1>Hebrew Reading Adventure</h1>
  <p class="sub">Learn to read Hebrew â€” one syllable at a time! ğŸ‰</p>
</header>
<div class="tabs">
  <button class="tab-btn active" onclick="showTab('letters',this)">ğŸ”¤ Letters &amp; Vowels</button>
  <button class="tab-btn" onclick="showTab('words',this)">ğŸ“– Word Practice</button>
  <button class="tab-btn" onclick="showTab('prayers',this)">ğŸ• Prayers</button>
  <button class="tab-btn" onclick="showTab('quiz',this)">ğŸ§  Quiz</button>
</div>
<div class="container">
  <div id="tab-letters" class="card">
    <div class="sec-title">ğŸ”¤ The Aleph-Bet</div>
    <p style="margin-bottom:14px;color:#555;font-weight:600;">Click any letter to hear it! Hebrew reads <strong>right to left</strong>.</p>
    <div class="ab-grid" id="abGrid"></div>
    <div class="tip">ğŸ’¡ Letters with a dot (dagesh) have a harder sound. Some have a different shape at the end of a word â€” the <strong>sofit</strong> form!</div>
    <div class="subsec">
      <div class="sec-title">ğŸµ Vowel Signs (Nikkud)</div>
      <p style="margin-bottom:14px;color:#555;font-weight:600;">Dots and dashes under/over letters indicate the vowel sound. Click to hear!</p>
      <div class="vg" id="vGrid"></div>
      <div class="tip">ğŸ’¡ The vowel sound comes AFTER the consonant. So ×‘Ö¸Ö¼ (Bet + Kamatz) = "BAH"!</div>
    </div>
    <div class="subsec">
      <div class="sec-title">ğŸµ Trope (Cantillation)</div>
      <p style="margin-bottom:6px;color:#555;font-weight:600;">These are the musical symbols used when chanting Torah and Haftarah. Click any trope to hear its melody!</p>
      <p style="margin-bottom:14px;font-size:.84em;color:#888;font-weight:600;">Each mark tells the reader which melody to sing on that word. The tones are approximated using the Web Audio API.</p>
      <div class="trope-grid" id="tropeGrid"></div>
      <div class="tip">ğŸ’¡ Trope marks appear above or below Hebrew letters â€” they tell you both the melody AND where to put emphasis in the phrase!</div>
      <div id="tropePlayer" style="display:none;margin-top:16px;background:linear-gradient(135deg,#f0f6ff,#e8f0ff);border:2px solid #c5d8ff;border-radius:16px;padding:16px;text-align:center;">
        <div style="font-family:'Fredoka One',cursive;font-size:1.1em;color:var(--blue);margin-bottom:4px;" id="tropeName"></div>
        <div style="font-size:3em;margin:6px 0;" id="tropeSymbol"></div>
        <div style="font-size:.88em;color:#666;font-weight:600;margin-bottom:10px;" id="tropeDesc"></div>
        <div id="tropeDots" style="display:flex;justify-content:center;gap:6px;margin-bottom:12px;min-height:28px;align-items:center;"></div>
        <button class="cb bl" id="tropePlayBtn" onclick="playTrope()" style="padding:9px 28px;">â–¶ Play melody</button>
        <button class="cb go" onclick="playTropeLoop()" style="padding:9px 20px;" id="tropeLoopBtn">ğŸ” Loop</button>
        <button class="cb rd" onclick="stopTrope()" style="padding:9px 20px;">â¹ Stop</button>
      </div>
    </div>
  </div>
  <div id="tab-words" class="card hidden">
    <div class="sec-title">ğŸ“– Word Practice</div>
    <p style="margin-bottom:10px;color:#555;font-weight:600;">Pick a word â€” try to read it first, then reveal!</p>
    <div style="margin-bottom:14px;">
      <div style="font-size:.75em;font-weight:700;color:#aaa;margin-bottom:8px;text-transform:uppercase;letter-spacing:1px;">Choose a word:</div>
      <div class="wgrid" id="wGrid"></div>
    </div>
    <div style="border-top:2px dashed #c5d8ff;padding-top:16px;">
      <div id="wPlayerWrap"></div>
    </div>
    <div class="ttsnote" id="ttsNote"></div>
  </div>
  <div id="tab-prayers" class="card hidden">
    <div class="sec-title">ğŸ• Prayers &amp; Blessings</div>
    <p style="margin-bottom:12px;color:#555;font-weight:600;">Click any prayer â€” step through syllable by syllable, word by word, or play continuously!</p>
    <div class="pfilters" id="pFilters"></div>
    <div class="plist" id="pList"></div>
  </div>
  <div id="tab-quiz" class="card hidden">
    <div class="sec-title">ğŸ§  Quiz Time!</div>
    <div id="qContainer"></div>
  </div>
</div>
<footer>Built with â¤ï¸ for Bar Mitzvah preparation Â· Hebrew is a beautiful language!</footer>
<script>
// ===== COLORS =====
const SYL_COLORS=['#e74c3c','#3498db','#e67e22','#27ae60','#8e44ad','#e91e8c','#00b894','#f39c12','#16a085','#6c3483'];

// ===== ALPHABET =====
const alphabet=[
  {heb:"×",name:"Aleph",sound:"silent",speak:"×Ö¸"},
  {heb:"×‘Ö¼",name:"Bet",sound:"B",speak:"×‘Ö¸Ö¼"},
  {heb:"×‘",name:"Vet",sound:"V",speak:"×•Ö¸"},
  {heb:"×’",name:"Gimel",sound:"G",speak:"×’Ö¸Ö¼"},
  {heb:"×“",name:"Dalet",sound:"D",speak:"×“Ö¸Ö¼"},
  {heb:"×”",name:"Heh",sound:"H",speak:"×”Ö¸"},
  {heb:"×•",name:"Vav",sound:"V/OO/O",speak:"×•Ö¸"},
  {heb:"×–",name:"Zayin",sound:"Z",speak:"×–Ö¸"},
  {heb:"×—",name:"Chet",sound:"CH",speak:"×—Ö¸"},
  {heb:"×˜",name:"Tet",sound:"T",speak:"×˜Ö¸"},
  {heb:"×™",name:"Yod",sound:"Y/EE",speak:"×™Ö¸"},
  {heb:"×›Ö¼",name:"Kaf",sound:"K",speak:"×›Ö¸Ö¼"},
  {heb:"×›",name:"Khaf",sound:"KH",speak:"×›Ö¸"},
  {heb:"×œ",name:"Lamed",sound:"L",speak:"×œÖ¸"},
  {heb:"×",name:"Mem",sound:"M",speak:"×Ö¸"},
  {heb:"× ",name:"Nun",sound:"N",speak:"× Ö¸"},
  {heb:"×¡",name:"Samech",sound:"S",speak:"×¡Ö¸"},
  {heb:"×¢",name:"Ayin",sound:"silent",speak:"×¢Ö¸"},
  {heb:"×¤Ö¼",name:"Peh",sound:"P",speak:"×¤Ö¸Ö¼"},
  {heb:"×¤",name:"Feh",sound:"F",speak:"×¤Ö¸"},
  {heb:"×¦",name:"Tsadi",sound:"TZ",speak:"×¦Ö¸"},
  {heb:"×§",name:"Kuf",sound:"K",speak:"×§Ö¸"},
  {heb:"×¨",name:"Resh",sound:"R",speak:"×¨Ö¸"},
  {heb:"×©×",name:"Shin",sound:"SH",speak:"×©Ö¸×"},
  {heb:"×©×‚",name:"Sin",sound:"S",speak:"×©Ö¸×‚"},
  {heb:"×ª",name:"Tav",sound:"T",speak:"×ªÖ¸Ö¼"},
];
const vowels=[
  {heb:"×‘Ö¸",name:"Kamatz",sound:"AH"},{heb:"×‘Ö·",name:"Patach",sound:"AH"},{heb:"×‘Öµ",name:"Tzere",sound:"AY"},
  {heb:"×‘Ö¶",name:"Segol",sound:"EH"},{heb:"×‘Ö´",name:"Chirik",sound:"EE"},{heb:"×‘Ö¹",name:"Cholam",sound:"OH"},
  {heb:"×‘×•Ö¹",name:"Cholam Male",sound:"OH"},{heb:"×‘×•Ö¼",name:"Shuruk",sound:"OO"},{heb:"×‘Ö»",name:"Kubutz",sound:"OO"},
  {heb:"×‘Ö°",name:"Shva",sound:"short E"},{heb:"×‘Ö±",name:"Chataf Segol",sound:"EH"},
  {heb:"×‘Ö²",name:"Chataf Patach",sound:"AH"},{heb:"×‘Ö³",name:"Chataf Kamatz",sound:"OH"}
];

// ===== WORDS =====
const words=[
  {hebrew:"×©Ö¸××œ×•Ö¹×",english:"Peace / Hello / Goodbye",pronounce:"ShaÂ·LOM",
   syllables:[{heb:"×©Ö¸×",sound:"SHA",speak:"×©Ö¸×"},{heb:"×œ×•Ö¹×",sound:"LOM",speak:"×œ×•Ö¹×"}],
   tip:"ğŸ’¡ 'Shalom' means peace, hello, AND goodbye!"},
  {hebrew:"×‘Ö°Ö¼×¨Ö¸×›Ö¸×”",english:"Blessing",pronounce:"B'Â·raÂ·KHAH",
   syllables:[{heb:"×‘Ö°Ö¼",sound:"B'",speak:"×‘Ö°Ö¼"},{heb:"×¨Ö¸",sound:"RA",speak:"×¨Ö¸"},{heb:"×›Ö¸×”",sound:"KHAH",speak:"×›Ö¸×”"}],
   tip:"ğŸ’¡ A 'bracha' is a blessing you say before doing a mitzvah or eating."},
  {hebrew:"×ªÖ¼×•Ö¹×¨Ö¸×”",english:"The Torah",pronounce:"ToÂ·RAH",
   syllables:[{heb:"×ªÖ¼×•Ö¹",sound:"TO",speak:"×ªÖ¼×•Ö¹"},{heb:"×¨Ö¸×”",sound:"RAH",speak:"×¨Ö¸×”"}],
   tip:"ğŸ’¡ The Torah is the first 5 books of the Bible!"},
  {hebrew:"×©Ö·××‘Ö¸Ö¼×ª",english:"Sabbath",pronounce:"ShaÂ·BAT",
   syllables:[{heb:"×©Ö·×",sound:"SHA",speak:"×©Ö·×"},{heb:"×‘Ö¸Ö¼×ª",sound:"BAT",speak:"×‘Ö¸Ö¼×ª"}],
   tip:"ğŸ’¡ Shabbat starts Friday at sunset and ends Saturday night. A day of rest!"},
  {hebrew:"×Ö´×¦Ö°×•Ö¸×”",english:"Commandment / Good deed",pronounce:"mitzÂ·VAH",
   syllables:[{heb:"×Ö´",sound:"MI",speak:"×Ö´"},{heb:"×¦Ö°",sound:"TZ'",speak:"×¦Ö°"},{heb:"×•Ö¸×”",sound:"VAH",speak:"×•Ö¸×”"}],
   tip:"ğŸ’¡ Bar Mitzvah means 'son of the commandment'!"},
  {hebrew:"×Ö¸×Öµ×Ÿ",english:"Amen (So be it)",pronounce:"aÂ·MEN",
   syllables:[{heb:"×Ö¸",sound:"AH",speak:"×Ö¸"},{heb:"×Öµ×Ÿ",sound:"MEN",speak:"×Öµ×Ÿ"}],
   tip:"ğŸ’¡ Say 'Amen' after a prayer to agree with it and make it yours too."},
  {hebrew:"×™Ö´×©Ö°×‚×¨Ö¸×Öµ×œ",english:"Israel",pronounce:"yisÂ·raÂ·EL",
   syllables:[{heb:"×™Ö´",sound:"YI",speak:"×™Ö´"},{heb:"×©Ö°×‚",sound:"S'",speak:"×©Ö°×‚"},{heb:"×¨Ö¸",sound:"RA",speak:"×¨Ö¸"},{heb:"×Öµ×œ",sound:"EL",speak:"×Öµ×œ"}],
   tip:"ğŸ’¡ Yisrael means 'one who wrestles with God.' The name of the Jewish people!"},
  {hebrew:"×Ö±×œÖ¹×”Ö´×™×",english:"God (Elohim)",pronounce:"eÂ·loÂ·HIM",
   syllables:[{heb:"×Ö±",sound:"E",speak:"×Ö±"},{heb:"×œÖ¹",sound:"LO",speak:"×œÖ¹"},{heb:"×”Ö´×™×",sound:"HIM",speak:"×”Ö´×™×"}],
   tip:"ğŸ’¡ Elohim is a name for God â€” it refers to the one God even though it looks plural."},
  {hebrew:"×—Ö·×™Ö´Ö¼×™×",english:"Life / L'Chaim!",pronounce:"chaÂ·YIM",
   syllables:[{heb:"×—Ö·",sound:"CHA",speak:"×—Ö·"},{heb:"×™Ö´Ö¼×™×",sound:"YIM",speak:"×™Ö´Ö¼×™×"}],
   tip:"ğŸ’¡ 'L'Chaim' means 'To life!' â€” the classic Jewish toast!"},
  {hebrew:"×§Ö°×“×•Ö¼×©Ö¸××”",english:"Holiness",pronounce:"k'Â·duÂ·SHAH",
   syllables:[{heb:"×§Ö°",sound:"K'",speak:"×§Ö°"},{heb:"×“×•Ö¼",sound:"DU",speak:"×“×•Ö¼"},{heb:"×©Ö¸××”",sound:"SHAH",speak:"×©Ö¸××”"}],
   tip:"ğŸ’¡ Kedushah means holiness â€” also the name of a key prayer in the Amidah!"},
  {hebrew:"×‘Ö¸Ö¼×¨×•Ö¼×šÖ°",english:"Blessed",pronounce:"baÂ·RUKH",
   syllables:[{heb:"×‘Ö¸Ö¼",sound:"BA",speak:"×‘Ö¸Ö¼"},{heb:"×¨×•Ö¼×šÖ°",sound:"RUKH",speak:"×¨×•Ö¼×šÖ°"}],
   tip:"ğŸ’¡ Every blessing starts with 'Baruch Atah Adonai' â€” Blessed are You, Lord!"},
  {hebrew:"×Ö¶×œÖ¶×šÖ°",english:"King",pronounce:"MEÂ·lekh",
   syllables:[{heb:"×Ö¶",sound:"ME",speak:"×Ö¶"},{heb:"×œÖ¶×šÖ°",sound:"lekh",speak:"×œÖ¶×šÖ°"}],
   tip:"ğŸ’¡ 'Melech ha-Olam' = King of the Universe â€” in every single blessing!"},
  {hebrew:"×”Ö¸×¢×•Ö¹×œÖ¸×",english:"The Universe / World",pronounce:"haÂ·oÂ·LAM",
   syllables:[{heb:"×”Ö¸",sound:"HA",speak:"×”Ö¸"},{heb:"×¢×•Ö¹",sound:"O",speak:"×¢×•Ö¹"},{heb:"×œÖ¸×",sound:"LAM",speak:"×œÖ¸×"}],
   tip:"ğŸ’¡ Ha-Olam means 'the world' or 'the universe' â€” in nearly every blessing!"},
  {hebrew:"×ªÖ°Ö¼×¤Ö´×œÖ¸Ö¼×”",english:"Prayer",pronounce:"t'Â·fiÂ·LAH",
   syllables:[{heb:"×ªÖ°Ö¼",sound:"T'",speak:"×ªÖ°Ö¼"},{heb:"×¤Ö´",sound:"FI",speak:"×¤Ö´"},{heb:"×œÖ¸Ö¼×”",sound:"LAH",speak:"×œÖ¸Ö¼×”"}],
   tip:"ğŸ’¡ Tefillah means prayer. The Amidah is sometimes called 'HaTefillah' â€” THE prayer!"},
  {hebrew:"×¢Ö²×Ö´×™×“Ö¸×”",english:"The Standing Prayer",pronounce:"aÂ·miÂ·DAH",
   syllables:[{heb:"×¢Ö²",sound:"A",speak:"×¢Ö²"},{heb:"×Ö´",sound:"MI",speak:"×Ö´"},{heb:"×“Ö¸×”",sound:"DAH",speak:"×“Ö¸×”"}],
   tip:"ğŸ’¡ The Amidah (meaning 'standing') is the central prayer of every service!"},
  {hebrew:"×Ö·×–Ö¸Ö¼×œ ×˜×•Ö¹×‘",english:"Congratulations!",pronounce:"maÂ·zelÂ·TOV",
   syllables:[{heb:"×Ö·",sound:"MA",speak:"×Ö·"},{heb:"×–Ö¸Ö¼×œ",sound:"ZEL",speak:"×–Ö¸Ö¼×œ"},{heb:"×˜×•Ö¹×‘",sound:"TOV",speak:"×˜×•Ö¹×‘"}],
   tip:"ğŸ’¡ Mazel Tov means 'good star' â€” you'll hear it a LOT at your Bar Mitzvah!"},
  {hebrew:"×˜Ö·×œÖ´Ö¼×™×ª",english:"Prayer shawl",pronounce:"taÂ·LIT",
   syllables:[{heb:"×˜Ö·",sound:"TA",speak:"×˜Ö·"},{heb:"×œÖ´Ö¼×™×ª",sound:"LIT",speak:"×œÖ´Ö¼×™×ª"}],
   tip:"ğŸ’¡ The tallit is the prayer shawl worn during morning prayers."},
  {hebrew:"×¢Ö²×œÖ´×™Ö¸Ö¼×”",english:"Going up (to Torah)",pronounce:"aÂ·liÂ·YAH",
   syllables:[{heb:"×¢Ö²",sound:"A",speak:"×¢Ö²"},{heb:"×œÖ´",sound:"LI",speak:"×œÖ´"},{heb:"×™Ö¸Ö¼×”",sound:"YAH",speak:"×™Ö¸Ö¼×”"}],
   tip:"ğŸ’¡ An aliyah is the honor of being called up to say blessings over the Torah!"},
  {hebrew:"×”Ö·×¤Ö°×˜Ö¸×¨Ö¸×”",english:"Haftarah (Prophets reading)",pronounce:"hafÂ·taÂ·RAH",
   syllables:[{heb:"×”Ö·×£",sound:"HAF",speak:"×”Ö·×£"},{heb:"×˜Ö¸",sound:"TA",speak:"×˜Ö¸"},{heb:"×¨Ö¸×”",sound:"RAH",speak:"×¨Ö¸×”"}],
   tip:"ğŸ’¡ The Haftarah is a reading from the Prophets â€” the Bar Mitzvah boy chants it!"},
  {hebrew:"×ªÖ°Ö¼×¤Ö´×œÖ´Ö¼×™×Ÿ",english:"Tefillin (Phylacteries)",pronounce:"t'Â·fiÂ·LIN",
   syllables:[{heb:"×ªÖ°Ö¼",sound:"T'",speak:"×ªÖ°Ö¼"},{heb:"×¤Ö´",sound:"fi",speak:"×¤Ö´"},{heb:"×œÖ´Ö¼×™×Ÿ",sound:"LIN",speak:"×œÖ´Ö¼×™×Ÿ"}],
   tip:"ğŸ’¡ Tefillin are leather boxes containing Torah verses, worn during morning prayers."},
];
// ===== PRAYERS DATA =====
function AD(){return{heb:"×™Ö°×”×•Ö¸×”",sound:"Ado-NAI",speak:"×Ö²×“Ö¹× Ö¸×™",syllables:[{heb:"×Ö²×“Ö¹",sound:"Ado",speak:"×Ö²×“Ö¹"},{heb:"× Ö¸×™",sound:"NAI",speak:"× Ö¸×™"}]};}
function BaruchFormula(extra){
  return [
    {heb:"×‘Ö¸Ö¼×¨×•Ö¼×šÖ°",sound:"ba-RUKH",speak:"×‘Ö¸Ö¼×¨×•Ö¼×šÖ°",syllables:[{heb:"×‘Ö¸Ö¼",sound:"ba",speak:"×‘Ö¸Ö¼"},{heb:"×¨×•Ö¼×šÖ°",sound:"RUKH",speak:"×¨×•Ö¼×šÖ°"}]},
    {heb:"×Ö·×ªÖ¸Ö¼×”",sound:"a-TAH",speak:"×Ö·×ªÖ¸Ö¼×”",syllables:[{heb:"×Ö·",sound:"a",speak:"×Ö·"},{heb:"×ªÖ¸Ö¼×”",sound:"TAH",speak:"×ªÖ¸Ö¼×”"}]},
    AD(),
    {heb:"×Ö±×œÖ¹×”Öµ×™× ×•Ö¼",sound:"e-lo-HEI-nu",speak:"×Ö±×œÖ¹×”Öµ×™× ×•Ö¼",syllables:[{heb:"×Ö±",sound:"e",speak:"×Ö±"},{heb:"×œÖ¹",sound:"lo",speak:"×œÖ¹"},{heb:"×”Öµ×™",sound:"HEI",speak:"×”Öµ×™"},{heb:"× ×•Ö¼",sound:"nu",speak:"× ×•Ö¼"}]},
    {heb:"×Ö¶×œÖ¶×šÖ°",sound:"ME-lekh",speak:"×Ö¶×œÖ¶×šÖ°",syllables:[{heb:"×Ö¶",sound:"ME",speak:"×Ö¶"},{heb:"×œÖ¶×šÖ°",sound:"lekh",speak:"×œÖ¶×šÖ°"}]},
    {heb:"×”Ö¸×¢×•Ö¹×œÖ¸×",sound:"ha-o-LAM",speak:"×”Ö¸×¢×•Ö¹×œÖ¸×",syllables:[{heb:"×”Ö¸",sound:"ha",speak:"×”Ö¸"},{heb:"×¢×•Ö¹",sound:"o",speak:"×¢×•Ö¹"},{heb:"×œÖ¸×",sound:"LAM",speak:"×œÖ¸×"}]},
    ...(extra||[])
  ];
}
function AQK(extra){
  return [...BaruchFormula(),
    {heb:"×Ö²×©Ö¶××¨",sound:"a-SHER",speak:"×Ö²×©Ö¶××¨",syllables:[{heb:"×Ö²",sound:"a",speak:"×Ö²"},{heb:"×©Ö¶××¨",sound:"SHER",speak:"×©Ö¶××¨"}]},
    {heb:"×§Ö´×“Ö°Ö¼×©Ö¸×× ×•Ö¼",sound:"ki-d'SHA-nu",speak:"×§Ö´×“Ö°Ö¼×©Ö¸×× ×•Ö¼",syllables:[{heb:"×§Ö´×“",sound:"kid",speak:"×§Ö´×“"},{heb:"×©Ö¸×",sound:"SHA",speak:"×©Ö¸×"},{heb:"× ×•Ö¼",sound:"nu",speak:"× ×•Ö¼"}]},
    {heb:"×‘Ö°Ö¼×Ö´×¦Ö°×•Ö¹×ªÖ¸×™×•",sound:"b'mitz-vo-TAV",speak:"×‘Ö°Ö¼×Ö´×¦Ö°×•Ö¹×ªÖ¸×™×•",syllables:[{heb:"×‘Ö°Ö¼×Ö´×¦",sound:"b'mitz",speak:"×‘Ö°Ö¼×Ö´×¦"},{heb:"×•Ö¹",sound:"vo",speak:"×•Ö¹"},{heb:"×ªÖ¸×™×•",sound:"TAV",speak:"×ªÖ¸×™×•"}]},
    {heb:"×•Ö°×¦Ö´×•Ö¸Ö¼× ×•Ö¼",sound:"v'tzi-VA-nu",speak:"×•Ö°×¦Ö´×•Ö¸Ö¼× ×•Ö¼",syllables:[{heb:"×•Ö°",sound:"v'",speak:"×•Ö°"},{heb:"×¦Ö´",sound:"tzi",speak:"×¦Ö´"},{heb:"×•Ö¸Ö¼× ×•Ö¼",sound:"VA-nu",speak:"×•Ö¸Ö¼× ×•Ö¼"}]},
    ...(extra||[])
  ];
}

const prayers=[
// DAILY
{category:"Daily",name:"Shema â€” declaration of faith",hebrewName:"×©Ö°××Ö·×¢",
 translation:"Hear O Israel, the Lord is our God, the Lord is One.",
 chunks:[
  {heb:"×©Ö°××Ö·×¢",sound:"sh'MA",speak:"×©Ö°××Ö·×¢",syllables:[{heb:"×©Ö°×",sound:"sh'",speak:"×©Ö°×"},{heb:"×Ö·×¢",sound:"MA",speak:"×Ö·×¢"}]},
  {heb:"×™Ö´×©Ö°×‚×¨Ö¸×Öµ×œ",sound:"yis-ra-EL",speak:"×™Ö´×©Ö°×‚×¨Ö¸×Öµ×œ",syllables:[{heb:"×™Ö´×©Ö°×‚",sound:"yis",speak:"×™Ö´×©Ö°×‚"},{heb:"×¨Ö¸",sound:"ra",speak:"×¨Ö¸"},{heb:"×Öµ×œ",sound:"EL",speak:"×Öµ×œ"}]},
  AD(),
  {heb:"×Ö±×œÖ¹×”Öµ×™× ×•Ö¼",sound:"e-lo-HEI-nu",speak:"×Ö±×œÖ¹×”Öµ×™× ×•Ö¼",syllables:[{heb:"×Ö±",sound:"e",speak:"×Ö±"},{heb:"×œÖ¹",sound:"lo",speak:"×œÖ¹"},{heb:"×”Öµ×™",sound:"HEI",speak:"×”Öµ×™"},{heb:"× ×•Ö¼",sound:"nu",speak:"× ×•Ö¼"}]},
  AD(),
  {heb:"×Ö¶×—Ö¸×“",sound:"e-CHAD",speak:"×Ö¶×—Ö¸×“",syllables:[{heb:"×Ö¶",sound:"e",speak:"×Ö¶"},{heb:"×—Ö¸×“",sound:"CHAD",speak:"×—Ö¸×“"}]}
]},
{category:"Daily",name:"V'ahavta â€” Love the Lord",hebrewName:"×•Ö°×Ö¸×”Ö·×‘Ö°×ªÖ¸Ö¼",
 translation:"You shall love the Lord your God with all your heart, soul, and might.",
 chunks:[
  {heb:"×•Ö°×Ö¸×”Ö·×‘Ö°×ªÖ¸Ö¼",sound:"v'a-hav-TA",speak:"×•Ö°×Ö¸×”Ö·×‘Ö°×ªÖ¸Ö¼",syllables:[{heb:"×•Ö°",sound:"v'",speak:"×•Ö°"},{heb:"×Ö¸",sound:"a",speak:"×Ö¸"},{heb:"×”Ö·×‘",sound:"hav",speak:"×”Ö·×‘"},{heb:"×ªÖ¸Ö¼",sound:"TA",speak:"×ªÖ¸Ö¼"}]},
  {heb:"×Öµ×ª",sound:"et",speak:"×Öµ×ª",syllables:[{heb:"×Öµ×ª",sound:"et",speak:"×Öµ×ª"}]},
  AD(),
  {heb:"×Ö±×œÖ¹×”Ö¶×™×šÖ¸",sound:"e-lo-HE-kha",speak:"×Ö±×œÖ¹×”Ö¶×™×šÖ¸",syllables:[{heb:"×Ö±",sound:"e",speak:"×Ö±"},{heb:"×œÖ¹",sound:"lo",speak:"×œÖ¹"},{heb:"×”Ö¶×™",sound:"HE",speak:"×”Ö¶×™"},{heb:"×šÖ¸",sound:"kha",speak:"×šÖ¸"}]},
  {heb:"×‘Ö°Ö¼×›Ö¸×œ",sound:"b'khol",speak:"×‘Ö°Ö¼×›Ö¸×œ",syllables:[{heb:"×‘Ö°Ö¼",sound:"b'",speak:"×‘Ö°Ö¼"},{heb:"×›Ö¸×œ",sound:"khol",speak:"×›Ö¸×œ"}]},
  {heb:"×œÖ°×‘Ö¸×‘Ö°×šÖ¸",sound:"l'va-v'KHA",speak:"×œÖ°×‘Ö¸×‘Ö°×šÖ¸",syllables:[{heb:"×œÖ°",sound:"l'",speak:"×œÖ°"},{heb:"×‘Ö¸×‘",sound:"vav",speak:"×‘Ö¸×‘"},{heb:"×šÖ¸",sound:"KHA",speak:"×šÖ¸"}]},
  {heb:"×•Ö¼×‘Ö°×›Ö¸×œ",sound:"uv'khol",speak:"×•Ö¼×‘Ö°×›Ö¸×œ",syllables:[{heb:"×•Ö¼×‘Ö°",sound:"uv'",speak:"×•Ö¼×‘Ö°"},{heb:"×›Ö¸×œ",sound:"khol",speak:"×›Ö¸×œ"}]},
  {heb:"× Ö·×¤Ö°×©Ö°××šÖ¸",sound:"naf-SH'KHA",speak:"× Ö·×¤Ö°×©Ö°××šÖ¸",syllables:[{heb:"× Ö·×£",sound:"naf",speak:"× Ö·×£"},{heb:"×©Ö°×",sound:"sh'",speak:"×©Ö°×"},{heb:"×šÖ¸",sound:"KHA",speak:"×šÖ¸"}]},
  {heb:"×•Ö¼×‘Ö°×›Ö¸×œ",sound:"uv'khol",speak:"×•Ö¼×‘Ö°×›Ö¸×œ",syllables:[{heb:"×•Ö¼×‘Ö°",sound:"uv'",speak:"×•Ö¼×‘Ö°"},{heb:"×›Ö¸×œ",sound:"khol",speak:"×›Ö¸×œ"}]},
  {heb:"×Ö°×Ö¹×“Ö¶×šÖ¸",sound:"m'o-DE-kha",speak:"×Ö°×Ö¹×“Ö¶×šÖ¸",syllables:[{heb:"×Ö°",sound:"m'",speak:"×Ö°"},{heb:"×Ö¹",sound:"o",speak:"×Ö¹"},{heb:"×“Ö¶",sound:"DE",speak:"×“Ö¶"},{heb:"×šÖ¸",sound:"kha",speak:"×šÖ¸"}]}
]},
{category:"Daily",name:"Modeh Ani â€” morning thanks",hebrewName:"××•Ö¹×“Ö¶×” ×Ö²× Ö´×™",
 translation:"I give thanks before You, living and eternal King.",
 chunks:[
  {heb:"××•Ö¹×“Ö¶×”",sound:"MO-deh",speak:"××•Ö¹×“Ö¶×”",syllables:[{heb:"××•Ö¹",sound:"MO",speak:"××•Ö¹"},{heb:"×“Ö¶×”",sound:"deh",speak:"×“Ö¶×”"}]},
  {heb:"×Ö²× Ö´×™",sound:"a-NI",speak:"×Ö²× Ö´×™",syllables:[{heb:"×Ö²",sound:"a",speak:"×Ö²"},{heb:"× Ö´×™",sound:"NI",speak:"× Ö´×™"}]},
  {heb:"×œÖ°×¤Ö¸× Ö¶×™×šÖ¸",sound:"l'fa-NE-kha",speak:"×œÖ°×¤Ö¸× Ö¶×™×šÖ¸",syllables:[{heb:"×œÖ°",sound:"l'",speak:"×œÖ°"},{heb:"×¤Ö¸",sound:"fa",speak:"×¤Ö¸"},{heb:"× Ö¶×™",sound:"NE",speak:"× Ö¶×™"},{heb:"×šÖ¸",sound:"kha",speak:"×šÖ¸"}]},
  {heb:"×Ö¶×œÖ¶×šÖ°",sound:"ME-lekh",speak:"×Ö¶×œÖ¶×šÖ°",syllables:[{heb:"×Ö¶",sound:"ME",speak:"×Ö¶"},{heb:"×œÖ¶×šÖ°",sound:"lekh",speak:"×œÖ¶×šÖ°"}]},
  {heb:"×—Ö·×™",sound:"CHAI",speak:"×—Ö·×™",syllables:[{heb:"×—Ö·×™",sound:"CHAI",speak:"×—Ö·×™"}]},
  {heb:"×•Ö°×§Ö·×™Ö¸Ö¼×",sound:"v'ka-YAM",speak:"×•Ö°×§Ö·×™Ö¸Ö¼×",syllables:[{heb:"×•Ö°",sound:"v'",speak:"×•Ö°"},{heb:"×§Ö·",sound:"ka",speak:"×§Ö·"},{heb:"×™Ö¸Ö¼×",sound:"YAM",speak:"×™Ö¸Ö¼×"}]}
]},
{category:"Daily",name:"Amidah Opening â€” Lord open my lips",hebrewName:"×¢Ö²×Ö´×™×“Ö¸×”",
 translation:"Lord, open my lips, and my mouth will declare Your praise.",
 chunks:[
  {heb:"×Ö²×“Ö¹× Ö¸×™",sound:"a-do-NAI",speak:"×Ö²×“Ö¹× Ö¸×™",syllables:[{heb:"×Ö²",sound:"a",speak:"×Ö²"},{heb:"×“Ö¹",sound:"do",speak:"×“Ö¹"},{heb:"× Ö¸×™",sound:"NAI",speak:"× Ö¸×™"}]},
  {heb:"×©Ö°×‚×¤Ö¸×ªÖ·×™",sound:"s'fa-TAI",speak:"×©Ö°×‚×¤Ö¸×ªÖ·×™",syllables:[{heb:"×©Ö°×‚×¤Ö¸",sound:"s'fa",speak:"×©Ö°×‚×¤Ö¸"},{heb:"×ªÖ·×™",sound:"TAI",speak:"×ªÖ·×™"}]},
  {heb:"×ªÖ´Ö¼×¤Ö°×ªÖ¸Ö¼×—",sound:"tif-TACH",speak:"×ªÖ´Ö¼×¤Ö°×ªÖ¸Ö¼×—",syllables:[{heb:"×ªÖ´Ö¼×£",sound:"tif",speak:"×ªÖ´Ö¼×£"},{heb:"×ªÖ¸Ö¼×—",sound:"TACH",speak:"×ªÖ¸Ö¼×—"}]},
  {heb:"×•Ö¼×¤Ö´×™",sound:"u-FI",speak:"×•Ö¼×¤Ö´×™",syllables:[{heb:"×•Ö¼",sound:"u",speak:"×•Ö¼"},{heb:"×¤Ö´×™",sound:"FI",speak:"×¤Ö´×™"}]},
  {heb:"×™Ö·×’Ö´Ö¼×™×“",sound:"ya-GID",speak:"×™Ö·×’Ö´Ö¼×™×“",syllables:[{heb:"×™Ö·",sound:"ya",speak:"×™Ö·"},{heb:"×’Ö´Ö¼×™×“",sound:"GID",speak:"×’Ö´Ö¼×™×“"}]},
  {heb:"×ªÖ°Ö¼×”Ö´×œÖ¸Ö¼×ªÖ¶×šÖ¸",sound:"t'hi-la-TE-kha",speak:"×ªÖ°Ö¼×”Ö´×œÖ¸Ö¼×ªÖ¶×šÖ¸",syllables:[{heb:"×ªÖ°Ö¼",sound:"t'",speak:"×ªÖ°Ö¼"},{heb:"×”Ö´",sound:"hi",speak:"×”Ö´"},{heb:"×œÖ¸Ö¼",sound:"la",speak:"×œÖ¸Ö¼"},{heb:"×ªÖ¶",sound:"TE",speak:"×ªÖ¶"},{heb:"×šÖ¸",sound:"kha",speak:"×šÖ¸"}]}
]},
{category:"Daily",name:"Kedushah â€” Holy, Holy, Holy",hebrewName:"×§Ö°×“×•Ö¼×©Ö¸××”",
 translation:"Holy, holy, holy is the Lord of Hosts; the whole earth is full of His glory.",
 chunks:[
  {heb:"×§Ö¸×“×•Ö¹×©×",sound:"ka-DOSH",speak:"×§Ö¸×“×•Ö¹×©×",syllables:[{heb:"×§Ö¸",sound:"ka",speak:"×§Ö¸"},{heb:"×“×•Ö¹×©×",sound:"DOSH",speak:"×“×•Ö¹×©×"}]},
  {heb:"×§Ö¸×“×•Ö¹×©×",sound:"ka-DOSH",speak:"×§Ö¸×“×•Ö¹×©×",syllables:[{heb:"×§Ö¸",sound:"ka",speak:"×§Ö¸"},{heb:"×“×•Ö¹×©×",sound:"DOSH",speak:"×“×•Ö¹×©×"}]},
  {heb:"×§Ö¸×“×•Ö¹×©×",sound:"ka-DOSH",speak:"×§Ö¸×“×•Ö¹×©×",syllables:[{heb:"×§Ö¸",sound:"ka",speak:"×§Ö¸"},{heb:"×“×•Ö¹×©×",sound:"DOSH",speak:"×“×•Ö¹×©×"}]},
  AD(),
  {heb:"×¦Ö°×‘Ö¸××•Ö¹×ª",sound:"tz'va-OT",speak:"×¦Ö°×‘Ö¸××•Ö¹×ª",syllables:[{heb:"×¦Ö°×‘Ö¸",sound:"tz'va",speak:"×¦Ö°×‘Ö¸"},{heb:"××•Ö¹×ª",sound:"OT",speak:"××•Ö¹×ª"}]},
  {heb:"×Ö°×œÖ¹×",sound:"m'LO",speak:"×Ö°×œÖ¹×",syllables:[{heb:"×Ö°",sound:"m'",speak:"×Ö°"},{heb:"×œÖ¹×",sound:"LO",speak:"×œÖ¹×"}]},
  {heb:"×›Ö¸×œ",sound:"kol",speak:"×›Ö¸×œ",syllables:[{heb:"×›Ö¸×œ",sound:"kol",speak:"×›Ö¸×œ"}]},
  {heb:"×”Ö¸×Ö¸×¨Ö¶×¥",sound:"ha-A-rets",speak:"×”Ö¸×Ö¸×¨Ö¶×¥",syllables:[{heb:"×”Ö¸",sound:"ha",speak:"×”Ö¸"},{heb:"×Ö¸",sound:"A",speak:"×Ö¸"},{heb:"×¨Ö¶×¥",sound:"rets",speak:"×¨Ö¶×¥"}]},
  {heb:"×›Ö°Ö¼×‘×•Ö¹×“×•Ö¹",sound:"k'vo-DO",speak:"×›Ö°Ö¼×‘×•Ö¹×“×•Ö¹",syllables:[{heb:"×›Ö°Ö¼",sound:"k'",speak:"×›Ö°Ö¼"},{heb:"×‘×•Ö¹",sound:"vo",speak:"×‘×•Ö¹"},{heb:"×“×•Ö¹",sound:"DO",speak:"×“×•Ö¹"}]}
]},
{category:"Daily",name:"Aleinu â€” closing prayer",hebrewName:"×¢Ö¸×œÖµ×™× ×•Ö¼",
 translation:"It is our duty to praise the Master of all.",
 chunks:[
  {heb:"×¢Ö¸×œÖµ×™× ×•Ö¼",sound:"a-LEI-nu",speak:"×¢Ö¸×œÖµ×™× ×•Ö¼",syllables:[{heb:"×¢Ö¸",sound:"a",speak:"×¢Ö¸"},{heb:"×œÖµ×™",sound:"LEI",speak:"×œÖµ×™"},{heb:"× ×•Ö¼",sound:"nu",speak:"× ×•Ö¼"}]},
  {heb:"×œÖ°×©Ö·××‘ÖµÖ¼×—Ö·",sound:"l'sha-BEI-ach",speak:"×œÖ°×©Ö·××‘ÖµÖ¼×—Ö·",syllables:[{heb:"×œÖ°",sound:"l'",speak:"×œÖ°"},{heb:"×©Ö·××‘ÖµÖ¼",sound:"sha-BEI",speak:"×©Ö·××‘ÖµÖ¼"},{heb:"×—Ö·",sound:"ach",speak:"×—Ö·"}]},
  {heb:"×œÖ·×Ö²×“×•Ö¹×Ÿ",sound:"la-a-DON",speak:"×œÖ·×Ö²×“×•Ö¹×Ÿ",syllables:[{heb:"×œÖ·",sound:"la",speak:"×œÖ·"},{heb:"×Ö²",sound:"a",speak:"×Ö²"},{heb:"×“×•Ö¹×Ÿ",sound:"DON",speak:"×“×•Ö¹×Ÿ"}]},
  {heb:"×”Ö·×›Ö¹Ö¼×œ",sound:"ha-KOL",speak:"×”Ö·×›Ö¹Ö¼×œ",syllables:[{heb:"×”Ö·",sound:"ha",speak:"×”Ö·"},{heb:"×›Ö¹Ö¼×œ",sound:"KOL",speak:"×›Ö¹Ö¼×œ"}]}
]},
{category:"Daily",name:"Kaddish Opening",hebrewName:"×§Ö·×“Ö´Ö¼×™×©×",
 translation:"May His great name be exalted and sanctified in the world He created.",
 chunks:[
  {heb:"×™Ö´×ªÖ°×’Ö·Ö¼×“Ö·Ö¼×œ",sound:"yit-ga-DAL",speak:"×™Ö´×ªÖ°×’Ö·Ö¼×“Ö·Ö¼×œ",syllables:[{heb:"×™Ö´×ª",sound:"yit",speak:"×™Ö´×ª"},{heb:"×’Ö·Ö¼",sound:"ga",speak:"×’Ö·Ö¼"},{heb:"×“Ö·Ö¼×œ",sound:"DAL",speak:"×“Ö·Ö¼×œ"}]},
  {heb:"×•Ö°×™Ö´×ªÖ°×§Ö·×“Ö·Ö¼×©×",sound:"v'yit-ka-DASH",speak:"×•Ö°×™Ö´×ªÖ°×§Ö·×“Ö·Ö¼×©×",syllables:[{heb:"×•Ö°",sound:"v'",speak:"×•Ö°"},{heb:"×™Ö´×ª",sound:"yit",speak:"×™Ö´×ª"},{heb:"×§Ö·×“Ö·Ö¼×©×",sound:"ka-DASH",speak:"×§Ö·×“Ö·Ö¼×©×"}]},
  {heb:"×©Ö°××Öµ×”Ö¼",sound:"sh'MEH",speak:"×©Ö°××Öµ×”Ö¼",syllables:[{heb:"×©Ö°×",sound:"sh'",speak:"×©Ö°×"},{heb:"×Öµ×”Ö¼",sound:"MEH",speak:"×Öµ×”Ö¼"}]},
  {heb:"×¨Ö·×‘Ö¸Ö¼×",sound:"ra-BA",speak:"×¨Ö·×‘Ö¸Ö¼×",syllables:[{heb:"×¨Ö·",sound:"ra",speak:"×¨Ö·"},{heb:"×‘Ö¸Ö¼×",sound:"BA",speak:"×‘Ö¸Ö¼×"}]},
  {heb:"×‘Ö°Ö¼×¢Ö¸×œÖ°×Ö¸×",sound:"b'al-MA",speak:"×‘Ö°Ö¼×¢Ö¸×œÖ°×Ö¸×",syllables:[{heb:"×‘Ö°Ö¼",sound:"b'",speak:"×‘Ö°Ö¼"},{heb:"×¢Ö¸×œ",sound:"al",speak:"×¢Ö¸×œ"},{heb:"×Ö¸×",sound:"MA",speak:"×Ö¸×"}]},
  {heb:"×“Ö´Ö¼×™",sound:"di",speak:"×“Ö´Ö¼×™",syllables:[{heb:"×“Ö´Ö¼×™",sound:"di",speak:"×“Ö´Ö¼×™"}]},
  {heb:"×‘Ö°×¨Ö¸×",sound:"v'ra",speak:"×‘Ö°×¨Ö¸×",syllables:[{heb:"×‘Ö°",sound:"v'",speak:"×‘Ö°"},{heb:"×¨Ö¸×",sound:"ra",speak:"×¨Ö¸×"}]},
  {heb:"×›Ö´×¨Ö°×¢×•Ö¼×ªÖµ×”Ö¼",sound:"khir-u-TEH",speak:"×›Ö´×¨Ö°×¢×•Ö¼×ªÖµ×”Ö¼",syllables:[{heb:"×›Ö´×¨Ö°",sound:"khir",speak:"×›Ö´×¨Ö°"},{heb:"×¢×•Ö¼",sound:"u",speak:"×¢×•Ö¼"},{heb:"×ªÖµ×”Ö¼",sound:"TEH",speak:"×ªÖµ×”Ö¼"}]}
]},
{category:"Daily",name:"Mi Chamocha â€” Song of the Sea",hebrewName:"×Ö´×™ ×›Ö¸×Ö¹×›Ö¸×”",
 translation:"Who is like You among the mighty, O Lord? Who is like You, majestic in holiness?",
 chunks:[
  {heb:"×Ö´×™",sound:"mi",speak:"×Ö´×™",syllables:[{heb:"×Ö´×™",sound:"mi",speak:"×Ö´×™"}]},
  {heb:"×›Ö¸×Ö¹×›Ö¸×”",sound:"kha-MO-kha",speak:"×›Ö¸×Ö¹×›Ö¸×”",syllables:[{heb:"×›Ö¸",sound:"kha",speak:"×›Ö¸"},{heb:"×Ö¹",sound:"MO",speak:"×Ö¹"},{heb:"×›Ö¸×”",sound:"kha",speak:"×›Ö¸×”"}]},
  {heb:"×‘Ö¸Ö¼×Öµ×œÖ´×",sound:"ba-E-lim",speak:"×‘Ö¸Ö¼×Öµ×œÖ´×",syllables:[{heb:"×‘Ö¸Ö¼",sound:"ba",speak:"×‘Ö¸Ö¼"},{heb:"×Öµ",sound:"E",speak:"×Öµ"},{heb:"×œÖ´×",sound:"lim",speak:"×œÖ´×"}]},
  AD(),
  {heb:"× Ö¶×Ö°×“Ö¸Ö¼×¨",sound:"ne-DAR",speak:"× Ö¶×Ö°×“Ö¸Ö¼×¨",syllables:[{heb:"× Ö¶×Ö°",sound:"ne",speak:"× Ö¶×Ö°"},{heb:"×“Ö¸Ö¼×¨",sound:"DAR",speak:"×“Ö¸Ö¼×¨"}]},
  {heb:"×‘Ö·Ö¼×§Ö¹Ö¼×“Ö¶×©×",sound:"ba-KO-desh",speak:"×‘Ö·Ö¼×§Ö¹Ö¼×“Ö¶×©×",syllables:[{heb:"×‘Ö·Ö¼",sound:"ba",speak:"×‘Ö·Ö¼"},{heb:"×§Ö¹Ö¼",sound:"KO",speak:"×§Ö¹Ö¼"},{heb:"×“Ö¶×©×",sound:"desh",speak:"×“Ö¶×©×"}]}
]},
// BLESSINGS
{category:"Blessings",name:"Blessing Formula â€” every bracha",hebrewName:"×‘Ö¸Ö¼×¨×•Ö¼×šÖ° ×Ö·×ªÖ¸Ö¼×”",
 translation:"Blessed are You, Lord our God, King of the universe.",
 chunks:BaruchFormula()},
{category:"Blessings",name:"Shehecheyanu â€” new occasions",hebrewName:"×©Ö¶××”Ö¶×—Ö±×™Ö¸× ×•Ö¼",
 translation:"Blessed are You... who has kept us alive, sustained us, and enabled us to reach this moment.",
 chunks:BaruchFormula([
  {heb:"×©Ö¶××”Ö¶×—Ö±×™Ö¸× ×•Ö¼",sound:"she-he-che-YA-nu",speak:"×©Ö¶××”Ö¶×—Ö±×™Ö¸× ×•Ö¼",syllables:[{heb:"×©Ö¶×",sound:"she",speak:"×©Ö¶×"},{heb:"×”Ö¶",sound:"he",speak:"×”Ö¶"},{heb:"×—Ö±",sound:"che",speak:"×—Ö±"},{heb:"×™Ö¸",sound:"YA",speak:"×™Ö¸"},{heb:"× ×•Ö¼",sound:"nu",speak:"× ×•Ö¼"}]},
  {heb:"×•Ö°×§Ö´×™Ö°Ö¼×Ö¸× ×•Ö¼",sound:"v'ki-MA-nu",speak:"×•Ö°×§Ö´×™Ö°Ö¼×Ö¸× ×•Ö¼",syllables:[{heb:"×•Ö°×§Ö´×™",sound:"v'ki",speak:"×•Ö°×§Ö´×™"},{heb:"×Ö¸",sound:"MA",speak:"×Ö¸"},{heb:"× ×•Ö¼",sound:"nu",speak:"× ×•Ö¼"}]},
  {heb:"×•Ö°×”Ö´×’Ö´Ö¼×™×¢Ö¸× ×•Ö¼",sound:"v'hi-gi-A-nu",speak:"×•Ö°×”Ö´×’Ö´Ö¼×™×¢Ö¸× ×•Ö¼",syllables:[{heb:"×•Ö°×”Ö´",sound:"v'hi",speak:"×•Ö°×”Ö´"},{heb:"×’Ö´Ö¼×™",sound:"gi",speak:"×’Ö´Ö¼×™"},{heb:"×¢Ö¸",sound:"A",speak:"×¢Ö¸"},{heb:"× ×•Ö¼",sound:"nu",speak:"× ×•Ö¼"}]},
  {heb:"×œÖ·×–Ö°Ö¼×Ö·×Ÿ",sound:"laz-MAN",speak:"×œÖ·×–Ö°Ö¼×Ö·×Ÿ",syllables:[{heb:"×œÖ·×–Ö°Ö¼",sound:"laz",speak:"×œÖ·×–Ö°Ö¼"},{heb:"×Ö·×Ÿ",sound:"MAN",speak:"×Ö·×Ÿ"}]},
  {heb:"×”Ö·×–Ö¶Ö¼×”",sound:"ha-ZEH",speak:"×”Ö·×–Ö¶Ö¼×”",syllables:[{heb:"×”Ö·",sound:"ha",speak:"×”Ö·"},{heb:"×–Ö¶Ö¼×”",sound:"ZEH",speak:"×–Ö¶Ö¼×”"}]}
])},
{category:"Blessings",name:"HaMotzi â€” blessing over bread",hebrewName:"×”Ö·×Ö¼×•Ö¹×¦Ö´×™×",
 translation:"Blessed are You... who brings forth bread from the earth.",
 chunks:BaruchFormula([
  {heb:"×”Ö·×Ö¼×•Ö¹×¦Ö´×™×",sound:"ha-mo-TZI",speak:"×”Ö·×Ö¼×•Ö¹×¦Ö´×™×",syllables:[{heb:"×”Ö·",sound:"ha",speak:"×”Ö·"},{heb:"×Ö¼×•Ö¹",sound:"mo",speak:"×Ö¼×•Ö¹"},{heb:"×¦Ö´×™×",sound:"TZI",speak:"×¦Ö´×™×"}]},
  {heb:"×œÖ¶×—Ö¶×",sound:"LE-chem",speak:"×œÖ¶×—Ö¶×",syllables:[{heb:"×œÖ¶",sound:"LE",speak:"×œÖ¶"},{heb:"×—Ö¶×",sound:"chem",speak:"×—Ö¶×"}]},
  {heb:"×Ö´×Ÿ",sound:"min",speak:"×Ö´×Ÿ",syllables:[{heb:"×Ö´×Ÿ",sound:"min",speak:"×Ö´×Ÿ"}]},
  {heb:"×”Ö¸×Ö¸×¨Ö¶×¥",sound:"ha-A-rets",speak:"×”Ö¸×Ö¸×¨Ö¶×¥",syllables:[{heb:"×”Ö¸",sound:"ha",speak:"×”Ö¸"},{heb:"×Ö¸",sound:"A",speak:"×Ö¸"},{heb:"×¨Ö¶×¥",sound:"rets",speak:"×¨Ö¶×¥"}]}
])},
{category:"Blessings",name:"Kiddush â€” blessing over wine",hebrewName:"×§Ö´×“Ö¼×•Ö¼×©×",
 translation:"Blessed are You... who creates the fruit of the vine.",
 chunks:BaruchFormula([
  {heb:"×‘Ö¼×•Ö¹×¨Öµ×",sound:"bo-REI",speak:"×‘Ö¼×•Ö¹×¨Öµ×",syllables:[{heb:"×‘Ö¼×•Ö¹",sound:"bo",speak:"×‘Ö¼×•Ö¹"},{heb:"×¨Öµ×",sound:"REI",speak:"×¨Öµ×"}]},
  {heb:"×¤Ö°Ö¼×¨Ö´×™",sound:"p'RI",speak:"×¤Ö°Ö¼×¨Ö´×™",syllables:[{heb:"×¤Ö°Ö¼",sound:"p'",speak:"×¤Ö°Ö¼"},{heb:"×¨Ö´×™",sound:"RI",speak:"×¨Ö´×™"}]},
  {heb:"×”Ö·×’Ö¸Ö¼×¤Ö¶×Ÿ",sound:"ha-GA-fen",speak:"×”Ö·×’Ö¸Ö¼×¤Ö¶×Ÿ",syllables:[{heb:"×”Ö·",sound:"ha",speak:"×”Ö·"},{heb:"×’Ö¸Ö¼",sound:"GA",speak:"×’Ö¸Ö¼"},{heb:"×¤Ö¶×Ÿ",sound:"fen",speak:"×¤Ö¶×Ÿ"}]}
])},
{category:"Blessings",name:"Blessing over Tallit",hebrewName:"×˜Ö·×œÖ´Ö¼×™×ª",
 translation:"Blessed are You... who commanded us to wrap ourselves in tzitzit.",
 chunks:AQK([
  {heb:"×œÖ°×”Ö´×ªÖ°×¢Ö·×˜ÖµÖ¼×£",sound:"l'hit-a-TEF",speak:"×œÖ°×”Ö´×ªÖ°×¢Ö·×˜ÖµÖ¼×£",syllables:[{heb:"×œÖ°×”Ö´×ª",sound:"l'hit",speak:"×œÖ°×”Ö´×ª"},{heb:"×¢Ö·",sound:"a",speak:"×¢Ö·"},{heb:"×˜ÖµÖ¼×£",sound:"TEF",speak:"×˜ÖµÖ¼×£"}]},
  {heb:"×‘Ö·Ö¼×¦Ö´Ö¼×™×¦Ö´×™×ª",sound:"ba-tzi-TZIT",speak:"×‘Ö·Ö¼×¦Ö´Ö¼×™×¦Ö´×™×ª",syllables:[{heb:"×‘Ö·Ö¼",sound:"ba",speak:"×‘Ö·Ö¼"},{heb:"×¦Ö´×™",sound:"tzi",speak:"×¦Ö´×™"},{heb:"×¦Ö´×™×ª",sound:"TZIT",speak:"×¦Ö´×™×ª"}]}
])},
{category:"Blessings",name:"Blessing over Tzitzit",hebrewName:"×¦Ö´×™×¦Ö´×™×ª",
 translation:"Blessed are You... who commanded us regarding the mitzvah of tzitzit.",
 chunks:AQK([
  {heb:"×¢Ö·×œ",sound:"al",speak:"×¢Ö·×œ",syllables:[{heb:"×¢Ö·×œ",sound:"al",speak:"×¢Ö·×œ"}]},
  {heb:"×Ö´×¦Ö°×•Ö·×ª",sound:"mitz-VAT",speak:"×Ö´×¦Ö°×•Ö·×ª",syllables:[{heb:"×Ö´×¦",sound:"mitz",speak:"×Ö´×¦"},{heb:"×•Ö·×ª",sound:"VAT",speak:"×•Ö·×ª"}]},
  {heb:"×¦Ö´×™×¦Ö´×™×ª",sound:"tzi-TZIT",speak:"×¦Ö´×™×¦Ö´×™×ª",syllables:[{heb:"×¦Ö´×™",sound:"tzi",speak:"×¦Ö´×™"},{heb:"×¦Ö´×™×ª",sound:"TZIT",speak:"×¦Ö´×™×ª"}]}
])},
{category:"Blessings",name:"Blessing over Tefillin",hebrewName:"×ªÖ°Ö¼×¤Ö´×œÖ´Ö¼×™×Ÿ",
 translation:"Blessed are You... who commanded us to put on tefillin.",
 chunks:AQK([
  {heb:"×œÖ°×”Ö¸× Ö´×™×—Ö·",sound:"l'ha-NI-ach",speak:"×œÖ°×”Ö¸× Ö´×™×—Ö·",syllables:[{heb:"×œÖ°×”Ö¸",sound:"l'ha",speak:"×œÖ°×”Ö¸"},{heb:"× Ö´×™",sound:"NI",speak:"× Ö´×™"},{heb:"×—Ö·",sound:"ach",speak:"×—Ö·"}]},
  {heb:"×ªÖ°Ö¼×¤Ö´×œÖ´Ö¼×™×Ÿ",sound:"t'fi-LIN",speak:"×ªÖ°Ö¼×¤Ö´×œÖ´Ö¼×™×Ÿ",syllables:[{heb:"×ªÖ°Ö¼",sound:"t'",speak:"×ªÖ°Ö¼"},{heb:"×¤Ö´",sound:"fi",speak:"×¤Ö´"},{heb:"×œÖ´Ö¼×™×Ÿ",sound:"LIN",speak:"×œÖ´Ö¼×™×Ÿ"}]}
])},
{category:"Blessings",name:"Shabbat Candle Blessing",hebrewName:"× Öµ×¨×•Ö¹×ª ×©Ö·××‘Ö¸Ö¼×ª",
 translation:"Blessed are You... who commanded us to light the Shabbat candles.",
 chunks:AQK([
  {heb:"×œÖ°×”Ö·×“Ö°×œÖ´×™×§",sound:"l'had-LIK",speak:"×œÖ°×”Ö·×“Ö°×œÖ´×™×§",syllables:[{heb:"×œÖ°×”Ö·×“",sound:"l'had",speak:"×œÖ°×”Ö·×“"},{heb:"×œÖ´×™×§",sound:"LIK",speak:"×œÖ´×™×§"}]},
  {heb:"× Öµ×¨",sound:"ner",speak:"× Öµ×¨",syllables:[{heb:"× Öµ×¨",sound:"ner",speak:"× Öµ×¨"}]},
  {heb:"×©Ö¶××œ",sound:"shel",speak:"×©Ö¶××œ",syllables:[{heb:"×©Ö¶××œ",sound:"shel",speak:"×©Ö¶××œ"}]},
  {heb:"×©Ö·××‘Ö¸Ö¼×ª",sound:"sha-BAT",speak:"×©Ö·××‘Ö¸Ö¼×ª",syllables:[{heb:"×©Ö·×",sound:"sha",speak:"×©Ö·×"},{heb:"×‘Ö¸Ö¼×ª",sound:"BAT",speak:"×‘Ö¸Ö¼×ª"}]}
])},
// BAR MITZVAH
{category:"Bar Mitzvah",name:"Barchu â€” call to worship",hebrewName:"×‘Ö¸Ö¼×¨Ö°×›×•Ö¼",
 translation:"Bless the Lord who is blessed.",
 chunks:[
  {heb:"×‘Ö¸Ö¼×¨Ö°×›×•Ö¼",sound:"bar-KHU",speak:"×‘Ö¸Ö¼×¨Ö°×›×•Ö¼",syllables:[{heb:"×‘Ö¸Ö¼×¨",sound:"bar",speak:"×‘Ö¸Ö¼×¨"},{heb:"×›×•Ö¼",sound:"KHU",speak:"×›×•Ö¼"}]},
  {heb:"×Ö¶×ª",sound:"et",speak:"×Ö¶×ª",syllables:[{heb:"×Ö¶×ª",sound:"et",speak:"×Ö¶×ª"}]},
  AD(),
  {heb:"×”Ö·×Ö°×‘Ö¹×¨Ö¸×šÖ°",sound:"ha-m'vo-RAKH",speak:"×”Ö·×Ö°×‘Ö¹×¨Ö¸×šÖ°",syllables:[{heb:"×”Ö·×Ö°",sound:"ham",speak:"×”Ö·×Ö°"},{heb:"×‘Ö¹",sound:"vo",speak:"×‘Ö¹"},{heb:"×¨Ö¸×šÖ°",sound:"RAKH",speak:"×¨Ö¸×šÖ°"}]}
]},
{category:"Bar Mitzvah",name:"Torah Blessing â€” before reading",hebrewName:"×‘Ö´Ö¼×¨Ö°×›×•Ö¹×ª ×”Ö·×ªÖ¼×•Ö¹×¨Ö¸×” ×œÖ´×¤Ö°× Öµ×™",
 translation:"Bless the Lord who is blessed. Blessed is the Lord who is blessed forever and ever.",
 chunks:[
  {heb:"×‘Ö¸Ö¼×¨Ö°×›×•Ö¼",sound:"bar-KHU",speak:"×‘Ö¸Ö¼×¨Ö°×›×•Ö¼",syllables:[{heb:"×‘Ö¸Ö¼×¨",sound:"bar",speak:"×‘Ö¸Ö¼×¨"},{heb:"×›×•Ö¼",sound:"KHU",speak:"×›×•Ö¼"}]},
  {heb:"×Ö¶×ª",sound:"et",speak:"×Ö¶×ª",syllables:[{heb:"×Ö¶×ª",sound:"et",speak:"×Ö¶×ª"}]},
  AD(),
  {heb:"×”Ö·×Ö°×‘Ö¹×¨Ö¸×šÖ°",sound:"ha-m'vo-RAKH",speak:"×”Ö·×Ö°×‘Ö¹×¨Ö¸×šÖ°",syllables:[{heb:"×”Ö·×Ö°",sound:"ham",speak:"×”Ö·×Ö°"},{heb:"×‘Ö¹",sound:"vo",speak:"×‘Ö¹"},{heb:"×¨Ö¸×šÖ°",sound:"RAKH",speak:"×¨Ö¸×šÖ°"}]},
  {heb:"×‘Ö¸Ö¼×¨×•Ö¼×šÖ°",sound:"ba-RUKH",speak:"×‘Ö¸Ö¼×¨×•Ö¼×šÖ°",syllables:[{heb:"×‘Ö¸Ö¼",sound:"ba",speak:"×‘Ö¸Ö¼"},{heb:"×¨×•Ö¼×šÖ°",sound:"RUKH",speak:"×¨×•Ö¼×šÖ°"}]},
  AD(),
  {heb:"×”Ö·×Ö°×‘Ö¹×¨Ö¸×šÖ°",sound:"ha-m'vo-RAKH",speak:"×”Ö·×Ö°×‘Ö¹×¨Ö¸×šÖ°",syllables:[{heb:"×”Ö·×Ö°",sound:"ham",speak:"×”Ö·×Ö°"},{heb:"×‘Ö¹",sound:"vo",speak:"×‘Ö¹"},{heb:"×¨Ö¸×šÖ°",sound:"RAKH",speak:"×¨Ö¸×šÖ°"}]},
  {heb:"×œÖ°×¢×•Ö¹×œÖ¸×",sound:"l'o-LAM",speak:"×œÖ°×¢×•Ö¹×œÖ¸×",syllables:[{heb:"×œÖ°",sound:"l'",speak:"×œÖ°"},{heb:"×¢×•Ö¹",sound:"o",speak:"×¢×•Ö¹"},{heb:"×œÖ¸×",sound:"LAM",speak:"×œÖ¸×"}]},
  {heb:"×•Ö¸×¢Ö¶×“",sound:"va-ED",speak:"×•Ö¸×¢Ö¶×“",syllables:[{heb:"×•Ö¸",sound:"va",speak:"×•Ö¸"},{heb:"×¢Ö¶×“",sound:"ED",speak:"×¢Ö¶×“"}]}
]},
{category:"Bar Mitzvah",name:"Torah Blessing â€” after reading",hebrewName:"×‘Ö´Ö¼×¨Ö°×›Ö·Ö¼×ª ×”Ö·×ªÖ¼×•Ö¹×¨Ö¸×” ×Ö·×—Ö²×¨Öµ×™",
 translation:"Blessed are You... who gave us the Torah of truth and planted eternal life within us.",
 chunks:BaruchFormula([
  {heb:"×Ö²×©Ö¶××¨",sound:"a-SHER",speak:"×Ö²×©Ö¶××¨",syllables:[{heb:"×Ö²",sound:"a",speak:"×Ö²"},{heb:"×©Ö¶××¨",sound:"SHER",speak:"×©Ö¶××¨"}]},
  {heb:"× Ö¸×ªÖ·×Ÿ",sound:"na-TAN",speak:"× Ö¸×ªÖ·×Ÿ",syllables:[{heb:"× Ö¸",sound:"na",speak:"× Ö¸"},{heb:"×ªÖ·×Ÿ",sound:"TAN",speak:"×ªÖ·×Ÿ"}]},
  {heb:"×œÖ¸× ×•Ö¼",sound:"LA-nu",speak:"×œÖ¸× ×•Ö¼",syllables:[{heb:"×œÖ¸",sound:"LA",speak:"×œÖ¸"},{heb:"× ×•Ö¼",sound:"nu",speak:"× ×•Ö¼"}]},
  {heb:"×ªÖ¼×•Ö¹×¨Ö·×ª",sound:"to-RAT",speak:"×ªÖ¼×•Ö¹×¨Ö·×ª",syllables:[{heb:"×ªÖ¼×•Ö¹",sound:"to",speak:"×ªÖ¼×•Ö¹"},{heb:"×¨Ö·×ª",sound:"RAT",speak:"×¨Ö·×ª"}]},
  {heb:"×Ö±×Ö¶×ª",sound:"E-met",speak:"×Ö±×Ö¶×ª",syllables:[{heb:"×Ö±",sound:"E",speak:"×Ö±"},{heb:"×Ö¶×ª",sound:"met",speak:"×Ö¶×ª"}]}
])},
{category:"Bar Mitzvah",name:"Haftarah Blessing â€” before",hebrewName:"×”Ö·×¤Ö°×˜Ö¸×¨Ö¸×” ×œÖ´×¤Ö°× Öµ×™",
 translation:"Blessed are You... who chose good prophets and was pleased with their words.",
 chunks:BaruchFormula([
  {heb:"×Ö²×©Ö¶××¨",sound:"a-SHER",speak:"×Ö²×©Ö¶××¨",syllables:[{heb:"×Ö²",sound:"a",speak:"×Ö²"},{heb:"×©Ö¶××¨",sound:"SHER",speak:"×©Ö¶××¨"}]},
  {heb:"×‘Ö¸Ö¼×—Ö·×¨",sound:"ba-CHAR",speak:"×‘Ö¸Ö¼×—Ö·×¨",syllables:[{heb:"×‘Ö¸Ö¼",sound:"ba",speak:"×‘Ö¸Ö¼"},{heb:"×—Ö·×¨",sound:"CHAR",speak:"×—Ö·×¨"}]},
  {heb:"×‘Ö´Ö¼× Ö°×‘Ö´×™×Ö´×™×",sound:"bin-vi-IM",speak:"×‘Ö´Ö¼× Ö°×‘Ö´×™×Ö´×™×",syllables:[{heb:"×‘Ö´Ö¼× Ö°",sound:"bin",speak:"×‘Ö´Ö¼× Ö°"},{heb:"×‘Ö´×™",sound:"vi",speak:"×‘Ö´×™"},{heb:"×Ö´×™×",sound:"IM",speak:"×Ö´×™×"}]},
  {heb:"×˜×•Ö¹×‘Ö´×™×",sound:"to-VIM",speak:"×˜×•Ö¹×‘Ö´×™×",syllables:[{heb:"×˜×•Ö¹",sound:"to",speak:"×˜×•Ö¹"},{heb:"×‘Ö´×™×",sound:"VIM",speak:"×‘Ö´×™×"}]}
])},
{category:"Bar Mitzvah",name:"Haftarah Blessing â€” after",hebrewName:"×”Ö·×¤Ö°×˜Ö¸×¨Ö¸×” ×Ö·×—Ö²×¨Öµ×™",
 translation:"Blessed are You... the God of faithfulness, faithful in all His words.",
 chunks:BaruchFormula([
  {heb:"×”Ö¸×Öµ×œ",sound:"ha-EL",speak:"×”Ö¸×Öµ×œ",syllables:[{heb:"×”Ö¸",sound:"ha",speak:"×”Ö¸"},{heb:"×Öµ×œ",sound:"EL",speak:"×Öµ×œ"}]},
  {heb:"×”Ö·× Ö¶Ö¼×Ö±×Ö¸×Ÿ",sound:"ha-ne-e-MAN",speak:"×”Ö·× Ö¶Ö¼×Ö±×Ö¸×Ÿ",syllables:[{heb:"×”Ö·× Ö¶Ö¼",sound:"ha-ne",speak:"×”Ö·× Ö¶Ö¼"},{heb:"×Ö±×Ö¸×Ÿ",sound:"e-MAN",speak:"×Ö±×Ö¸×Ÿ"}]},
  {heb:"×‘Ö°Ö¼×›Ö¸×œ",sound:"b'khol",speak:"×‘Ö°Ö¼×›Ö¸×œ",syllables:[{heb:"×‘Ö°Ö¼",sound:"b'",speak:"×‘Ö°Ö¼"},{heb:"×›Ö¸×œ",sound:"khol",speak:"×›Ö¸×œ"}]},
  {heb:"×“Ö°Ö¼×‘Ö¸×¨Ö¸×™×•",sound:"d'va-RAV",speak:"×“Ö°Ö¼×‘Ö¸×¨Ö¸×™×•",syllables:[{heb:"×“Ö°Ö¼",sound:"d'",speak:"×“Ö°Ö¼"},{heb:"×‘Ö¸×¨Ö¸×™×•",sound:"va-RAV",speak:"×‘Ö¸×¨Ö¸×™×•"}]}
])},
// PRAYERS
{category:"Prayers",name:"Ein Keloheinu â€” none like our God",hebrewName:"×Öµ×™×Ÿ ×›ÖµÖ¼××œÖ¹×”Öµ×™× ×•Ö¼",
 translation:"There is none like our God, none like our Lord, none like our King, none like our Savior.",
 chunks:[
  {heb:"×Öµ×™×Ÿ",sound:"ein",speak:"×Öµ×™×Ÿ",syllables:[{heb:"×Öµ×™×Ÿ",sound:"ein",speak:"×Öµ×™×Ÿ"}]},
  {heb:"×›ÖµÖ¼××œÖ¹×”Öµ×™× ×•Ö¼",sound:"ke-e-lo-HEI-nu",speak:"×›ÖµÖ¼××œÖ¹×”Öµ×™× ×•Ö¼",syllables:[{heb:"×›ÖµÖ¼",sound:"ke",speak:"×›ÖµÖ¼"},{heb:"×Ö±",sound:"e",speak:"×Ö±"},{heb:"×œÖ¹×”Öµ×™",sound:"lo-HEI",speak:"×œÖ¹×”Öµ×™"},{heb:"× ×•Ö¼",sound:"nu",speak:"× ×•Ö¼"}]},
  {heb:"×Öµ×™×Ÿ",sound:"ein",speak:"×Öµ×™×Ÿ",syllables:[{heb:"×Öµ×™×Ÿ",sound:"ein",speak:"×Öµ×™×Ÿ"}]},
  {heb:"×›Ö·Ö¼××“Ö¹× Öµ×™× ×•Ö¼",sound:"ka-a-do-NEI-nu",speak:"×›Ö·Ö¼××“Ö¹× Öµ×™× ×•Ö¼",syllables:[{heb:"×›Ö·Ö¼",sound:"ka",speak:"×›Ö·Ö¼"},{heb:"×Ö²×“Ö¹",sound:"a-do",speak:"×Ö²×“Ö¹"},{heb:"× Öµ×™× ×•Ö¼",sound:"NEI-nu",speak:"× Öµ×™× ×•Ö¼"}]},
  {heb:"×Öµ×™×Ÿ",sound:"ein",speak:"×Öµ×™×Ÿ",syllables:[{heb:"×Öµ×™×Ÿ",sound:"ein",speak:"×Öµ×™×Ÿ"}]},
  {heb:"×›Ö°Ö¼×Ö·×œÖ°×›ÖµÖ¼× ×•Ö¼",sound:"k'mal-KEI-nu",speak:"×›Ö°Ö¼×Ö·×œÖ°×›ÖµÖ¼× ×•Ö¼",syllables:[{heb:"×›Ö°Ö¼",sound:"k'",speak:"×›Ö°Ö¼"},{heb:"×Ö·×œ",sound:"mal",speak:"×Ö·×œ"},{heb:"×›ÖµÖ¼× ×•Ö¼",sound:"KEI-nu",speak:"×›ÖµÖ¼× ×•Ö¼"}]},
  {heb:"×Öµ×™×Ÿ",sound:"ein",speak:"×Öµ×™×Ÿ",syllables:[{heb:"×Öµ×™×Ÿ",sound:"ein",speak:"×Öµ×™×Ÿ"}]},
  {heb:"×›Ö°Ö¼××•Ö¹×©Ö´××™×¢Öµ× ×•Ö¼",sound:"k'mo-shi-EI-nu",speak:"×›Ö°Ö¼××•Ö¹×©Ö´××™×¢Öµ× ×•Ö¼",syllables:[{heb:"×›Ö°Ö¼",sound:"k'",speak:"×›Ö°Ö¼"},{heb:"××•Ö¹",sound:"mo",speak:"××•Ö¹"},{heb:"×©Ö´××™",sound:"shi",speak:"×©Ö´××™"},{heb:"×¢Öµ× ×•Ö¼",sound:"EI-nu",speak:"×¢Öµ× ×•Ö¼"}]}
]},
{category:"Prayers",name:"Oseh Shalom â€” may He make peace",hebrewName:"×¢Ö¹×©Ö¶×‚×” ×©Ö¸××œ×•Ö¹×",
 translation:"May He who makes peace in His high places make peace for us and for all Israel.",
 chunks:[
  {heb:"×¢Ö¹×©Ö¶×‚×”",sound:"o-SEH",speak:"×¢Ö¹×©Ö¶×‚×”",syllables:[{heb:"×¢Ö¹",sound:"o",speak:"×¢Ö¹"},{heb:"×©Ö¶×‚×”",sound:"SEH",speak:"×©Ö¶×‚×”"}]},
  {heb:"×©Ö¸××œ×•Ö¹×",sound:"sha-LOM",speak:"×©Ö¸××œ×•Ö¹×",syllables:[{heb:"×©Ö¸×",sound:"sha",speak:"×©Ö¸×"},{heb:"×œ×•Ö¹×",sound:"LOM",speak:"×œ×•Ö¹×"}]},
  {heb:"×‘Ö´Ö¼×Ö°×¨×•Ö¹×Ö¸×™×•",sound:"bim-ro-MAV",speak:"×‘Ö´Ö¼×Ö°×¨×•Ö¹×Ö¸×™×•",syllables:[{heb:"×‘Ö´Ö¼×Ö°",sound:"bim",speak:"×‘Ö´Ö¼×Ö°"},{heb:"×¨×•Ö¹",sound:"ro",speak:"×¨×•Ö¹"},{heb:"×Ö¸×™×•",sound:"MAV",speak:"×Ö¸×™×•"}]},
  {heb:"×”×•Ö¼×",sound:"HU",speak:"×”×•Ö¼×",syllables:[{heb:"×”×•Ö¼×",sound:"HU",speak:"×”×•Ö¼×"}]},
  {heb:"×™Ö·×¢Ö²×©Ö¶×‚×”",sound:"ya-a-SEH",speak:"×™Ö·×¢Ö²×©Ö¶×‚×”",syllables:[{heb:"×™Ö·",sound:"ya",speak:"×™Ö·"},{heb:"×¢Ö²",sound:"a",speak:"×¢Ö²"},{heb:"×©Ö¶×‚×”",sound:"SEH",speak:"×©Ö¶×‚×”"}]},
  {heb:"×©Ö¸××œ×•Ö¹×",sound:"sha-LOM",speak:"×©Ö¸××œ×•Ö¹×",syllables:[{heb:"×©Ö¸×",sound:"sha",speak:"×©Ö¸×"},{heb:"×œ×•Ö¹×",sound:"LOM",speak:"×œ×•Ö¹×"}]},
  {heb:"×¢Ö¸×œÖµ×™× ×•Ö¼",sound:"a-LEI-nu",speak:"×¢Ö¸×œÖµ×™× ×•Ö¼",syllables:[{heb:"×¢Ö¸",sound:"a",speak:"×¢Ö¸"},{heb:"×œÖµ×™",sound:"LEI",speak:"×œÖµ×™"},{heb:"× ×•Ö¼",sound:"nu",speak:"× ×•Ö¼"}]},
  {heb:"×•Ö°×¢Ö·×œ",sound:"v'al",speak:"×•Ö°×¢Ö·×œ",syllables:[{heb:"×•Ö°",sound:"v'",speak:"×•Ö°"},{heb:"×¢Ö·×œ",sound:"al",speak:"×¢Ö·×œ"}]},
  {heb:"×›Ö¸Ö¼×œ",sound:"kol",speak:"×›Ö¸Ö¼×œ",syllables:[{heb:"×›Ö¸Ö¼×œ",sound:"kol",speak:"×›Ö¸Ö¼×œ"}]},
  {heb:"×™Ö´×©Ö°×‚×¨Ö¸×Öµ×œ",sound:"yis-ra-EL",speak:"×™Ö´×©Ö°×‚×¨Ö¸×Öµ×œ",syllables:[{heb:"×™Ö´×©Ö°×‚",sound:"yis",speak:"×™Ö´×©Ö°×‚"},{heb:"×¨Ö¸",sound:"ra",speak:"×¨Ö¸"},{heb:"×Öµ×œ",sound:"EL",speak:"×Öµ×œ"}]}
]},
{category:"Prayers",name:"Ashrei â€” happy are those who dwell",hebrewName:"×Ö·×©Ö°××¨Öµ×™",
 translation:"Happy are those who dwell in Your house; they shall praise You forever.",
 chunks:[
  {heb:"×Ö·×©Ö°××¨Öµ×™",sound:"ash-REI",speak:"×Ö·×©Ö°××¨Öµ×™",syllables:[{heb:"×Ö·×©Ö°×",sound:"ash",speak:"×Ö·×©Ö°×"},{heb:"×¨Öµ×™",sound:"REI",speak:"×¨Öµ×™"}]},
  {heb:"×™×•Ö¹×©Ö°××‘Öµ×™",sound:"yosh-VEI",speak:"×™×•Ö¹×©Ö°××‘Öµ×™",syllables:[{heb:"×™×•Ö¹×©Ö°×",sound:"yosh",speak:"×™×•Ö¹×©Ö°×"},{heb:"×‘Öµ×™",sound:"VEI",speak:"×‘Öµ×™"}]},
  {heb:"×‘Öµ×™×ªÖ¶×šÖ¸",sound:"bei-TE-kha",speak:"×‘Öµ×™×ªÖ¶×šÖ¸",syllables:[{heb:"×‘Öµ×™",sound:"bei",speak:"×‘Öµ×™"},{heb:"×ªÖ¶",sound:"TE",speak:"×ªÖ¶"},{heb:"×šÖ¸",sound:"kha",speak:"×šÖ¸"}]},
  {heb:"×¢×•Ö¹×“",sound:"od",speak:"×¢×•Ö¹×“",syllables:[{heb:"×¢×•Ö¹×“",sound:"od",speak:"×¢×•Ö¹×“"}]},
  {heb:"×™Ö°×”Ö·×œÖ°×œ×•Ö¼×šÖ¸",sound:"y'ha-l'LU-kha",speak:"×™Ö°×”Ö·×œÖ°×œ×•Ö¼×šÖ¸",syllables:[{heb:"×™Ö°×”Ö·×œ",sound:"y'hal",speak:"×™Ö°×”Ö·×œ"},{heb:"×œ×•Ö¼",sound:"LU",speak:"×œ×•Ö¼"},{heb:"×šÖ¸",sound:"kha",speak:"×šÖ¸"}]},
  {heb:"×¡Ö¶×œÖ¸×”",sound:"SE-lah",speak:"×¡Ö¶×œÖ¸×”",syllables:[{heb:"×¡Ö¶",sound:"SE",speak:"×¡Ö¶"},{heb:"×œÖ¸×”",sound:"lah",speak:"×œÖ¸×”"}]}
]},
{category:"Prayers",name:"L'cha Dodi â€” welcoming Shabbat",hebrewName:"×œÖ°×›Ö¸×” ×“Ö¼×•Ö¹×“Ö´×™",
 translation:"Come my beloved to greet the bride, let us welcome the Sabbath.",
 chunks:[
  {heb:"×œÖ°×›Ö¸×”",sound:"l'KHA",speak:"×œÖ°×›Ö¸×”",syllables:[{heb:"×œÖ°",sound:"l'",speak:"×œÖ°"},{heb:"×›Ö¸×”",sound:"KHA",speak:"×›Ö¸×”"}]},
  {heb:"×“Ö¼×•Ö¹×“Ö´×™",sound:"do-DI",speak:"×“Ö¼×•Ö¹×“Ö´×™",syllables:[{heb:"×“Ö¼×•Ö¹",sound:"do",speak:"×“Ö¼×•Ö¹"},{heb:"×“Ö´×™",sound:"DI",speak:"×“Ö´×™"}]},
  {heb:"×œÖ´×§Ö°×¨Ö·××ª",sound:"lik-RAT",speak:"×œÖ´×§Ö°×¨Ö·××ª",syllables:[{heb:"×œÖ´×§Ö°",sound:"lik",speak:"×œÖ´×§Ö°"},{heb:"×¨Ö·××ª",sound:"RAT",speak:"×¨Ö·××ª"}]},
  {heb:"×›Ö·Ö¼×œÖ¸Ö¼×”",sound:"ka-LAH",speak:"×›Ö·Ö¼×œÖ¸Ö¼×”",syllables:[{heb:"×›Ö·Ö¼",sound:"ka",speak:"×›Ö·Ö¼"},{heb:"×œÖ¸Ö¼×”",sound:"LAH",speak:"×œÖ¸Ö¼×”"}]},
  {heb:"×¤Ö°Ö¼× Öµ×™",sound:"p'NEI",speak:"×¤Ö°Ö¼× Öµ×™",syllables:[{heb:"×¤Ö°Ö¼",sound:"p'",speak:"×¤Ö°Ö¼"},{heb:"× Öµ×™",sound:"NEI",speak:"× Öµ×™"}]},
  {heb:"×©Ö·××‘Ö¸Ö¼×ª",sound:"sha-BAT",speak:"×©Ö·××‘Ö¸Ö¼×ª",syllables:[{heb:"×©Ö·×",sound:"sha",speak:"×©Ö·×"},{heb:"×‘Ö¸Ö¼×ª",sound:"BAT",speak:"×‘Ö¸Ö¼×ª"}]},
  {heb:"× Ö°×§Ö·×‘Ö°Ö¼×œÖ¸×”",sound:"n'ka-b'LAH",speak:"× Ö°×§Ö·×‘Ö°Ö¼×œÖ¸×”",syllables:[{heb:"× Ö°",sound:"n'",speak:"× Ö°"},{heb:"×§Ö·×‘",sound:"kav",speak:"×§Ö·×‘"},{heb:"×‘Ö°Ö¼×œÖ¸×”",sound:"b'LAH",speak:"×‘Ö°Ö¼×œÖ¸×”"}]}
]},
{category:"Prayers",name:"Havdalah â€” end of Shabbat",hebrewName:"×”Ö·×‘Ö°×“Ö¸Ö¼×œÖ¸×”",
 translation:"Blessed are You... who separates between holy and ordinary.",
 chunks:BaruchFormula([
  {heb:"×”Ö·×Ö·Ö¼×‘Ö°×“Ö´Ö¼×™×œ",sound:"ha-mav-DIL",speak:"×”Ö·×Ö·Ö¼×‘Ö°×“Ö´Ö¼×™×œ",syllables:[{heb:"×”Ö·×Ö·Ö¼×‘",sound:"ha-mav",speak:"×”Ö·×Ö·Ö¼×‘"},{heb:"×“Ö´Ö¼×™×œ",sound:"DIL",speak:"×“Ö´Ö¼×™×œ"}]},
  {heb:"×‘ÖµÖ¼×™×Ÿ",sound:"bein",speak:"×‘ÖµÖ¼×™×Ÿ",syllables:[{heb:"×‘ÖµÖ¼×™×Ÿ",sound:"bein",speak:"×‘ÖµÖ¼×™×Ÿ"}]},
  {heb:"×§Ö¹×“Ö¶×©×",sound:"KO-desh",speak:"×§Ö¹×“Ö¶×©×",syllables:[{heb:"×§Ö¹",sound:"KO",speak:"×§Ö¹"},{heb:"×“Ö¶×©×",sound:"desh",speak:"×“Ö¶×©×"}]},
  {heb:"×œÖ°×—Ö¹×œ",sound:"l'KHOL",speak:"×œÖ°×—Ö¹×œ",syllables:[{heb:"×œÖ°",sound:"l'",speak:"×œÖ°"},{heb:"×—Ö¹×œ",sound:"KHOL",speak:"×—Ö¹×œ"}]}
])},
// HOLIDAYS
{category:"Holidays",name:"Hanukkah Candle Blessing",hebrewName:"×—Ö²× ×•Ö¼×›Ö¸Ö¼×”",
 translation:"Blessed are You... who commanded us to light the Hanukkah candle.",
 chunks:AQK([
  {heb:"×œÖ°×”Ö·×“Ö°×œÖ´×™×§",sound:"l'had-LIK",speak:"×œÖ°×”Ö·×“Ö°×œÖ´×™×§",syllables:[{heb:"×œÖ°×”Ö·×“",sound:"l'had",speak:"×œÖ°×”Ö·×“"},{heb:"×œÖ´×™×§",sound:"LIK",speak:"×œÖ´×™×§"}]},
  {heb:"× Öµ×¨",sound:"ner",speak:"× Öµ×¨",syllables:[{heb:"× Öµ×¨",sound:"ner",speak:"× Öµ×¨"}]},
  {heb:"×©Ö¶××œ",sound:"shel",speak:"×©Ö¶××œ",syllables:[{heb:"×©Ö¶××œ",sound:"shel",speak:"×©Ö¶××œ"}]},
  {heb:"×—Ö²× ×•Ö¼×›Ö¸Ö¼×”",sound:"cha-nu-KAH",speak:"×—Ö²× ×•Ö¼×›Ö¸Ö¼×”",syllables:[{heb:"×—Ö²",sound:"cha",speak:"×—Ö²"},{heb:"× ×•Ö¼",sound:"nu",speak:"× ×•Ö¼"},{heb:"×›Ö¸Ö¼×”",sound:"KAH",speak:"×›Ö¸Ö¼×”"}]}
])},
{category:"Holidays",name:"Shehecheyanu (Holidays version)",hebrewName:"×©Ö¶××”Ö¶×—Ö±×™Ö¸× ×•Ö¼ (×—Ö·×’Ö´Ö¼×™×)",
 translation:"We recite Shehecheyanu on Jewish holidays to give thanks for the season.",
 chunks:BaruchFormula([
  {heb:"×©Ö¶××”Ö¶×—Ö±×™Ö¸× ×•Ö¼",sound:"she-he-che-YA-nu",speak:"×©Ö¶××”Ö¶×—Ö±×™Ö¸× ×•Ö¼",syllables:[{heb:"×©Ö¶×",sound:"she",speak:"×©Ö¶×"},{heb:"×”Ö¶",sound:"he",speak:"×”Ö¶"},{heb:"×—Ö±",sound:"che",speak:"×—Ö±"},{heb:"×™Ö¸",sound:"YA",speak:"×™Ö¸"},{heb:"× ×•Ö¼",sound:"nu",speak:"× ×•Ö¼"}]},
  {heb:"×•Ö°×§Ö´×™Ö°Ö¼×Ö¸× ×•Ö¼",sound:"v'ki-MA-nu",speak:"×•Ö°×§Ö´×™Ö°Ö¼×Ö¸× ×•Ö¼",syllables:[{heb:"×•Ö°×§Ö´×™",sound:"v'ki",speak:"×•Ö°×§Ö´×™"},{heb:"×Ö¸",sound:"MA",speak:"×Ö¸"},{heb:"× ×•Ö¼",sound:"nu",speak:"× ×•Ö¼"}]},
  {heb:"×•Ö°×”Ö´×’Ö´Ö¼×™×¢Ö¸× ×•Ö¼",sound:"v'hi-gi-A-nu",speak:"×•Ö°×”Ö´×’Ö´Ö¼×™×¢Ö¸× ×•Ö¼",syllables:[{heb:"×•Ö°×”Ö´",sound:"v'hi",speak:"×•Ö°×”Ö´"},{heb:"×’Ö´Ö¼×™",sound:"gi",speak:"×’Ö´Ö¼×™"},{heb:"×¢Ö¸",sound:"A",speak:"×¢Ö¸"},{heb:"× ×•Ö¼",sound:"nu",speak:"× ×•Ö¼"}]},
  {heb:"×œÖ·×–Ö°Ö¼×Ö·×Ÿ",sound:"laz-MAN",speak:"×œÖ·×–Ö°Ö¼×Ö·×Ÿ",syllables:[{heb:"×œÖ·×–Ö°Ö¼",sound:"laz",speak:"×œÖ·×–Ö°Ö¼"},{heb:"×Ö·×Ÿ",sound:"MAN",speak:"×Ö·×Ÿ"}]},
  {heb:"×”Ö·×–Ö¶Ö¼×”",sound:"ha-ZEH",speak:"×”Ö·×–Ö¶Ö¼×”",syllables:[{heb:"×”Ö·",sound:"ha",speak:"×”Ö·"},{heb:"×–Ö¶Ö¼×”",sound:"ZEH",speak:"×–Ö¶Ö¼×”"}]}
])},
];
// ===================================================================
// TTS
// ===================================================================
let hebrewVoice=null;
function initTTS(){
  if(!window.speechSynthesis){const n=document.getElementById('ttsNote');if(n)n.textContent='âš ï¸ No speech support. Try Chrome.';return;}
  function load(){
    const v=speechSynthesis.getVoices();
    hebrewVoice=v.find(x=>x.lang&&x.lang.startsWith('he'))||null;
    const n=document.getElementById('ttsNote');
    if(n){if(hebrewVoice){n.textContent='âœ… Hebrew voice: '+hebrewVoice.name;n.style.color='#2ecc71';}
    else{n.textContent='âš ï¸ No Hebrew voice found. Install Hebrew TTS on device for best results.';n.style.color='#e67e22';}}
  }
  if(speechSynthesis.getVoices().length)load();
  else speechSynthesis.addEventListener('voiceschanged',load);
}
function speakHeb(text,rate=0.78){
  if(!window.speechSynthesis)return;
  const t=text==='×™Ö°×”×•Ö¸×”'?'×Ö²×“Ö¹× Ö¸×™':text;
  speechSynthesis.cancel();
  setTimeout(()=>{
    speechSynthesis.resume();
    const u=new SpeechSynthesisUtterance(t);
    u.lang='he-IL';u.rate=rate;
    if(hebrewVoice)u.voice=hebrewVoice;
    speechSynthesis.speak(u);
  },80);
}
function speakUtt(u){return new Promise((res,rej)=>{u.onend=res;u.onerror=rej;speechSynthesis.speak(u);});}

// ===================================================================
// UNIFIED PLAYER
// items: [{heb, sound, speak, syllables:[{heb,sound,speak}]}]
// ===================================================================
function createPlayer(items,cid,translation){
  const flat=[];
  items.forEach((item,wi)=>{
    (item.syllables||[{heb:item.heb,sound:item.sound,speak:item.speak||item.heb}]).forEach((s,si)=>{
      flat.push({wordIdx:wi,sylIdx:si,heb:s.heb,sound:s.sound,speak:s.speak||s.heb});
    });
  });
  const colors=items.map((_,i)=>SYL_COLORS[i%SYL_COLORS.length]);
  const sw=items.length===1;
  const container=document.getElementById(cid);
  if(!container)return;

  container.innerHTML=`
    <div class="hplayer">
      <div class="hstage">
        <div class="hstage-text${sw?' sw':''}" id="${cid}_stage"></div>
        ${translation?`<div class="engline">${translation}</div>`:''}
      </div>
      <div class="pron-strip" id="${cid}_pron"></div>
      <div class="mtoggle">
        <button class="mtbtn" id="${cid}_ms" onclick="setMode('${cid}','syl')">&#128300; By Syllable</button>
        <button class="mtbtn active" id="${cid}_mw" onclick="setMode('${cid}','word')">&#128214; By Word</button>
      </div>
      <div class="pcontrols">
        <button class="cb te" onclick="pStep('${cid}',-1)">&#9198; Back</button>
        <button class="cb bl" id="${cid}_pp" onclick="pPlayPause('${cid}')">&#9654; Play</button>
        <button class="cb pu" onclick="pStep('${cid}',1)">Next &#9197;</button>
        <button class="cb go" onclick="pReset('${cid}')">&#8635; Reset</button>
      </div>
      <div class="pctr" id="${cid}_ctr"></div>
    </div>`;

  container._p={items,flat,colors,cur:0,playing:false,mode:'word',timer:null,cid};
  buildStage(cid);

  // Pron chips â€” one per syllable
  const pron=document.getElementById(cid+'_pron');
  pron.innerHTML=flat.map((s,i)=>{
    const c=colors[s.wordIdx];
    return `<span class="pchip" id="${cid}_s${i}" style="border-color:${c};color:${c}" onclick="pClickSyl('${cid}',${i})">${s.sound}</span>`;
  }).join('');

  renderP(cid);ctr(cid);
}

// Rebuild stage spans based on mode
function buildStage(cid){
  const p=getP(cid);if(!p)return;
  const{items,flat,colors,mode}=p;
  const stage=document.getElementById(cid+'_stage');if(!stage)return;
  if(mode==='syl'){
    // One span per SYLLABLE â€” individual Hebrew chars light up
    stage.innerHTML=flat.map((s,i)=>{
      const c=colors[s.wordIdx];
      return `<span class="hsp" id="${cid}_sw${i}" style="color:${c}" onclick="pClickSyl('${cid}',${i})">${s.heb}</span>`;
    }).join('');
  }else{
    // One span per WORD
    stage.innerHTML=items.map((item,wi)=>
      `<span class="hsp" id="${cid}_ww${wi}" style="color:${colors[wi]}" onclick="pClickWordW('${cid}',${wi})">${item.heb}</span>`
    ).join('');
  }
}

function getP(cid){return document.getElementById(cid)?._p||null;}

function renderP(cid){
  const p=getP(cid);if(!p)return;
  const{items,flat,colors,cur,mode}=p;
  const curW=cur<flat.length?flat[cur].wordIdx:-1;

  if(mode==='syl'){
    flat.forEach((_,i)=>{
      const el=document.getElementById(cid+'_sw'+i);if(!el)return;
      el.classList.remove('sa','dim','done');
      if(i<cur)el.classList.add('done');
      else if(i===cur)el.classList.add('sa');
      else el.classList.add('dim');
    });
  }else{
    items.forEach((_,wi)=>{
      const el=document.getElementById(cid+'_ww'+wi);if(!el)return;
      el.classList.remove('wa','dim','done');
      if(wi<curW)el.classList.add('done');
      else if(wi===curW)el.classList.add('wa');
      else el.classList.add('dim');
    });
  }

  // Pron strip: only rebuild HTML when mode changes, otherwise just update classes
  const pronDiv=document.getElementById(cid+'_pron');
  if(pronDiv){
    const currentPronMode=pronDiv.dataset.mode;
    if(currentPronMode!==mode){
      // Rebuild chips for this mode
      pronDiv.dataset.mode=mode;
      if(mode==='syl'){
        pronDiv.innerHTML=flat.map((s,i)=>{
          const c=colors[s.wordIdx];
          return `<span class="pchip" id="${cid}_s${i}" style="border-color:${c};color:${c};direction:ltr;" onclick="pClickSyl('${cid}',${i})">${s.sound}</span>`;
        }).join('');
      }else{
        pronDiv.innerHTML=items.map((item,wi)=>{
          const c=colors[wi];
          return `<span class="pchip" id="${cid}_wc${wi}" style="border-color:${c};color:${c};font-size:.95em;padding:5px 14px;direction:ltr;" onclick="pClickWordW('${cid}',${wi})">${item.sound}</span>`;
        }).join('');
      }
    }
    // Now just update classes without rebuilding
    if(mode==='syl'){
      flat.forEach((s,i)=>{
        const el=document.getElementById(cid+'_s'+i);if(!el)return;
        el.classList.remove('sa','wa','done');
        if(i<cur)el.classList.add('done');
        else if(i===cur)el.classList.add('sa');
      });
    }else{
      items.forEach((_,wi)=>{
        const el=document.getElementById(cid+'_wc'+wi);if(!el)return;
        el.classList.remove('wa','done');
        if(wi<curW)el.classList.add('done');
        else if(wi===curW)el.classList.add('wa');
      });
    }
  }

  const ms=document.getElementById(cid+'_ms'),mw=document.getElementById(cid+'_mw');
  if(ms)ms.classList.toggle('active',mode==='syl');
  if(mw)mw.classList.toggle('active',mode==='word');
}
function ctr(cid){
  const p=getP(cid);if(!p)return;
  const el=document.getElementById(cid+'_ctr');if(!el)return;
  const{flat,cur,mode,items}=p;
  if(cur>=flat.length){el.textContent='âœ… Complete!';return;}
  const fs=flat[cur];
  if(mode==='syl'){
    el.textContent=`Syllable ${cur+1} / ${flat.length}  Â·  "${fs.sound}"`;
    el.style.fontSize='.86em';
  }else{
    const wi=fs.wordIdx;
    el.innerHTML=`Word ${wi+1} / ${items.length} &nbsp;Â·&nbsp; <span style="direction:rtl;font-size:1.1em;">${items[wi].heb}</span> &nbsp;=&nbsp; "${items[wi].sound}"`;
    el.style.fontSize='.9em';
  }
}
window.setMode=function(cid,mode){
  const p=getP(cid);if(!p)return;
  stopP(cid);
  p.mode=mode;
  // Force pron strip rebuild on next renderP
  const pd=document.getElementById(cid+'_pron');
  if(pd)pd.dataset.mode='';
  buildStage(cid);
  renderP(cid);
  ctr(cid);
};
window.pClickWordW=function(cid,wi){
  const p=getP(cid);if(!p)return;stopP(cid);
  const idx=p.flat.findIndex(s=>s.wordIdx===wi);
  if(idx>=0)p.cur=idx;
  speakHeb(p.items[wi].speak||p.items[wi].heb);
  renderP(cid);ctr(cid);
};
window.pClickWord=function(cid,wi){
  const p=getP(cid);if(!p)return;stopP(cid);
  const idx=p.flat.findIndex(s=>s.wordIdx===wi);
  if(idx>=0)p.cur=idx;
  speakHeb(p.items[wi].speak||p.items[wi].heb);
  renderP(cid);ctr(cid);
};
window.pClickSyl=function(cid,i){
  const p=getP(cid);if(!p)return;stopP(cid);
  p.cur=i;speakHeb(p.flat[i].speak);renderP(cid);ctr(cid);
};
window.pStep=function(cid,dir){
  const p=getP(cid);if(!p)return;stopP(cid);
  if(p.mode==='syl'){
    p.cur=Math.max(0,Math.min(p.flat.length-1,p.cur+dir));
    speakHeb(p.flat[p.cur].speak);
  }else{
    const curWi=p.flat[p.cur]?.wordIdx??0;
    const nwi=Math.max(0,Math.min(p.items.length-1,curWi+dir));
    const idx=p.flat.findIndex(s=>s.wordIdx===nwi);
    if(idx>=0)p.cur=idx;
    speakHeb(p.items[nwi].speak||p.items[nwi].heb);
  }
  renderP(cid);ctr(cid);
};
window.pReset=function(cid){const p=getP(cid);if(!p)return;stopP(cid);p.cur=0;renderP(cid);ctr(cid);};
window.pPlayPause=function(cid){const p=getP(cid);if(!p)return;if(p.playing)stopP(cid);else startP(cid);};
function stopP(cid){
  const p=getP(cid);if(!p)return;
  p.playing=false;
  try{speechSynthesis.cancel();}catch(e){}
  if(p.timer){clearTimeout(p.timer);p.timer=null;}
  const btn=document.getElementById(cid+'_pp');
  if(btn){btn.textContent='â–¶ Play';btn.classList.remove('rd');btn.classList.add('bl');}
}
async function startP(cid){
  const p=getP(cid);if(!p||!window.speechSynthesis)return;
  p.playing=true;
  const btn=document.getElementById(cid+'_pp');
  if(btn){btn.textContent='â¸ Pause';btn.classList.remove('bl');btn.classList.add('rd');}
  if(p.cur>=p.flat.length)p.cur=0;

  // Cancel any previous speech once before starting
  speechSynthesis.cancel();
  await new Promise(r=>setTimeout(r,120));

  while(p.playing){
    if(p.mode==='word'){
      const wi=p.flat[p.cur]?.wordIdx;
      if(wi===undefined||wi>=p.items.length)break;
      // Snap to first syllable of this word
      const firstSyl=p.flat.findIndex(s=>s.wordIdx===wi);
      if(firstSyl>=0)p.cur=firstSyl;
      renderP(cid);ctr(cid);
      // Speak the whole word
      const item=p.items[wi];
      const txt=(item.speak||item.heb)==='×™Ö°×”×•Ö¸×”'?'×Ö²×“Ö¹× Ö¸×™':(item.speak||item.heb);
      const u=new SpeechSynthesisUtterance(txt);
      u.lang='he-IL';u.rate=0.78;if(hebrewVoice)u.voice=hebrewVoice;
      speechSynthesis.resume();
      try{await speakUtt(u);}catch(e){break;}
      if(!p.playing)break;
      await new Promise(r=>setTimeout(r,480));
      if(!p.playing)break;
      // Advance cursor to next word
      const nextWi=wi+1;
      if(nextWi>=p.items.length){p.cur=p.flat.length;break;}
      const nextIdx=p.flat.findIndex(s=>s.wordIdx===nextWi);
      p.cur=nextIdx>=0?nextIdx:p.flat.length;
    }else{
      // Syllable mode
      if(p.cur>=p.flat.length)break;
      const fs=p.flat[p.cur];
      renderP(cid);ctr(cid);
      const t=fs.speak==='×™Ö°×”×•Ö¸×”'?'×Ö²×“Ö¹× Ö¸×™':fs.speak;
      const u=new SpeechSynthesisUtterance(t);
      u.lang='he-IL';u.rate=0.75;if(hebrewVoice)u.voice=hebrewVoice;
      speechSynthesis.resume();
      try{await speakUtt(u);}catch(e){break;}
      if(!p.playing)break;
      await new Promise(r=>setTimeout(r,220));
      if(!p.playing)break;
      p.cur++;
    }
  }

  if(p.playing){renderP(cid);ctr(cid);}
  stopP(cid);
}

// ===================================================================
// TROPE (CANTILLATION) ENGINE
// Notes: frequencies in Hz, Ashkenazi Haftarah mode (roughly D minor)
// ===================================================================
const NOTE={
  A3:220, B3:247, C4:262, D4:294, E4:330, F4:349, G4:392,
  A4:440, Bb4:466, B4:494, C5:523, D5:587, E5:659, F5:698, G5:784
};

// Each trope: {name, hebrew (with mark on bet), category, desc, notes:[{f,dur}]}
// dur in seconds, f in Hz. Ashkenazi Haftarah pentatonic-ish on D
const tropes=[
  {name:"Sof Pasuk",heb:"×‘Ö½",cat:"Pause",desc:"End of every verse â€” full stop.",
   notes:[{f:N('D4'),d:.18},{f:N('E4'),d:.14},{f:N('D4'),d:.14},{f:N('A3'),d:.44}]},
  {name:"Etnachta",heb:"×‘Ö½Ö‘",cat:"Pause",desc:"Major phrase break â€” half stop",
   notes:[{f:N('A4'),d:.15},{f:N('G4'),d:.15},{f:N('E4'),d:.15},{f:N('D4'),d:.15},{f:N('A3'),d:.3}]},
  {name:"Zakef Katan",heb:"×‘Ö½Ö”",cat:"Pause",desc:"Minor pause, common divider",
   notes:[{f:N('E4'),d:.15},{f:N('F4'),d:.15},{f:N('E4'),d:.25}]},
  {name:"Zakef Gadol",heb:"×‘Ö½Ö•",cat:"Pause",desc:"Stronger pause than Zakef Katan",
   notes:[{f:N('E4'),d:.12},{f:N('F4'),d:.12},{f:N('G4'),d:.12},{f:N('E4'),d:.28}]},
  {name:"Tipcha",heb:"×‘Ö½Ö–",cat:"Pause",desc:"Pre-pause servant, very common",
   notes:[{f:N('D4'),d:.18},{f:N('E4'),d:.22}]},
  {name:"Munach",heb:"×‘Ö½Ö£",cat:"Servant",desc:"Connecting/serving note",
   notes:[{f:N('D4'),d:.18},{f:N('C4'),d:.28}]},
  {name:"Mahpach",heb:"×‘Ö½Ö¤",cat:"Servant",desc:"Quick upward servant",
   notes:[{f:N('C4'),d:.12},{f:N('D4'),d:.12},{f:N('E4'),d:.2}]},
  {name:"Pashta",heb:"×‘Ö½Ö™",cat:"Servant",desc:"Ascending servant trope",
   notes:[{f:N('D4'),d:.12},{f:N('E4'),d:.12},{f:N('F4'),d:.22}]},
  {name:"Yetiv",heb:"×‘Ö½Öš",cat:"Servant",desc:"Pre-etnachta servant",
   notes:[{f:N('B3'),d:.12},{f:N('C4'),d:.12},{f:N('D4'),d:.25}]},
  {name:"Tevir",heb:"×‘Ö½Ö›",cat:"Servant",desc:"Servant before Etnachta",
   notes:[{f:N('E4'),d:.14},{f:N('D4'),d:.14},{f:N('C4'),d:.14},{f:N('D4'),d:.25}]},
  {name:"Geresh",heb:"×‘Ö½Öœ",cat:"Ruler",desc:"Rising ornamental ruler",
   notes:[{f:N('D4'),d:.1},{f:N('E4'),d:.1},{f:N('F4'),d:.1},{f:N('G4'),d:.1},{f:N('E4'),d:.22}]},
  {name:"Gershayim",heb:"×‘Ö½Ö",cat:"Ruler",desc:"Double geresh â€” emphatic rise",
   notes:[{f:N('D4'),d:.09},{f:N('F4'),d:.09},{f:N('D4'),d:.09},{f:N('F4'),d:.09},{f:N('G4'),d:.09},{f:N('E4'),d:.22}]},
  {name:"Mercha",heb:"×‘Ö½Ö¥",cat:"Servant",desc:"Smooth flowing connector",
   notes:[{f:N('C4'),d:.14},{f:N('D4'),d:.28}]},
  {name:"Darga",heb:"×‘Ö½Ö§",cat:"Servant",desc:"Trilling servant",
   notes:[{f:N('D4'),d:.1},{f:N('E4'),d:.1},{f:N('D4'),d:.1},{f:N('E4'),d:.24}]},
  {name:"Kadma",heb:"×‘Ö½Ö¨",cat:"Servant",desc:"Forward-moving servant",
   notes:[{f:N('E4'),d:.14},{f:N('F4'),d:.14},{f:N('D4'),d:.22}]},
  {name:"Telisha Ketana",heb:"×‘Ö½Ö©",cat:"Ruler",desc:"Small telisha ruler",
   notes:[{f:N('G4'),d:.12},{f:N('F4'),d:.12},{f:N('E4'),d:.12},{f:N('D4'),d:.25}]},
  {name:"Pazer",heb:"×‘Ö½Ö¡",cat:"Ruler",desc:"Strong emphatic ruler",
   notes:[{f:N('D4'),d:.1},{f:N('E4'),d:.1},{f:N('G4'),d:.1},{f:N('A4'),d:.1},{f:N('G4'),d:.1},{f:N('E4'),d:.25}]},
  {name:"Revia",heb:"×‘Ö½Ö—",cat:"Ruler",desc:"Common mid-phrase ruler",
   notes:[{f:N('E4'),d:.14},{f:N('D4'),d:.14},{f:N('E4'),d:.25}]},
];
function N(k){return NOTE[k]||440;}

let tropeAudioCtx=null;
let tropeSources=[];
let tropeLooping=false;
let currentTropeIdx=null;

async function getTropeCtx(){
  if(!tropeAudioCtx){
    tropeAudioCtx=new(window.AudioContext||window.webkitAudioContext)();
  }
  // Always resume â€” Safari starts suspended even after creation
  if(tropeAudioCtx.state==='suspended'||tropeAudioCtx.state==='interrupted'){
    await tropeAudioCtx.resume();
  }
  // iOS unlock: play a silent buffer to fully activate the context
  if(tropeAudioCtx._unlocked!==true){
    try{
      const buf=tropeAudioCtx.createBuffer(1,1,22050);
      const src=tropeAudioCtx.createBufferSource();
      src.buffer=buf;src.connect(tropeAudioCtx.destination);
      src.start(0);
      tropeAudioCtx._unlocked=true;
    }catch(e){}
  }
  return tropeAudioCtx;
}

async function playTropeNotes(notes, onEnd){
  stopTrope();
  const ctx=await getTropeCtx();
  // Small buffer after resume so Safari is ready
  await new Promise(r=>setTimeout(r,30));
  let t=ctx.currentTime+0.08;
  const dots=document.getElementById('tropeDots');

  notes.forEach((note,i)=>{
    const osc=ctx.createOscillator();
    const gain=ctx.createGain();
    osc.connect(gain);gain.connect(ctx.destination);
    osc.type='triangle'; // warmer than sine, more voice-like
    osc.frequency.setValueAtTime(note.f,t);
    // Slight vibrato for musical feel
    const lfo=ctx.createOscillator();
    const lfoGain=ctx.createGain();
    lfo.connect(lfoGain);lfoGain.connect(osc.frequency);
    lfo.frequency.value=5.5;lfoGain.gain.value=4;
    lfo.start(t);lfo.stop(t+note.d);
    // Envelope
    gain.gain.setValueAtTime(0,t);
    gain.gain.linearRampToValueAtTime(0.28,t+0.03);
    gain.gain.setValueAtTime(0.28,t+note.d-0.05);
    gain.gain.linearRampToValueAtTime(0,t+note.d);
    osc.start(t);osc.stop(t+note.d);
    tropeSources.push(osc);
    // Animate dot
    const delay=(t-ctx.currentTime)*1000;
    setTimeout(()=>{
      if(dots){
        dots.querySelectorAll('.tdot').forEach((d,j)=>d.classList.toggle('active',j===i));
      }
    },delay);
    t+=note.d+0.04;
  });

  // Return a Promise that resolves when all notes finish â€” needed for await/loop
  const totalDur=(t-ctx.currentTime)*1000;
  return new Promise(resolve=>{
    setTimeout(()=>{
      if(dots)dots.querySelectorAll('.tdot').forEach(d=>d.classList.remove('active'));
      if(onEnd)onEnd();
      resolve();
    },totalDur+80);
  });
}

window.playTrope=async function(){
  if(currentTropeIdx===null)return;
  tropeLooping=false;
  const btn=document.getElementById('tropeLoopBtn');
  if(btn){btn.textContent='ğŸ” Loop';btn.classList.remove('rd');btn.classList.add('go');}
  await playTropeNotes(tropes[currentTropeIdx].notes, null);
};

window.playTropeLoop=async function(){
  if(currentTropeIdx===null)return;
  tropeLooping=true;
  const btn=document.getElementById('tropeLoopBtn');
  if(btn){btn.textContent='â¹ Stop loop';btn.classList.remove('go');btn.classList.add('rd');}
  btn.onclick=()=>stopTrope();
  async function loop(){
    if(!tropeLooping)return;
    await playTropeNotes(tropes[currentTropeIdx].notes, null);
    if(tropeLooping)setTimeout(loop,400);
  }
  loop();
};

window.stopTrope=function(){
  tropeLooping=false;
  tropeSources.forEach(s=>{try{s.stop();}catch(e){}});
  tropeSources=[];
  const btn=document.getElementById('tropeLoopBtn');
  if(btn){btn.textContent='ğŸ” Loop';btn.classList.remove('rd');btn.classList.add('go');btn.onclick=()=>playTropeLoop();}
  const dots=document.getElementById('tropeDots');
  if(dots)dots.querySelectorAll('.tdot').forEach(d=>d.classList.remove('active'));
};

async function selectTrope(i){
  currentTropeIdx=i;
  const t=tropes[i];
  // Highlight card
  document.querySelectorAll('.tc').forEach((c,j)=>c.classList.toggle('sel',j===i));
  // Show player
  const player=document.getElementById('tropePlayer');
  if(player)player.style.display='block';
  const nm=document.getElementById('tropeName');
  if(nm)nm.textContent=t.name+' â€” '+t.cat;
  const sym=document.getElementById('tropeSymbol');
  if(sym)sym.textContent=t.heb;
  const desc=document.getElementById('tropeDesc');
  if(desc)desc.textContent=t.desc;
  // Build dot visualizer
  const dots=document.getElementById('tropeDots');
  if(dots){
    const colors=['#e74c3c','#e67e22','#f0c040','#27ae60','#3498db','#8e44ad','#e91e8c'];
    dots.innerHTML=t.notes.map((n,i)=>{
      const c=colors[i%colors.length];
      // Height represents pitch roughly
      const minF=180,maxF=800;
      const pct=(n.f-minF)/(maxF-minF);
      const size=10+Math.round(pct*12);
      return `<span class="tdot" style="background:${c};width:${size}px;height:${size}px;" title="${Math.round(n.f)}Hz"></span>`;
    }).join('');
  }
  // Auto-play â€” await so Safari unlocks context inside the tap handler
  await playTropeNotes(t.notes, null);
}

function buildTrope(){
  const g=document.getElementById('tropeGrid');if(!g)return;
  const catColors={Pause:'#e74c3c',Servant:'#3498db',Ruler:'#8e44ad'};
  tropes.forEach((t,i)=>{
    const c=document.createElement('div');
    c.className='tc';
    const cc=catColors[t.cat]||'#888';
    c.innerHTML=`<span class="tch">${t.heb}</span><span class="tcn">${t.name}</span><span class="tct" style="color:${cc}">${t.cat}</span>`;
    c.onclick=()=>selectTrope(i);
    g.appendChild(c);
  });
}

// ===================================================================
// BUILD LETTERS TAB
// ===================================================================
function buildLetters(){
  const g=document.getElementById('abGrid');
  alphabet.forEach(l=>{
    const c=document.createElement('div');
    c.className='lc';
    c.innerHTML=`<span class="lch">${l.heb}</span><span class="lcn">${l.name}</span><span class="lcs">${l.sound}</span>`;
    c.onclick=()=>{document.querySelectorAll('.lc').forEach(x=>x.classList.remove('sel'));c.classList.add('sel');speakHeb(l.speak||l.heb,0.6);};
    g.appendChild(c);
  });
  const vg=document.getElementById('vGrid');
  vowels.forEach(v=>{
    const c=document.createElement('div');
    c.className='vc';
    c.innerHTML=`<span class="vch">${v.heb}</span><span class="vcn">${v.name}</span><span class="vcs">"${v.sound}"</span>`;
    c.onclick=()=>speakHeb(v.heb,0.6);
    vg.appendChild(c);
  });
}

// ===================================================================
// BUILD WORD PRACTICE TAB
// ===================================================================
function buildWords(){
  const g=document.getElementById('wGrid');
  words.forEach((w,i)=>{
    const btn=document.createElement('button');
    btn.className='wbtn'+(i===0?' active':'');
    btn.style.direction='rtl';
    btn.style.fontSize='1.3em';
    btn.style.fontWeight='800';
    btn.style.padding='7px 16px';
    btn.textContent=w.hebrew;
    btn.onclick=()=>selectWord(i);
    g.appendChild(btn);
  });
  selectWord(0);
}
function selectWord(i){
  document.querySelectorAll('.wbtn').forEach((b,j)=>b.classList.toggle('active',j===i));
  const w=words[i];
  const items=w.syllables.map(s=>({
    heb:s.heb,sound:s.sound,speak:s.speak||s.heb,
    syllables:[{heb:s.heb,sound:s.sound,speak:s.speak||s.heb}]
  }));

  const wrap=document.getElementById('wPlayerWrap');
  wrap._pendingItems=items;
  wrap._word=w;

  // Fixed-height practice area â€” never jumps
  wrap.innerHTML=`
    <!-- Hebrew always centered and never moves -->
    <div style="text-align:center;margin-bottom:16px;">
      <div style="font-size:4.8em;font-weight:800;direction:rtl;color:var(--blue);letter-spacing:4px;line-height:1.2;">${w.hebrew}</div>
    </div>

    <!-- Reveal button centered below Hebrew -->
    <div style="text-align:center;margin-bottom:4px;">
      <button onclick="revealWord()" id="wRevealBtn" class="cb bl" style="padding:9px 22px;font-size:.92em;">ğŸ‘ Reveal</button>
    </div>

    <!-- Revealed content appears below, in same alignment -->
    <div id="wReveal" style="display:none;margin-top:14px;padding-top:14px;border-top:2px dashed #c5d8ff;">

      <div style="display:flex;align-items:baseline;justify-content:center;gap:16px;flex-wrap:wrap;margin-bottom:6px;">
        <span style="font-size:1.6em;font-weight:800;color:var(--lb);letter-spacing:2px;">${w.pronounce}</span>
        <span style="font-size:.95em;color:#aaa;font-weight:700;font-style:italic;">${w.english}</span>
      </div>

      <!-- Syllable chips centered -->
      <div style="display:flex;gap:8px;flex-wrap:wrap;justify-content:center;margin:12px 0;" id="wSylRow">
        ${w.syllables.map((s,si)=>`
          <span onclick="wPlaySyl(${si})" style="background:${SYL_COLORS[si%SYL_COLORS.length]}22;border:2px solid ${SYL_COLORS[si%SYL_COLORS.length]};color:${SYL_COLORS[si%SYL_COLORS.length]};border-radius:10px;padding:6px 14px;font-size:1.05em;font-weight:800;cursor:pointer;direction:rtl;transition:all .15s;" id="wsc_${si}">${s.heb} <span style="font-size:.75em;opacity:.8;">${s.sound}</span></span>
        `).join('')}
      </div>

      <!-- Play buttons centered -->
      <div style="display:flex;gap:8px;flex-wrap:wrap;justify-content:center;margin-bottom:10px;">
        <button class="cb te" onclick="wPlayWord()" style="padding:8px 18px;font-size:.88em;">ğŸ”Š Hear word</button>
        <button class="cb pu" onclick="wPlaySyllables()" style="padding:8px 18px;font-size:.88em;">ğŸ”¬ Step syllables</button>
      </div>
      <div class="tip" style="font-size:.82em;">${w.tip}</div>
    </div>`;
}

// Play the whole word via TTS
window.wPlayWord=function(){
  const w=document.getElementById('wPlayerWrap')?._word;
  if(w)speakHeb(w.hebrew);
};

// Animate through syllables one by one with TTS
window.wPlaySyllables=async function(){
  const wrap=document.getElementById('wPlayerWrap');
  if(!wrap||!wrap._word)return;
  const syls=wrap._word.syllables;
  for(let i=0;i<syls.length;i++){
    // Highlight current chip
    syls.forEach((_,j)=>{
      const el=document.getElementById('wsc_'+j);
      if(el)el.style.transform=j===i?'scale(1.18) translateY(-3px)':'scale(1)';
    });
    speakHeb(syls[i].speak||syls[i].heb,0.7);
    await new Promise(r=>setTimeout(r,700));
  }
  // Reset
  syls.forEach((_,j)=>{const el=document.getElementById('wsc_'+j);if(el)el.style.transform='scale(1)';});
};

// Play a single syllable on click
window.wPlaySyl=function(i){
  const wrap=document.getElementById('wPlayerWrap');
  if(!wrap||!wrap._word)return;
  const s=wrap._word.syllables[i];
  speakHeb(s.speak||s.heb,0.65);
  // Quick pulse
  const el=document.getElementById('wsc_'+i);
  if(el){
    el.style.transform='scale(1.2) translateY(-3px)';
    setTimeout(()=>el.style.transform='scale(1)',400);
  }
};

window.revealWord=function(){
  const reveal=document.getElementById('wReveal');
  const btn=document.getElementById('wRevealBtn');
  if(reveal)reveal.style.display='block';
  if(btn)btn.style.display='none';
};


// ===================================================================
// BUILD PRAYERS TAB
// ===================================================================
function buildPrayers(){
  const fd=document.getElementById('pFilters'),ld=document.getElementById('pList');
  const cats=['All',...new Set(prayers.map(p=>p.category))];
  const catColors={Daily:'#3498db',Blessings:'#27ae60','Bar Mitzvah':'#8e44ad',Prayers:'#e67e22',Holidays:'#e74c3c'};
  let active='All';
  cats.forEach(cat=>{
    const pill=document.createElement('button');
    pill.className='fpill'+(cat==='All'?' active':'');
    pill.textContent=cat;
    pill.onclick=()=>{active=cat;fd.querySelectorAll('.fpill').forEach(x=>x.classList.remove('active'));pill.classList.add('active');render();};
    fd.appendChild(pill);
  });
  function render(){
    ld.innerHTML='';
    const list=active==='All'?prayers:prayers.filter(p=>p.category===active);
    list.forEach((p,pi)=>{
      const card=document.createElement('div');
      card.className='pcard';
      const uid='pr_'+pi+'_'+p.category.replace(/\W/g,'');
      const cc=catColors[p.category]||'#888';
      const hdr=document.createElement('div');
      hdr.className='phdr';
      hdr.innerHTML=`<div class="phdr-left"><span class="pbadge" style="background:${cc}">${p.category}</span><span class="pname">${p.name}</span></div><span class="phname">${p.hebrewName}</span>`;
      const body=document.createElement('div');
      body.className='pbody';
      body.style.display='none';
      body.innerHTML=`<div id="${uid}_p"></div>`;
      let built=false;
      hdr.onclick=()=>{
        const wasOpen=card.classList.contains('open');
        ld.querySelectorAll('.pcard').forEach(c=>{c.classList.remove('open');c.querySelector('.pbody').style.display='none';});
        if(!wasOpen){
          card.classList.add('open');body.style.display='block';
          if(!built){createPlayer(p.chunks,uid+'_p',p.translation);built=true;}
        }
      };
      card.appendChild(hdr);card.appendChild(body);ld.appendChild(card);
    });
  }
  render();
}

// ===================================================================
// BUILD QUIZ
// ===================================================================
// ===================================================================
// ===================================================================
// QUIZ â€” recording + typed answer, 15 words, parent review
// ===================================================================
let QS={};
let mediaRecorder=null;
let audioChunks=[];
let recordingIdx=null;

function buildQuiz(){
  const c=document.getElementById('qContainer');
  c.innerHTML=`
    <div style="text-align:center;margin-bottom:18px;">
      <p style="color:#555;font-weight:600;margin-bottom:6px;">See the Hebrew word, hear it â€” then <strong>record yourself</strong> saying it and/or type how it sounds.</p>
      <p style="color:#888;font-size:.85em;font-weight:600;margin-bottom:16px;">A parent will review your recordings and answers at the end!</p>
      <button class="cb bl" onclick="startQuiz()" style="font-size:1.1em;padding:12px 32px;">ğŸ¯ Start Quiz â€” 15 Words</button>
    </div>
    <div id="qa"></div>`;
}

function startQuiz(){
  const pool=shuffle([...words]).slice(0,15);
  QS={pool,cur:0,answers:[],reviewing:false};
  renderQuizQ();
}

function shuffle(a){return[...a].sort(()=>Math.random()-.5);}

function renderQuizQ(){
  const{pool,cur}=QS;
  if(cur>=pool.length){showReview();return;}
  const w=pool[cur];
  const area=document.getElementById('qa');
  const pct=Math.round((cur/pool.length)*100);
  area.innerHTML=`
    <div class="qcard">
      <div class="qprog" style="margin-bottom:14px;">
        <div class="qpbar"><div class="qpfill" style="width:${pct}%"></div></div>
        <div class="qscore">${cur+1} / ${pool.length}</div>
      </div>

      <div style="text-align:center;margin-bottom:10px;">
        <div style="font-size:4.2em;font-weight:800;direction:rtl;color:var(--blue);letter-spacing:4px;">${w.hebrew}</div>
        <div style="font-size:.95em;color:#aaa;font-weight:700;margin-top:2px;">${w.english}</div>
      </div>



      <div style="display:flex;gap:14px;justify-content:center;flex-wrap:wrap;align-items:stretch;margin-bottom:16px;">

        <!-- RECORD BOX -->
        <div style="background:#f8f0ff;border:2px solid #d0aaff;border-radius:16px;padding:16px 18px;min-width:200px;text-align:center;flex:1;max-width:240px;" id="recBox">
          <div style="font-weight:800;color:#8e44ad;font-size:.88em;margin-bottom:10px;">ğŸ™ï¸ Record yourself</div>
          <button class="cb pu" id="recBtn" onclick="toggleRecord()" style="width:100%;padding:10px;">âº Record</button>
          <div id="recStatus" style="font-size:.78em;font-weight:700;color:#aaa;margin-top:8px;min-height:18px;"></div>
          <audio id="recPlayback" controls style="display:none;margin-top:10px;width:100%;height:36px;"></audio>
        </div>

        <!-- TYPE BOX -->
        <div style="background:#f0f6ff;border:2px solid #c5d8ff;border-radius:16px;padding:16px 18px;min-width:200px;text-align:center;flex:1;max-width:240px;">
          <div style="font-weight:800;color:var(--blue);font-size:.88em;margin-bottom:10px;">âœï¸ Type how it sounds</div>
          <input type="text" id="qinput" placeholder="e.g. sha-LOM" autocomplete="off" autocorrect="off" spellcheck="false"
            style="border:2px solid #c5d8ff;border-radius:12px;padding:10px 14px;font-size:1em;font-family:'Nunito',sans-serif;font-weight:700;color:var(--blue);width:100%;outline:none;transition:border .2s;box-sizing:border-box;"
            onkeydown="if(event.key==='Enter')submitQ()"
            onfocus="this.style.borderColor='var(--blue)'"
            onblur="this.style.borderColor='#c5d8ff'">
          <div style="font-size:.76em;color:#aaa;font-weight:600;margin-top:6px;">Optional â€” press Enter or Next</div>
        </div>

      </div>

      <div style="text-align:center;">
        <button class="cb bl" onclick="submitQ()" style="padding:11px 28px;font-size:1em;">Next â†’ </button>
        <div style="margin-top:8px;">
          <button onclick="skipQ()" style="background:none;border:none;color:#bbb;font-size:.82em;font-weight:700;cursor:pointer;text-decoration:underline;">Skip this word</button>
        </div>
      </div>
    </div>`;

  // Reset recorder state
  stopRecording(false);
  recordingIdx=cur;
  audioChunks=[];

  const inp=document.getElementById('qinput');
  if(inp)inp.focus();
}

function speakCurrent(){
  const w=QS.pool[QS.cur];
  speakHeb(w.hebrew);
}

// ---- RECORDING ----
function toggleRecord(){
  if(mediaRecorder&&mediaRecorder.state==='recording'){
    manualStop();
  }else{
    startRecording();
  }
}

// Called when user hits Stop manually
function manualStop(){
  if(autoStopTimer){clearInterval(autoStopTimer);autoStopTimer=null;}
  if(mediaRecorder&&mediaRecorder.state==='recording'){
    mediaRecorder.stop(); // onstop handler does the rest
  }
}

let autoStopTimer=null;

async function startRecording(){
  // Reset
  if(autoStopTimer){clearInterval(autoStopTimer);autoStopTimer=null;}
  audioChunks=[];

  const btn=document.getElementById('recBtn');
  const st=document.getElementById('recStatus');

  try{
    const stream=await navigator.mediaDevices.getUserMedia({audio:true});
    const mimeType=['audio/webm;codecs=opus','audio/webm','audio/ogg;codecs=opus','audio/mp4','audio/ogg'].find(t=>MediaRecorder.isTypeSupported(t))||'';
    mediaRecorder=new MediaRecorder(stream, mimeType?{mimeType}:{});

    mediaRecorder.ondataavailable=e=>{if(e.data.size>0)audioChunks.push(e.data);};

    mediaRecorder.onstop=()=>{
      // Always clear the auto-stop timer when recording ends
      if(autoStopTimer){clearInterval(autoStopTimer);autoStopTimer=null;}
      const mime=mediaRecorder.mimeType||mimeType||'audio/webm';
      const blob=new Blob(audioChunks,{type:mime});
      console.log('Recorded format:', mime, 'Blob size:', blob.size);
      const idx=QS.cur;
      if(!QS.answers[idx])QS.answers[idx]={};
      if(QS.answers[idx].audioUrl)URL.revokeObjectURL(QS.answers[idx].audioUrl);
      const url=URL.createObjectURL(blob);
      QS.answers[idx].audioUrl=url;
      const pb=document.getElementById('recPlayback');
      if(pb){pb.pause();pb.removeAttribute('src');pb.load();pb.src=url;pb.load();pb.style.display='block';}
      const s=document.getElementById('recStatus');
      if(s){s.textContent='âœ… Saved! Press play to hear it.';s.style.color='#27ae60';}
      const b=document.getElementById('recBtn');
      if(b){b.textContent='âº Re-record';b.disabled=false;b.classList.remove('rd');b.classList.add('pu');}
      stream.getTracks().forEach(t=>t.stop());
      stopRecordingPulse();
    };

    // Start recording immediately â€” no warmup delay (was causing short recordings)
    mediaRecorder.start(100);

    // Update button right away
    if(btn){btn.textContent='â¹ Stop (5s)';btn.disabled=false;btn.classList.remove('pu');btn.classList.add('rd');}
    if(st){st.textContent='ğŸ”´ Recording... 5s';st.style.color='var(--red)';}
    startRecordingPulse();

    // Countdown timer â€” fires every 1s, stops at 0
    const DURATION=5;
    let remaining=DURATION;
    autoStopTimer=setInterval(()=>{
      remaining--;
      const b=document.getElementById('recBtn');
      const s=document.getElementById('recStatus');
      if(remaining>0){
        if(b&&b.classList.contains('rd'))b.textContent='â¹ Stop ('+remaining+'s)';
        if(s)s.textContent='ğŸ”´ Recording... '+remaining+'s';
      }else{
        // Time's up â€” stop
        clearInterval(autoStopTimer);
        autoStopTimer=null;
        if(mediaRecorder&&mediaRecorder.state==='recording'){
          if(s){s.textContent='â³ Saving...';s.style.color='#888';}
          mediaRecorder.stop();
        }
      }
    },1000);

  }catch(err){
    if(st){st.textContent='âš ï¸ Mic not available: '+err.name;st.style.color='#e67e22';}
    console.warn('Mic error:',err);
  }
}

function stopRecording(save){
  if(autoStopTimer){clearInterval(autoStopTimer);autoStopTimer=null;}
  if(mediaRecorder&&mediaRecorder.state==='recording'){
    if(save){
      mediaRecorder.stop();
    }else{
      mediaRecorder.ondataavailable=null;
      mediaRecorder.onstop=null;
      try{mediaRecorder.stop();}catch(e){}
      stopRecordingPulse();
    }
  }
  mediaRecorder=null;
}

let pulseTimer=null;
function startRecordingPulse(){
  const box=document.getElementById('recBox');
  if(!box)return;
  let on=true;
  pulseTimer=setInterval(()=>{
    box.style.borderColor=on?'var(--red)':'#d0aaff';
    on=!on;
  },600);
}
function stopRecordingPulse(){
  clearInterval(pulseTimer);pulseTimer=null;
  const box=document.getElementById('recBox');
  if(box)box.style.borderColor='#d0aaff';
}

function submitQ(){
  stopRecording(mediaRecorder&&mediaRecorder.state==='recording');
  const input=document.getElementById('qinput');
  const val=(input?input.value:'').trim();
  const idx=QS.cur;
  if(!QS.answers[idx])QS.answers[idx]={};
  QS.answers[idx].typed=val||'';
  QS.answers[idx].word=QS.pool[idx];
  QS.cur++;
  renderQuizQ();
}

function skipQ(){
  stopRecording(false);
  const idx=QS.cur;
  if(!QS.answers[idx])QS.answers[idx]={};
  QS.answers[idx].typed='';
  QS.answers[idx].word=QS.pool[idx];
  QS.cur++;
  renderQuizQ();
}

// ---- REVIEW ----
function showReview(){
  const{answers,pool}=QS;
  // Ensure all entries have word ref
  pool.forEach((w,i)=>{if(!answers[i])answers[i]={word:w};else if(!answers[i].word)answers[i].word=w;});

  const area=document.getElementById('qa');
  const rows=answers.map((a,i)=>`
    <div id="rrow_${i}" style="border-radius:14px;border:2px solid #e0eaff;padding:12px 14px;margin-bottom:8px;background:white;transition:background .3s;">
      <div style="display:flex;align-items:center;gap:10px;flex-wrap:wrap;margin-bottom:8px;">
        <span style="font-size:2em;direction:rtl;font-weight:800;color:var(--blue);">${a.word.hebrew}</span>
        <div style="flex:1;">
          <div style="font-size:.82em;font-weight:800;color:var(--lb);">${a.word.pronounce}</div>
          <div style="font-size:.8em;color:#888;font-weight:600;">${a.word.english}</div>
        </div>

      </div>

      <div style="display:flex;gap:8px;flex-wrap:wrap;align-items:center;margin-bottom:10px;">
        ${a.audioUrl?`
          <div style="display:flex;align-items:center;gap:6px;background:#f8f0ff;border-radius:10px;padding:6px 10px;flex:1;">
            <span style="font-size:.78em;font-weight:800;color:#8e44ad;">ğŸ™ï¸ Recording:</span>
            <audio controls src="${a.audioUrl}" style="height:32px;flex:1;min-width:140px;"></audio>
          </div>` : `<div style="font-size:.78em;color:#ccc;font-weight:600;padding:4px 8px;">No recording</div>`}
        ${a.typed?`
          <div style="background:#f0f6ff;border-radius:10px;padding:6px 12px;">
            <span style="font-size:.78em;font-weight:800;color:var(--lb);">âœï¸ Typed: </span>
            <span style="font-size:.88em;font-weight:700;color:#333;">"${a.typed}"</span>
          </div>` : ''}
      </div>

      <div style="display:flex;gap:8px;">
        <button onclick="markQ(${i},true)" style="flex:1;background:#e8f8ee;border:2px solid #2ecc71;border-radius:10px;padding:7px;font-size:.85em;font-weight:800;color:#1a6b3a;cursor:pointer;">âœ“ Got it!</button>
        <button onclick="markQ(${i},false)" style="flex:1;background:#fee;border:2px solid var(--red);border-radius:10px;padding:7px;font-size:.85em;font-weight:800;color:#8b0000;cursor:pointer;">âœ— Keep practicing</button>
      </div>
    </div>`).join('');

  area.innerHTML=`
    <div class="qcard" style="padding:20px;">
      <div style="text-align:center;margin-bottom:16px;">
        <div style="font-family:'Fredoka One',cursive;font-size:1.6em;color:var(--blue);">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ Parent Review</div>
        <div style="font-size:.88em;color:#777;font-weight:600;margin-top:4px;">Listen to each recording, check the typed answer â€” then mark it!</div>
      </div>
      <div id="reviewRows">${rows}</div>
      <div style="text-align:center;margin-top:16px;" id="scoreArea"></div>
      <div style="text-align:center;margin-top:14px;display:flex;gap:10px;justify-content:center;flex-wrap:wrap;">
        <button class="qnext" onclick="startQuiz()">ğŸ”„ New Quiz</button>
        <button class="qnext" style="background:var(--lb);" onclick="buildQuiz()">ğŸ  Home</button>
      </div>
    </div>`;

  QS.marks=new Array(answers.length).fill(null);
  QS.markCount=0;
}

window.speakReview=function(heb){speakHeb(heb);};

window.markQ=function(i,correct){
  if(QS.marks[i]!==null)return;
  QS.marks[i]=correct;
  QS.markCount++;
  const row=document.getElementById('rrow_'+i);
  if(row){
    row.style.background=correct?'#e8f8ee':'#fff0f0';
    row.style.borderColor=correct?'#2ecc71':'var(--red)';
    row.querySelectorAll('button[onclick^="markQ"]').forEach(b=>{b.style.opacity='0.4';b.style.cursor='default';});
    const badge=document.createElement('div');
    badge.style.cssText='text-align:center;font-weight:800;font-size:1.1em;margin-top:6px;';
    badge.textContent=correct?'âœ… Correct!':'âŒ Keep practicing';
    badge.style.color=correct?'#27ae60':'var(--red)';
    row.appendChild(badge);
  }
  if(QS.markCount===QS.marks.length){
    const score=QS.marks.filter(Boolean).length;
    const tot=QS.marks.length;
    const pct=Math.round((score/tot)*100);
    const msg=pct>=90?'ğŸ† Bar Mitzvah ready!':pct>=70?'ğŸŒŸ Great work â€” almost there!':pct>=50?'ğŸ’ª Good effort â€” keep going!':'ğŸ“š Great practice â€” let\'s try again!';
    const sa=document.getElementById('scoreArea');
    if(sa)sa.innerHTML=`<div class="bigscore" style="font-size:2.8em;">${score} / ${tot}</div><div class="scoremsg">${msg}</div>`;
  }
};

// ===================================================================
// TAB MANAGEMENT
// ===================================================================
function showTab(tab,btn){
  ['letters','words','prayers','quiz'].forEach(t=>document.getElementById('tab-'+t).classList.add('hidden'));
  document.getElementById('tab-'+tab).classList.remove('hidden');
  document.querySelectorAll('.tab-btn').forEach(b=>b.classList.remove('active'));
  if(btn)btn.classList.add('active');
}

// ===================================================================
// INIT
// ===================================================================
buildLetters();
buildTrope();
buildWords();
buildPrayers();
buildQuiz();
initTTS();
</script>
</body>
</html>
